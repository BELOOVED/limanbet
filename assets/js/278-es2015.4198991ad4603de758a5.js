(self.webpackChunkfenrir=self.webpackChunkfenrir||[]).push([[278],{40278:function(e,t,s){"use strict";s.d(t,{g:function(){return H}});var i=s(11731),r=s(91113),a=s(42528),n=s(71616),o=s(12257),c=s(89680),l=s(38506),d=s(95671),u=s(90368),h=s(49975),m=s(96059),p=s(48456),g=s(80062),b=s(38282),v=s(60314),f=s(37121),y=s(29828),S=s(80540),E=s(33611),T=s(97312),A=s(90743),I=s(82285),B=s(67220),O=s(15617),M=s(1022),w=s(116),_=s(8058),P=s(27095),L=s(20605),N=s(27860),x=s(78399),C=s(49854),k=s(35387),F=s(42558),R=s(71546),D=s(32980),G=s(94963),U=s(66856),$=s(59859),W=s(82479),V=s(72643);i.v,r.o,n.l,a.x,y.O,o._,c.q,f.T,u.S,m.w,p.g,g.g,b.Q,D.r,U.y,v.t,E._,T.R,S.u,O.j,M.Z,w.e,P.I,F.Y,C.s,k.j,G.x,W.N,l.z,d.o,h.S,A.u,I.g,B.Z,_.J,L.p,N.z,x.M,C.s,k.j,R.O,$.B;class H{}H.\u0275fac=function(e){return new(e||H)},H.\u0275mod=V.oAB({type:H}),H.\u0275inj=V.cJS({imports:[[]]})},96059:function(e,t,s){"use strict";s.d(t,{w:function(){return a}});var i=s(72643),r=s(11056);class a{constructor(e,t){this.el=e,this.iframeMessagesService=t}ngOnInit(){}ngAfterViewInit(){this.clickEventStarted()}clickEventStarted(){this.el.nativeElement.querySelector("div.modul-header")&&this.el.nativeElement.querySelector("div.modul-header").addEventListener("click",()=>{this.el.nativeElement.querySelector("div.modul-content")&&("none"===this.el.nativeElement.querySelector("div.modul-content").style.display?(this.el.nativeElement.classList.remove("close"),this.el.nativeElement.querySelector("div.modul-content").style.display="block"):(this.el.nativeElement.classList.add("close"),this.el.nativeElement.querySelector("div.modul-content").style.display="none"))})}ngOnChanges(e){e.outToggle.firstChange?e.outToggle.currentValue||e.outToggle.previousValue?e.outToggle.currentValue&&!e.outToggle.previousValue&&(this.el.nativeElement.classList.remove("close"),this.el.nativeElement.querySelector("div.modul-content")?this.el.nativeElement.querySelector("div.modul-content").style.display="block":this.el.nativeElement.querySelector("div.modul-accordion")&&(this.el.nativeElement.querySelector("div.modul-accordion").style.display="block")):(this.el.nativeElement.classList.add("close"),this.el.nativeElement.querySelector("div.modul-content")?this.el.nativeElement.querySelector("div.modul-content").style.display="none":this.el.nativeElement.querySelector("div.modul-accordion")&&(this.el.nativeElement.querySelector("div.modul-accordion").style.display="none")):this.el.nativeElement.querySelector("div.modul-content")&&("none"===this.el.nativeElement.querySelector("div.modul-content").style.display?(this.el.nativeElement.classList.remove("close"),this.el.nativeElement.querySelector("div.modul-content")?this.el.nativeElement.querySelector("div.modul-content").style.display="block":this.el.nativeElement.querySelector("div.modul-accordion")&&(this.el.nativeElement.querySelector("div.modul-accordion").style.display="block")):(this.el.nativeElement.classList.add("close"),this.el.nativeElement.querySelector("div.modul-content")?this.el.nativeElement.querySelector("div.modul-content").style.display="none":this.el.nativeElement.querySelector("div.modul-accordion")&&(this.el.nativeElement.querySelector("div.modul-accordion").style.display="none")))}}a.\u0275fac=function(e){return new(e||a)(i.Y36(i.SBq),i.Y36(r.e))},a.\u0275dir=i.lG2({type:a,selectors:[["","accordion",""]],inputs:{outToggle:["out-toggle","outToggle"]},features:[i.TTD]})},82479:function(e,t,s){"use strict";s.d(t,{N:function(){return r}});var i=s(72643);class r{constructor(e){this.elRef=e}ngOnInit(){this.registerAsianBtgContainerDomChange(this.elRef.nativeElement)}registerAsianBtgContainerDomChange(e){new MutationObserver(t=>{let s=e.getElementsByClassName("locked-icon")[0],i=e.getElementsByClassName("bet-btn-odd");i.length?i.length&&(s.style.display="none"):s.style.display="block"}).observe(e,{attributes:!1,childList:!0,subtree:!0})}}r.\u0275fac=function(e){return new(e||r)(i.Y36(i.SBq))},r.\u0275dir=i.lG2({type:r,selectors:[["","asianLockIconHandler",""]]})},89680:function(e,t,s){"use strict";s.d(t,{q:function(){return p}});var i=s(16617),r=s(72643),a=s(7035),n=s(41189),o=s(60131),c=s(98995),l=s(55209),d=s(25288),u=s(11056),h=s(98620),m=function(e,t,s,i){return new(s||(s=Promise))(function(r,a){function n(e){try{c(i.next(e))}catch(t){a(t)}}function o(e){try{c(i.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(n,o)}c((i=i.apply(e,t||[])).next())})};class p{constructor(e,t,s,i,r,a,n,o){this.decimalPipe=e,this.toastFactory=t,this.betSlipService=s,this.translate=i,this.userService=r,this.storageService=a,this.iframeMessage=n,this.fastBetService=o,this.params={},this.fastBetIsOpen=null!==this.storageService.session.get("ip"),this.fastBetProcess=this.storageService.local.get("fastBetProcess")}ngOnInit(){this.ipSubs=this.fastBetService.fastBetIsOpen$.subscribe(e=>{this.fastBetIsOpen=e})}ngOnDestroy(){this.ipSubs&&this.ipSubs.unsubscribe()}onClick(e){if(this.fastBetIsOpen){if(!this.fastBetProcess&&(void 0===this.betMap.valid||this.betMap.valid)&&(void 0===this.betMap.tvalid||this.betMap.tvalid)){this.errors.limitErrors.clear();const t=document.createElement("div");t.id=i.N.trader.IsIframe?"selectorOfFastBetPlayingForExternal":"selectorOfFastBetPlaying",this.translate.get("MESSAGES.PLAYING").subscribe(s=>{t.innerHTML=s,e.target.getAttribute("class").indexOf("bet-btn-odd")>-1?e.target.appendChild(t):e.target.querySelector(".bet-btn-odd")&&e.target.querySelector(".bet-btn-odd").closest(".bet-btn")?e.target.querySelector(".bet-btn-odd").closest(".bet-btn").appendChild(t):e.target.parentElement.appendChild(t)}),this.fastBetProcess=!0,this.storageService.local.set("fastBetProcess",!0);const s=this.betSlipService.ipSlip;s.ip=1,s.cps=[],s.ar=this.betSlipService.hideAcceptOddChanges?1:s.ar,s.ad=this.betSlipService.hideAcceptOddChanges?1:s.ad;const r=this.betSlipService.setSelectedOddAndAmountForIP(this.sportType,this.betMap,this.season);if(this.betSlipService.ipAmount&&r.active){const e=this.decimalPipe.transform(this.betSlipService.ipAmount,"1.2-2");s.cps.push({pa:Number(e.replace(/\,/g,"")),cs:1,ce:1,ib:!1,po:[{fo:r.foId,sl:r.selection,ba:!1,fr:r.odd}]})}this.betSlipService.play(s).then(e=>{if(e){if(t.remove(),i.N.trader.IsIframe)this.translate.get("MESSAGES.BET_ACCEPTED").subscribe(e=>{this.iframeMessage.showSnackbar(e,"success")});else{let e;this.translate.get("MESSAGES.BET_ACCEPTED").subscribe(t=>{e=t,this.toastFactory.success(e)})}this.userService.refreshBalance().then(e=>{console.log("balanceRes------\x3e from fastbet",e)}),this.fastBetProcess=!1,this.storageService.local.set("fastBetProcess",!1)}}).catch(e=>{t.remove(),this.errorHandler(e,!1),this.fastBetProcess=!1,this.storageService.local.set("fastBetProcess",!1)})}}else void 0!==this.betMap.valid&&!this.betMap.valid||void 0!==this.betMap.tvalid&&!this.betMap.tvalid||this.betSlipService.toggleOdd(this.sportType,this.betMap,this.season)}errorHandler(e,t){return m(this,void 0,void 0,function*(){const s=yield this.betSlipService.errorHandler(e,t);if(s&&s.action)switch(s.action){case"limitErrorAction":this.limitErrorAction(s.error);break;case"defaultErrorAction":this.defaultErrorAction(s.error,t)}else{let t;this.translate.get(`MESSAGES.${e[0].key}`,{param0:e[0].params}).subscribe(e=>{t=e,i.N.trader.IsIframe?this.iframeMessage.showSnackbar(t,"error"):this.toastFactory.error(t)})}})}limitErrorAction(e){const t={currencyCode:this.userService.user.currency.currencySymbol};if(e.params){e.params.toString().split(",").forEach((e,s)=>{t[`param${s}`]=e})}this.translate.get(`MESSAGES.${e.key}`,t).subscribe(e=>{this.params=t;const s=t.param1,r=t.param2;if(this.errors.limitErrors.has(s)){r<this.errors.limitErrors.get(s).maxPlayAmount&&this.betSlipService.errors.limitErrors.set(s,{maxPlayAmount:r,transErr:e})}else this.betSlipService.errors.limitErrors.set(s,{maxPlayAmount:r,transErr:e});for(const t of this.errors.limitErrors)i.N.trader.IsIframe?this.iframeMessage.showSnackbar(t[1].transErr,"error"):this.toastFactory.error(t[1].transErr)})}defaultErrorAction(e,t){const s={currencyCode:this.userService.user.currency.currencySymbol};if(e.params){e.params.toString().split(",").forEach((e,t)=>{s[`param${t}`]=e})}this.translate.get(`MESSAGES.${e.key}`,s).subscribe(t=>{"BELOW_MINIMUM_BET_AMOUNT"===e.key?this.betSlipService.errors.playError=`${t} ${this.decimalPipe.transform(this.sMPA,"1.2-2")} ${this.userService.user.currency}`:(this.betSlipService.errors.playError=t,i.N.trader.IsIframe?this.iframeMessage.showSnackbar(t,"error"):this.toastFactory.error(t))})}get sMPA(){return this.betSlipService.sMPA}get errors(){return this.betSlipService.errors}}p.\u0275fac=function(e){return new(e||p)(r.Y36(a.JJ),r.Y36(n.U),r.Y36(o.V),r.Y36(c.sK),r.Y36(l.Y),r.Y36(d.S),r.Y36(u.e),r.Y36(h.u))},p.\u0275dir=r.lG2({type:p,selectors:[["","bet-button",""]],hostBindings:function(e,t){1&e&&r.NdJ("click",function(e){return t.onClick(e)})},inputs:{sportType:["sport-type","sportType"],season:"season",betMap:["bet-map","betMap"]}})},42558:function(e,t,s){"use strict";s.d(t,{Y:function(){return r}});var i=s(72643);class r{constructor(e){this.el=e}ngOnInit(){this.makeStyle()}makeStyle(){if(this.el.nativeElement)if(this.preview){const e=new RegExp(/(.*?)(-)/,"gmi");setTimeout(()=>{const t=this.el.nativeElement.innerText.split(","),s=[];let i="";for(const r in t)t[r]=t[r].trim(),s.push(t[r].replace(e,'<span style="font-weight: lighter;">$1</span>$2'));for(const e in s)i+=`${s[e]}<br>`;this.el.nativeElement.innerHTML=i},1e3)}else{const e=new RegExp(/(.*?\))/,"gmi");let t="";setTimeout(()=>{const s=this.el.nativeElement.innerText.match(e);s&&s.length&&s.forEach(e=>{const s=e.split("-"),i=s.reverse();s&&s.length&&i.forEach((e,s)=>{t+=s%2?`<div class="c2">${e}</div></div>`:`<div class="c-con"><div class="c1"> ${e}</div>`})}),this.el.nativeElement.innerHTML=t},1e3)}}}r.\u0275fac=function(e){return new(e||r)(i.Y36(i.SBq))},r.\u0275dir=i.lG2({type:r,selectors:[["","libBetbuilderDescriptionStyling",""]],inputs:{preview:"preview"}})},38282:function(e,t,s){"use strict";s.d(t,{Q:function(){return u}});var i=s(16617),r=s(72643),a=s(99960),n=s(2397),o=s(99701),c=s(41182),l=s(46627),d=s(25288);class u{constructor(e,t,s,r,a,n,o){this.trackersDataService=e,this.el=t,this.translateFactory=s,this.applicationService=r,this.traderService=a,this.router=n,this.storageService=o,this.mainGap=80,this.isDetailPage=!1,this.isMobileExpandedLmtV3ableLMT=!0,this.trackerUrl=this.applicationService.settingList.find(e=>"BetradarMatchTracker"===e.parameter).value,this.headerHeight=i.N.trader.IsIframe?0:document.getElementsByTagName("header")[0].offsetHeight,this.classNameOfPlatform=i.N.trader.isSportingTechTrader?"lmts-container":"lmt-container",this.isMobileExpandedLmtV3=void 0!==this.traderService.trader.isMobileExpandedLmtV3&&!this.traderService.trader.isMobileExpandedLmtV3,this.isSportRadarMatchPreviewActive=this.traderService.trader.isSportRadarMatchPreviewActive,this.trackerUrlNew=this.traderService.trader.betradarTrackerV3ClientId&&this.applicationService.settingList.find(e=>"BetradarMatchTrackerV3"===e.parameter)?this.applicationService.settingList.find(e=>"BetradarMatchTrackerV3"===e.parameter).value:"",this.trackerStatusSubs=this.trackersDataService.trackerStatus.subscribe(e=>{if(2===e.providerId)if(this.collapsed=e.collapsed,this.eventType=e.eventType,this.isPreliveModalActive=e.isPreliveModalActive,this.isSupport=e.lvt,this.isDetailPage="detail"===e.pageType,e.lvt){const t=document.getElementById(`lmt-cnt-${this.matchId}-${this.sportId}`);t&&(t.remove(),this.removeDestroyWidget()),this.matchId=e.eventId,this.sportId=e.sportTypeId,setTimeout(()=>{this.prepareMatchData()})}else{const e=document.getElementById(`lmt-cnt-${this.matchId}-${this.sportId}`);e&&(e.remove(),this.removeDestroyWidget()),this.matchId=null,this.sportId=null}})}ngOnDestroy(){const e=document.getElementById(`lmt-cnt-${this.matchId}-${this.sportId}`),t=document.getElementById("sr-wl");this.removeDestroyWidget(),window.SRLive&&Object.keys(window.SRLive).length>0&&(window.SRLive.destroy(),e&&e.remove(),t&&t.remove()),this.trackerStatusSubs.unsubscribe()}prepareMatchData(){(this.traderService.trader.tBS||this.traderService.trader.isSportRadarMatchPreviewActive)&&this.appendScriptIntoDomAndGenerate(this.trackerUrl.replace("<LANGUAGE>",this.translateFactory.currentLang.code).replace("<TIMEZONE>","Europe:Istanbul"),this.matchId,!1)}removeDestroyWidget(){if(void 0!==this.activeLiveTracker){const e=window.SRLive.getWidget(this.activeLiveTracker);e&&window.SRLive.removeWidget(e)}}appendScriptIntoDomAndGenerate(e,t,s){this.appendTrackerContainer(),this.generateScript(e,t,s)}appendTrackerContainer(){if(!document.getElementById(`lmt-cnt-${this.matchId}-${this.sportId}`)){const e=document.createElement("div");e.id=`lmt-cnt-${this.matchId}-${this.sportId}`,e.className=this.classNameOfPlatform,this.el.nativeElement.appendChild(e)}}generateScript(e,t,s){var r;if(this.traderService.trader.betradarTrackerV3ClientId){this.clientId=this.traderService.trader.betradarTrackerV3ClientId,this.trackerUrlNew=this.trackerUrlNew.replace("<CLIENTID>",this.clientId),this.trackerGoalBannerImage=this.traderService.trader.goalBannerImage,this.trackerGoalBannerBgColor=this.traderService.trader.goalBannerCustomBgColor;const e=this.translateFactory.currentLang.code,t=(null===(r=i.N.trader.langList[e])||void 0===r?void 0:r.betradarLangCode)||e,s={url:this.trackerUrlNew,fId:this.matchId,isMobileExpandedLmtV3:this.isMobileExpandedLmtV3,langCode:t,isDetail:this.isDetailPage,eventType:this.eventType,collapsed:this.collapsed,isPreliveModalActive:this.isPreliveModalActive,isSportRadarMatchPreviewActive:this.isSportRadarMatchPreviewActive};"m"!==this.storageService.local.get("device")&&(s.image=this.trackerGoalBannerImage,s.bgColor=this.trackerGoalBannerBgColor),setTimeout(()=>{initTrackerScriptNEW(s)},200),"m"===this.storageService.local.get("device")&&this.calculateMainContainersHeight()}else initTrackerScript(e),this.addingWidget(t,s)}calculateMainContainersHeight(){let e=0,t=0;setTimeout(()=>{document.querySelector("betbooster-widget")&&(this.betboosterWidget=document.querySelector("betbooster-widget")),e=document.getElementById("lmv-tb").offsetHeight,this.isMobileExpandedLmtV3?document.getElementById("sr-widget-all")&&(t=document.getElementById("sr-widget-all").offsetHeight):document.getElementById("sr-exp-widget")&&(t=document.getElementById("sr-exp-widget").offsetHeight),this.mainContainerHeight=e+t+this.betboosterWidget.offsetHeight},2e3)}addingWidget(e,t){this.trackerConfig=this.setAllWidgetConfig(e,t);const s=setInterval(()=>{window.SRLive&&(window.document.SRLive2=window.SRLive,clearInterval(s),this.activeLiveTracker=window.SRLive.addWidget(this.trackerConfig))},500)}setAllWidgetConfig(e,t){return t?this.getConfigWithScroll(e):this.isDetailPage?this.getConfigForDetailPage(e):this.getConfigWithoutScroll(e)}getConfigWithScroll(e){return{name:"widgets.lmts",config:{matchId:e,collapse_enabled:!1,collapse_startCollapsed:!1,showPitch:!0,showScoreboard:!1,showSidebar:!1,showHeatmap:!1,showLineups:!1,showMomentum2:!1,showMomentum:!1,pitchCrowd:!1,momentum2_showArea:!1,container:`.${this.classNameOfPlatform}`,sidebarLayout:"bottom",showTitle:!1,showLivetable:!1,showHeader:!1,showMatch:!1,showLeagueTable:!1,showGoalscorers:!1},callback:e=>{console.log("tracker callback--------\x3e",e)}}}getConfigWithoutScroll(e){return{name:"widgets.lmts",config:{matchId:e,collapse_enabled:!0,collapse_startCollapsed:!0,showPitch:!0,showSidebar:!0,showHeatmap:!0,showLineups:!1,showMomentum2:!1,showMomentum:!0,pitchCrowd:!0,momentum2_showArea:!1,container:`.${this.classNameOfPlatform}`,sidebarLayout:"dynamic"},callback:e=>{}}}getConfigForDetailPage(e){return{name:"widgets.lmts",config:{matchId:e,collapse_enabled:!0,collapse_startCollapsed:"m"===this.storageService.local.get("device")&&this.traderService.trader.lmtCollapsed,showPitch:!0,showSidebar:!0,showHeatmap:!0,showLineups:!1,showMomentum2:!1,showMomentum:!0,pitchCrowd:!0,momentum2_showArea:!1,container:`.${this.classNameOfPlatform}`,sidebarLayout:"dynamic"},callback:e=>{}}}setMarketScrollStatus(e){const t=document.getElementById("lmv-tb"),s=document.getElementById("hdr-c");if(window.scrollY>e){if(!t.classList.contains("lmv-tb-fx"))if(t.classList.add("lmv-tb-fx"),this.traderService.trader.betradarTrackerV3ClientId){const e=84+this.headerHeight;t.style.top=s.classList.contains("shw-fx")?`${e}px`:"0px"}else t.style.top=s.classList.contains("shw-fx")?`${this.headerHeight}px`:"0px"}else t.classList.contains("lmv-tb-fx")&&t.classList.remove("lmv-tb-fx")}setLMTScrollStatus(e){if(!this.traderService.trader.lmtScrollFixed)return;const t=document.getElementById("lmv"),s=document.getElementById("hddn"),i=document.getElementById("lmv-tb");if(window.scrollY<50&&(this.isMobileExpandedLmtV3ableLMT=!0),window.scrollY>e){if(t.classList.contains("lmv-fx"))return;t.classList.add("lmv-fx"),t.style.top=`${this.headerHeight+i.offsetHeight}px`,s.style.height="200px",this.appendScriptIntoDomAndGenerate(this.trackerUrl.replace("<LANGUAGE>",this.translateFactory.currentLang.code).replace("<TIMEZONE>","Europe:Istanbul"),this.matchId,!0);const e=document.createElement("div"),r=document.createElement("div");e.id="lmvtch",r.id="lmvtch-c",r.append(e),e.innerHTML='<i class="fa fa-close"></i>',this.el.nativeElement.append(r),e.addEventListener("click",t=>{const s=document.getElementById("sr-wl"),i=document.getElementById(`lmt-cnt-${this.matchId}-${this.sportId}`);this.removeDestroyWidget(),window.SRLive&&setTimeout(()=>{window.SRLive&&window.SRLive.destroy(),e.remove(),s&&s.remove(),i&&i.remove()},500)})}else if(window.scrollY<e/2){if(!t.classList.contains("lmv-fx"))return;s.style.height="0",t.removeAttribute("style"),t.classList.remove("lmv-fx"),document.getElementById("lmvtch")&&document.getElementById("lmvtch").remove(),this.appendScriptIntoDomAndGenerate(this.trackerUrl.replace("<LANGUAGE>",this.translateFactory.currentLang.code).replace("<TIMEZONE>","Europe:Istanbul"),this.matchId,!1)}}setLMT3ViewStatus(){const e=["fixed","lmv-tb-fx"],t=document.getElementById("odd-cont-0");if(this.isMobileExpandedLmtV3){document.getElementById("sr-widget-all").offsetHeight;const s=document.getElementById("sr-widget-all"),i=document.getElementById("sr-widget-plus"),r=document.getElementById("sr-widget"),a=document.getElementById("lmv-tb");window.scrollY>this.mainContainerHeight?this.inScroll||(s.style.top=`${this.headerHeight}px`,i.classList.add("swp-collapse"),r.classList.remove("hide"),r.classList.add("show"),s.classList.add("fixed"),a.classList.contains("fixed")||(a.classList.add(...e),a.style.top="0"),t&&(t.style.marginTop=this.mainContainerHeight+this.mainGap-this.betboosterWidget.offsetHeight+"px"),this.inScroll=!0):this.inScroll&&(i.classList.remove("swp-collapse"),r.classList.remove("show"),r.classList.add("hide"),s.classList.remove("fixed"),a.classList.contains("fixed")&&(a.classList.remove(...e),a.style.removeProperty("top")),t&&(t.style.marginTop="0"),this.inScroll=!1)}else{document.getElementById("sr-exp-widget");const s=document.getElementById("sr-exp-bc"),i=document.getElementById("sr-w-fx-plus"),r=document.getElementById("lmv-tb"),a=document.getElementById("sr-w-comp"),n=document.getElementsByClassName("srm-timeline")[0];if(window.scrollY>this.mainContainerHeight){if(!this.inScroll){if(s.classList.contains("fixed")||(s.classList.add("fixed"),s.style.top="0"),i.classList.contains("fixed")||(i.classList.add("fixed"),i.style.top=`${s.offsetHeight}px`,a.classList.add("fixed"),n.style.display="none",a.style.top=`${s.offsetHeight+i.offsetHeight}px`),r.classList.contains("fixed")||(r.classList.add(...e),r.style.top=`${s.offsetHeight+i.offsetHeight+a.offsetHeight}px`),t){let e=0;this.collapsed&&document.getElementById("sr-w-plus")&&(e=document.getElementById("sr-w-plus").offsetHeight),t.style.marginTop=this.mainContainerHeight+this.mainGap-e-this.betboosterWidget.offsetHeight+"px"}this.inScroll=!0}}else this.inScroll&&(s.classList.contains("fixed")&&(s.classList.remove("fixed"),s.style.removeProperty("top")),i.classList.contains("fixed")&&(i.classList.remove("fixed"),i.style.removeProperty("top")),a.classList.contains("fixed")&&(a.classList.remove("fixed"),a.style.removeProperty("top"),n.style.removeProperty("display")),r.classList.contains("fixed")&&(r.classList.remove(...e),r.style.removeProperty("top")),t&&(this.collapsed&&(document.getElementById("sr-w-plus").style.display="block"),t.style.marginTop="0"),this.inScroll=!1)}}onWindowScroll(){if(!this.isSupport)return;if("m"!==this.storageService.local.get("device"))return;const e=document.getElementById("fxtr-dtl-cntnt").offsetHeight;e&&(this.traderService.trader.betradarTrackerV3ClientId?"live"===this.eventType&&this.setLMT3ViewStatus():(this.setLMTScrollStatus(e),this.setMarketScrollStatus(e)))}}u.\u0275fac=function(e){return new(e||u)(r.Y36(a.O),r.Y36(r.SBq),r.Y36(n.c),r.Y36(o.W),r.Y36(c._),r.Y36(l.F0),r.Y36(d.S))},u.\u0275dir=r.lG2({type:u,selectors:[["","libBetradarLiveMatchTracker",""]],hostBindings:function(e,t){1&e&&r.NdJ("scroll",function(e){return t.onWindowScroll(e)},!1,r.Jf7)}})},48456:function(e,t,s){"use strict";s.d(t,{g:function(){return r}});var i=s(72643);class r{constructor(e){this.el=e,this.rule=null}ngOnInit(){this.markedString&&"string"==typeof this.markedString&&(this.rule=new RegExp(`(.*?)(${this.markedString})(.*?)`,"gi"));const e=setInterval(()=>{this.el.nativeElement.innerText.length>1&&(this.markeIt(),clearInterval(e))},500)}ngOnChanges(e){this.markedString&&"string"==typeof this.markedString&&(this.rule=new RegExp(`(.*?)(${this.markedString})(.*?)`,"gi"));const t=setInterval(()=>{this.el.nativeElement.innerText.length>1&&(this.markeIt(),clearInterval(t))},500)}markeIt(){if(this.markedString)if("string"==typeof this.markedString){const e=this.el.nativeElement.innerText;this.el.nativeElement.innerHTML=this.markedString.trim()?e.replace(this.rule,'$1<b class="bold-marker">$2</b>$3'):e}else{const e=this.el.nativeElement.innerText,t=new RegExp(`(.*?)(${e})(.*?)`,"gi");this.markedString.minOdd<=Number(e)&&this.markedString.maxOdd>=Number(e)&&(this.el.nativeElement.innerHTML=e.replace(t,'$1<b class="bold-marker">$2</b>$3'))}}}r.\u0275fac=function(e){return new(e||r)(i.Y36(i.SBq))},r.\u0275dir=i.lG2({type:r,selectors:[["","bold-marker",""]],inputs:{markedString:["bold-marker","markedString"]},features:[i.TTD]})},80540:function(e,t,s){"use strict";s.d(t,{u:function(){return n}});var i=s(72643),r=s(88634),a=s(7035);class n{constructor(e,t,s){this.customNumpadService=t,this.decimalPipe=s,this.numPadAmountSubs=this.customNumpadService.cNumPadAmountChanged.subscribe(t=>{if("delete"===t.action){if("0"!==e.nativeElement.querySelector("span#number").innerHTML)if(e.nativeElement.querySelector("span#number").classList.contains("selected"))e.nativeElement.querySelector("span#number").innerHTML="0",e.nativeElement.querySelector("span#number").classList.remove("selected"),this.customNumpadService.floating=!1,this.customNumpadService.numPadAmount=0;else if(this.customNumpadService.floating){2===this.customNumpadService.increasingFloatIndex&&(this.customNumpadService.floating=!1,this.customNumpadService.increasingFloatIndex=0);const t=e.nativeElement.querySelector("span#number").innerHTML.split(".");if(1===this.customNumpadService.increasingFloatIndex)e.nativeElement.querySelector("span#number").innerHTML=e.nativeElement.querySelector("span#number").innerHTML.replace(/\./g,""),e.nativeElement.querySelector("span#number").innerHTML=e.nativeElement.querySelector("span#number").innerHTML.replace(/\,/g,""),t[0]=t[0].replace(/\,/g,""),this.customNumpadService.numPadAmount=t[0],this.customNumpadService.floating=!1,this.customNumpadService.increasingFloatIndex=0,this.customNumpadService.useServiceAmount=!0,e.nativeElement.querySelector("span#number").innerHTML=t[0];else{const s=t[0]+"."+t[1].slice(0,t[1].length-1);e.nativeElement.querySelector("span#number").innerHTML=s,this.customNumpadService.increasingFloatIndex+=1}}else e.nativeElement.querySelector("span#number").innerHTML=t.amount,"0"===e.nativeElement.querySelector("span#number").innerHTML&&(this.customNumpadService.numPadAmount=0,this.customNumpadService.floating=!1)}else if("set"===t.action){if(this.customNumpadService.floating){this.customNumpadService.increasingFloatIndex=0;const s=e.nativeElement.querySelector("span#number").innerHTML.split(".");"00"===s[1]&&(s[1]="");const i=s[1]+t.decimalAmount;i.length<=2&&(e.nativeElement.querySelector("span#number").innerHTML=s[0]+"."+i)}else if(t.fromAlreadyAmount)e.nativeElement.querySelector("span#number").innerHTML="",this.customNumpadService.numPadAmount=t.amount,e.nativeElement.querySelector("span#number").innerHTML=t.amount;else if(e.nativeElement.querySelector("span#number").classList.contains("selected"))e.nativeElement.querySelector("span#number").classList.remove("selected"),e.nativeElement.querySelector("span#number").innerHTML=t.amount,this.customNumpadService.numPadAmount=t.amount;else if(this.customNumpadService.increasingFloatIndex>=2){const s=e.nativeElement.querySelector("span#number").innerHTML;this.customNumpadService.containsSetted=!0,this.customNumpadService.containsSetted?(this.customNumpadService.floating=!0,this.customNumpadService.increasingFloatIndex=0):e.nativeElement.querySelector("span#number").innerHTML=s+t.amount}else e.nativeElement.querySelector("span#number").innerHTML=t.amount;this.customNumpadService.retrySet=!1}else"floating"===t.action?(e.nativeElement.querySelector("span#number").innerHTML=e.nativeElement.querySelector("span#number").innerHTML.replace(/\./g,""),t.amount?e.nativeElement.querySelector("span#number").innerHTML=this.decimalPipe.transform(t.amount,"1.2-2"):e.nativeElement.querySelector("span#number").innerHTML=this.decimalPipe.transform("0","1.2-2")):"save"===t.action?(this.customNumpadService.floating=!1,this.customNumpadService.numPadAmount=0,this.customNumpadService.innerAmount=0,e.nativeElement.querySelector("span#number").innerHTML="0"):"retry"===t.action?(e.nativeElement.querySelector("span#number").innerHTML=t.amount,e.nativeElement.querySelector("span#number").classList.add("selected")):"typeChaged"===t.action&&(e.nativeElement.querySelector("span#number").innerHTML="0",this.customNumpadService.floating=!1,this.customNumpadService.numPadAmount=0);this.customNumpadService.innerAmount=e.nativeElement.querySelector("span#number").innerHTML})}ngOnInit(){}ngOnChanges(e){}ngOnDestroy(){this.numPadAmountSubs.unsubscribe()}onClick(e){e.id&&"number"===e.id?e.classList.contains("selected")?e.classList.remove("selected"):e.classList.add("selected"):!e.id||"eas"!==e.id&&"css"!==e.id?e.querySelector("span#number").classList&&(e.querySelector("span#number").classList.contains("selected")?e.querySelector("span#number").classList.remove("selected"):e.querySelector("span#number").classList.add("selected")):document.getElementById("number").classList&&(document.getElementById("number").classList.contains("selected")?document.getElementById("number").classList.remove("selected"):document.getElementById("number").classList.add("selected"))}}n.\u0275fac=function(e){return new(e||n)(i.Y36(i.SBq),i.Y36(r.s),i.Y36(a.JJ))},n.\u0275dir=i.lG2({type:n,selectors:[["","libCNumpadAmount",""]],hostBindings:function(e,t){1&e&&i.NdJ("click",function(e){return t.onClick(e.target)})},inputs:{numPadAmount:"numPadAmount"},features:[i.TTD]})},80062:function(e,t,s){"use strict";s.d(t,{g:function(){return l}});var i=s(33452),r=s(4576),a=s(16617),n=s(72643),o=s(55209),c=s(7035);class l{constructor(e,t,s,i,a,n){this.userService=e,this.ngModel=t,this.currencyPipe=s,this.decimalPipe=i,this.el=a,this.cntrl=n,this.cCode=null,this.symbolType="symbol",this.narrowSymbolList=["AOA"],this.subs=this.userService.isLoggedIn.pipe((0,r.b)(1e3)).subscribe(()=>{let e=this.el.nativeElement.value;void 0!==e&&e.length&&("0"===e?this.el.nativeElement.value="0.00":this.ngModel.viewModel&&(this.removeCCode(),this.symbolType=this.narrowSymbolList.indexOf(this.cCode)>-1?"symbol-narrow":"symbol",e=null!==this.cCode?this.currencyPipe.transform(this.ngModel.viewModel.replace(/\,/g,""),this.cCode,this.symbolType,"1.2-2"):this.decimalPipe.transform(this.ngModel.viewModel.replace(/\,/g,""),"1.2-2"),this.el.nativeElement.value=e))})}ngOnDestroy(){void 0!==this.subs&&this.subs.unsubscribe()}ngOnInit(){let e=this.el.nativeElement.value;void 0!==e&&e.length&&("0"===e?this.el.nativeElement.value="0.00":(this.removeCCode(),this.symbolType=this.narrowSymbolList.indexOf(this.cCode)>-1?"symbol-narrow":"symbol",e=null!==this.cCode?this.currencyPipe.transform(e.replace(/\,/g,""),this.cCode,this.symbolType,"1.2-2"):this.decimalPipe.transform(e.replace(/\,/g,""),"1.2-2"),this.el.nativeElement.value=e))}keyEvent(e){const t=[48,49,50,51,52,53,54,55,56,57,8,9,13,190,37,39,32],s=e.which||e.charCode||e.keyCode,i=e.target,r=i.value,a=new RegExp(/[^0-9-.]/,"g");if(-1!==[46,44].indexOf(s))i.value.includes(".")?(e.preventDefault(),e.stopPropagation()):44===s&&(i.value+=".",e.preventDefault(),e.stopPropagation());else if(-1!==t.indexOf(s))if(32===s){e.preventDefault(),e.stopPropagation();const t=i.selectionStart,s=i.selectionEnd;t!==s&&(i.value=r.replace(r.substring(t,s),""),i.setSelectionRange(t,t))}else 39!==s&&37!==s||(e.preventDefault(),e.stopPropagation());else i.value.match(a),e.preventDefault(),e.stopPropagation()}keyup(e){const t=e.target,s=new RegExp(/[^0-9-.]/,"g");t.value.length?null!==t.value.match(s)?(e.preventDefault(),e.stopPropagation(),t.value.match(s).map(e=>{t.value=t.value.replace(e,"")})):this.ngModel.viewToModelUpdate(t.value.replace(/\,/g,"")):this.ngModel.viewToModelUpdate(t.value)}blur(e){let t=e.target.value;""!==t&&(t.startsWith(".")&&(t=`0${t}`),t.endsWith(".")&&(t=`${t}00`),"0.00"===t?t="":(this.removeCCode(),this.symbolType=this.narrowSymbolList.indexOf(this.cCode)>-1?"symbol-narrow":"symbol",t=null!==this.cCode?this.currencyPipe.transform(t.replace(/\,/g,""),this.cCode,this.symbolType,"1.2-2"):this.decimalPipe.transform(t.replace(/\,/g,""),"1.2-2"))),this.ngModel.valueAccessor.writeValue(t)}focus(e){const t=e.target;"0.00"==t.value&&(t.value="");const s=new RegExp(/[^0-9+.]/,"g");null!==t.value.match(s)&&t.value.match(s).map(e=>{t.value=t.value.replace(e,"")}),t.value=t.value.replace(/\,/g,""),t.select()}removeCCode(){a.N.trader.removeCurrencySymbol&&(this.cCode=null)}}l.\u0275fac=function(e){return new(e||l)(n.Y36(o.Y),n.Y36(i.On),n.Y36(c.H9),n.Y36(c.JJ),n.Y36(n.SBq),n.Y36(i.a5))},l.\u0275dir=n.lG2({type:l,selectors:[["","currency-mask",""]],hostBindings:function(e,t){1&e&&n.NdJ("keypress",function(e){return t.keyEvent(e)})("keyup",function(e){return t.keyup(e)})("blur",function(e){return t.blur(e)})("focus",function(e){return t.focus(e)})},inputs:{cCode:"cCode"},features:[n._Bn([i.On])]})},71616:function(e,t,s){"use strict";s.d(t,{l:function(){return o}});var i=s(17276),r=s(72643),a=s(41182);const n=i;class o{constructor(e,t){this.el=e,this.traderService=t}ngOnInit(){this.traderService.getTraderCurrencyList().then(e=>{let t=e.find(e=>e.currencyId===this.currencyId);n(this.el.nativeElement).html(t.currencySymbol)})}}o.\u0275fac=function(e){return new(e||o)(r.Y36(r.SBq),r.Y36(a._))},o.\u0275dir=r.lG2({type:o,selectors:[["","currency-symbol",""]],inputs:{currencyId:["currency-symbol","currencyId"]}})},90368:function(e,t,s){"use strict";s.d(t,{S:function(){return l}});var i=s(97597),r=s(4576),a=s(90406),n=s(72643),o=s(76857),c=s(33452);class l{constructor(e){this.model=e,this.onDebounce=new n.vpe,this.debounceTime=500,this.isAlive$=new o.xQ}ngOnInit(){this.model.valueChanges.pipe((0,i.R)(this.isAlive$),(0,r.b)(this.debounceTime),(0,a.x)()).subscribe(e=>{this.onDebounce.emit(e)})}ngOnDestroy(){this.isAlive$.next()}}l.\u0275fac=function(e){return new(e||l)(n.Y36(c.a5))},l.\u0275dir=n.lG2({type:l,selectors:[["","ngModel","","debounce",""]],inputs:{debounceTime:["debounce","debounceTime"]},outputs:{onDebounce:"onDebounce"}})},91113:function(e,t,s){"use strict";s.d(t,{o:function(){return r}});var i=s(72643);class r{constructor(){this.fetchSelectData=new i.vpe}ngOnInit(){this.fetchSelectData.emit(this.getSelectOpt)}}r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=i.lG2({type:r,selectors:[["","get-select-opt",""]],inputs:{getSelectOpt:["get-select-opt","getSelectOpt"]},outputs:{fetchSelectData:"fetchSelectData"}})},94963:function(e,t,s){"use strict";s.d(t,{x:function(){return a}});var i=s(72643),r=s(98995);class a{constructor(e,t){this.elref=e,this.translateService=t,this.translatePrefixes=["TEXTS","MESSAGES","LINKS","LABELS"]}ngOnInit(){this.translateService.get(this.translateKey).subscribe(e=>{this.translatePrefixes.includes(e.split(".")[0])?this.elref.nativeElement.remove():this.elref.nativeElement.innerHTML=e})}}a.\u0275fac=function(e){return new(e||a)(i.Y36(i.SBq),i.Y36(r.sK))},a.\u0275dir=i.lG2({type:a,selectors:[["","hide-missing-translate",""]],inputs:{translateKey:["hide-missing-translate","translateKey"]}})},33611:function(e,t,s){"use strict";s.d(t,{_:function(){return a}});var i=s(33452),r=s(72643);class a{constructor(e){this.ibanValid=e}ibanValidation(e){return 26===(e=e.replace("_","")).length}validate(e){return this.ibanValidation(e.value)?null:{minlength:{requiredLength:26}}}}a.\u0275fac=function(e){return new(e||a)(r.$8M("ibanValid"))},a.\u0275dir=r.lG2({type:a,selectors:[["","iban-validator",""]],inputs:{iban:["iban-validator","iban"]},features:[r._Bn([{provide:i.Cf,useExisting:(0,r.Gpc)(()=>a),multi:!0}])]})},60314:function(e,t,s){"use strict";s.d(t,{t:function(){return c}});var i=s(33452),r=s(4576),a=s(72643),n=s(55209),o=s(7035);class c{constructor(e,t,s,i,a,n){this.userService=e,this.ngModel=t,this.currencyPipe=s,this.decimalPipe=i,this.el=a,this.cntrl=n,this.cCode=null,this.symbolType="symbol",this.narrowSymbolList=["AOA"],this.subs=this.userService.isLoggedIn.pipe((0,r.b)(1e3)).subscribe(()=>{let e=this.el.nativeElement.value;void 0!==e&&e.length&&this.ngModel.viewModel&&(this.symbolType=this.narrowSymbolList.indexOf(this.cCode)>-1?"symbol-narrow":"symbol",e=null!==this.cCode?this.currencyPipe.transform(this.ngModel.viewModel.replace(/\,/g,""),this.cCode,this.symbolType,"1.0-0"):this.decimalPipe.transform(this.ngModel.viewModel.replace(/\,/g,""),"1.0-0"),this.el.nativeElement.value=e)})}ngOnDestroy(){void 0!==this.subs&&this.subs.unsubscribe()}ngOnInit(){let e=this.el.nativeElement.value;void 0!==e&&e.length&&(this.symbolType=this.narrowSymbolList.indexOf(this.cCode)>-1?"symbol-narrow":"symbol",e=null!==this.cCode?this.currencyPipe.transform(e.replace(/\,/g,""),this.cCode,this.symbolType,"1.0-0"):this.decimalPipe.transform(e.replace(/\,/g,""),"1.0-0"),this.el.nativeElement.value=e)}keyEvent(e){const t=[48,49,50,51,52,53,54,55,56,57,8,9,13,37,39],s=e.which||e.charCode||e.keyCode;-1===t.indexOf(s)&&(e.preventDefault(),e.stopPropagation())}blockPaste(e){e.preventDefault()}}c.\u0275fac=function(e){return new(e||c)(a.Y36(n.Y),a.Y36(i.On),a.Y36(o.H9),a.Y36(o.JJ),a.Y36(a.SBq),a.Y36(i.a5))},c.\u0275dir=a.lG2({type:c,selectors:[["","integer-amount-mask",""]],hostBindings:function(e,t){1&e&&a.NdJ("keypress",function(e){return t.keyEvent(e)})("paste",function(e){return t.blockPaste(e)})},inputs:{cCode:"cCode"},features:[a._Bn([i.On])]})},116:function(e,t,s){"use strict";s.d(t,{e:function(){return o}});var i=s(72643),r=s(41182),a=s(25288),n=function(e,t,s,i){return new(s||(s=Promise))(function(r,a){function n(e){try{c(i.next(e))}catch(t){a(t)}}function o(e){try{c(i.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(n,o)}c((i=i.apply(e,t||[])).next())})};class o{constructor(e,t,s){this.traderService=e,this.el=t,this.storageService=s,this.headerHeight=document.getElementsByTagName("header")[0].offsetHeight,this.playerConfig={id:"plyr",handlers:["hls","html5","dash","rtc"]},this.traderService.trader.tLVS&&this.allProcessForPlayer(!1)}allProcessForPlayer(e=!1){return n(this,void 0,void 0,function*(){yield this.appendScriptAndStyleToHead(),yield this.createPlayerElement(e),yield this.callPlayerInstance(),yield this.autoTrigger()})}ngOnDestroy(){this.clearAllAssetsInTheHead(),this.streamStatusSubs&&this.streamStatusSubs.unsubscribe()}appendScriptAndStyleToHead(){return n(this,void 0,void 0,function*(){const e=document.getElementsByTagName("head"),t=document.createElement("script"),s=document.createElement("link"),i=document.getElementById("avvpl-player"),r=document.getElementById("avvpl-player-styles");t.src="https://avplayer-cdn.sportradar.com/dist/latest/avvpl-player.js",t.id="avvpl-player",s.href="https://avplayer-cdn.sportradar.com/dist/latest/styles.css",s.id="avvpl-player-styles",s.type="text/css",s.rel="stylesheet",i||e[0].append(t),r||e[0].append(s)})}callPlayerInstance(){return n(this,void 0,void 0,function*(){const e=setInterval(()=>{"undefined"!=typeof avvpl&&(this.avvplInstance=new avvpl.setupPlayer(this.playerConfig),clearInterval(e))},500)})}createPlayerElement(e){return n(this,void 0,void 0,function*(){e?(this.el.nativeElement.innerHTML=`<div id="plyr"><video id="strmPlyr" width="264" height="120" autoplay><source src="${this.plyrUrl}" type="video/mp4"></video></div>`,document.getElementById("plyr").style.height="148px",document.getElementById("plyr").style.width="264px"):(this.el.nativeElement.innerHTML=`<div id="plyr"><video id="strmPlyr" width="${this.width}" height="${this.height}" autoplay><source src="${this.plyrUrl}" type="video/mp4"></video></div>`,document.getElementById("plyr").style.height="m"===this.storageService.local.get("device")?`${this.height}`:`${this.height}px`,document.getElementById("plyr").style.width="m"===this.storageService.local.get("device")?`${this.width}`:`${this.width}px`)})}autoTrigger(){return n(this,void 0,void 0,function*(){if(document.getElementById("strmPlyr")){const e=setInterval(()=>{"undefined"!=typeof avvpl&&clearInterval(e)},500)}})}clearAllAssetsInTheHead(){return n(this,void 0,void 0,function*(){const e=document.getElementById("avvpl-player"),t=document.getElementById("avvpl-player-styles");t&&t.remove(),e&&e.remove()})}destroyPlayer(){return n(this,void 0,void 0,function*(){this.avvplInstance.remove()})}allProcessForScroll(e){return n(this,void 0,void 0,function*(){yield this.destroyPlayer(),yield this.allProcessForPlayer(e)})}onWindowScroll(){if("m"===this.storageService.local.get("device")){document.getElementById("plyr");const e=document.getElementById("lvsc"),t=document.getElementById("lmv-tb"),s=document.getElementById("hddn"),i=document.getElementById("hdr-c"),r=document.createElement("div"),a=document.createElement("div");r.id="lmvtch",a.id="lmvtch-c",a.append(r),r.innerHTML='<i class="fa fa-close"></i>',window.scrollY>120?(e.classList.contains("lmv-fx")||(e.classList.add("lmv-fx"),this.el.nativeElement.parentElement.append(a),this.allProcessForScroll(!0),s.style.height="200px",e.style.top=`${this.headerHeight+t.offsetHeight}px`,t.classList.add("lmv-tb-fx"),r.addEventListener("click",t=>{this.destroyPlayer(),this.clearAllAssetsInTheHead(),document.getElementById("lmvtch")&&document.getElementById("lmvtch").remove(),e.removeAttribute("style")})),t.style.top=i.classList.contains("shw-fx")?`${this.headerHeight}px`:"0px"):window.scrollY<100&&e.classList.contains("lmv-fx")&&(document.getElementById("lmvtch")&&document.getElementById("lmvtch").remove(),s.style.height="0",e.removeAttribute("style"),e.classList.remove("lmv-fx"),t.classList.remove("lmv-tb-fx"),this.allProcessForScroll(!1))}}}o.\u0275fac=function(e){return new(e||o)(i.Y36(r._),i.Y36(i.SBq),i.Y36(a.S))},o.\u0275dir=i.lG2({type:o,selectors:[["","libLiveMatchStream",""]],hostBindings:function(e,t){1&e&&i.NdJ("scroll",function(e){return t.onWindowScroll(e)},!1,i.Jf7)},inputs:{width:"width",height:"height",plyrUrl:"plyrUrl"}})},42528:function(e,t,s){"use strict";s.d(t,{x:function(){return a}});var i=s(33452),r=s(72643);class a{validate(e){return this.comparisonModel&&this.comparisonModel!==e.value?{matchFieldValidator:{valid:!1}}:null}}a.\u0275fac=function(e){return new(e||a)},a.\u0275dir=r.lG2({type:a,selectors:[["","comparison-model",""]],inputs:{comparisonModel:["comparison-model","comparisonModel"]},features:[r._Bn([{provide:i.Cf,useExisting:(0,r.Gpc)(()=>a),multi:!0}])]})},29828:function(e,t,s){"use strict";s.d(t,{O:function(){return a}});var i=s(33452),r=s(72643);class a{validate(e){if(!e.value)return null;const t=new Date;let s=e.value.split("/");return s=s[1]+"/"+s[0]+"/"+s[2],s=new Date(s),s.getDate()?!s.getDate()||s.getTime()<t.getTime()?{minDateNotValid:!0}:void 0:{invalidDate:!0}}}a.\u0275fac=function(e){return new(e||a)},a.\u0275dir=r.lG2({type:a,selectors:[["","minDate",""]],features:[r._Bn([{provide:i.Cf,useExisting:(0,r.Gpc)(()=>a),multi:!0}])]})},15617:function(e,t,s){"use strict";s.d(t,{j:function(){return a}});var i=s(33452),r=s(72643);class a{constructor(){}lengthInvalid(e){const t=this.unmask(e);return!!t&&t.length<this.minLengthMask}unmask(e){const t=this.allowLetters()?/[^a-zA-Z0-9]+/g:/\D+/g;return JSON.stringify(e).replace(t,"")}allowLetters(){return"string"==typeof this.minLengthMaskPattern&&(this.minLengthMaskPattern.includes("*")||this.minLengthMaskPattern.includes("a"))}validate(e){return this.lengthInvalid(e.value)?{minlength:{requiredLength:this.minLengthMask}}:null}}a.\u0275fac=function(e){return new(e||a)},a.\u0275dir=r.lG2({type:a,selectors:[["","minLengthMaskedField",""]],inputs:{minLengthMask:"minLengthMask",minLengthMaskPattern:"minLengthMaskPattern"},features:[r._Bn([{provide:i.Cf,useExisting:(0,r.Gpc)(()=>a),multi:!0}])]})},27095:function(e,t,s){"use strict";s.d(t,{I:function(){return a}});var i=s(72643),r=s(33452);class a{constructor(){}validate(e){return e.value?Number(e.value)<this.min?{minFieldValue:this.min}:Number(e.value)>this.max?{maxFieldValue:this.max}:void 0:null}}a.\u0275fac=function(e){return new(e||a)},a.\u0275dir=i.lG2({type:a,selectors:[["","minMaxDirective",""]],inputs:{max:"max",min:"min"},features:[i._Bn([{provide:r.Cf,useExisting:(0,i.Gpc)(()=>a),multi:!0}])]})},11731:function(e,t,s){"use strict";s.d(t,{v:function(){return r}});var i=s(72643);class r{constructor(e,t,s,i,r){this.ref=e,this.el=t,this.view=null,i.runOutsideAngular(()=>{this.view=s.createEmbeddedView(r)})}ngOnInit(){void 0===this.active&&(this.view.detach(),void 0!==this.interval?this._interval=setInterval(()=>{this.view.detectChanges()},this.interval):void 0!==this.delay&&(this._delay=setTimeout(()=>{this.view.detectChanges()},this.delay)))}ngOnDestroy(){this._interval?clearInterval(this._interval):this._delay&&clearTimeout(this._delay)}set active(e){this._active=e,e?this.view.detach():this.view.reattach()}}r.\u0275fac=function(e){return new(e||r)(i.Y36(i.sBO),i.Y36(i.SBq),i.Y36(i.s_b),i.Y36(i.R0b),i.Y36(i.Rgc))},r.\u0275dir=i.lG2({type:r,selectors:[["","once-binding",""]],inputs:{interval:"interval",delay:"delay"}})},1022:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var i=s(81602),r=s(66071),a=s(72643),n=s(33485),o=s(98995),c=s(34034);class l{constructor(e,t,s,i){this.ref=e,this.modalService=t,this.translateService=s,this.paymentService=i}ngOnInit(){this.modalSubscription=this.modalService.modalActionsObserver.subscribe(e=>{e.params&&void 0!==e.params[1]&&this.ref.nativeElement.id===e.params[2]&&(this.ref.nativeElement.options.selectedIndex=e.params[1],this.ref.nativeElement.dispatchEvent(new Event("change")))})}ngOnDestroy(){this.modalSubscription.unsubscribe()}onMouseDown(e){e.preventDefault()}onClick(){let e={options:[],title:null};this.ref.nativeElement.parentElement.querySelectorAll(".field-label")[0]?e.title=this.ref.nativeElement.parentElement.querySelectorAll(".field-label")[0].innerText:this.translateService.get("FIELDS.SELECT").subscribe(t=>{e.title=t}),(0,r.q)(this.ref.nativeElement.options).forEach(t=>{const s={key:t.label,value:t.value,isDisabled:t.disabled};"payment"===this.type&&(s.data=this.preparePayment(s,this.paymentService.customerDepositTypes),s.moduleContent=t.getAttribute("moduleContent"),s.moduleCode=t.getAttribute("moduleCode")),e.options.push(s)}),this.data=Object.assign(Object.assign({},e),{selectedIndex:this.ref.nativeElement.options.selectedIndex,id:this.ref.nativeElement.id});const t=new i.u_("select-modal","select-mdl",null,0,null,"select-filter-modal modal modal-fixed-header",!1,this.data);this.modalService.modalObserver.next(t)}preparePayment(e,t){const s=t.findIndex(t=>t.name===e.key);return this.paymentService.customerDepositTypes[s]}}l.\u0275fac=function(e){return new(e||l)(a.Y36(a.SBq),a.Y36(n.F),a.Y36(o.sK),a.Y36(c.s))},l.\u0275dir=a.lG2({type:l,selectors:[["","select-modal",""]],hostBindings:function(e,t){1&e&&a.NdJ("mousedown",function(e){return t.onMouseDown(e)})("click",function(){return t.onClick()})},inputs:{type:"type"}})},37121:function(e,t,s){"use strict";s.d(t,{T:function(){return c}});var i=s(97597),r=s(4576),a=s(76857),n=s(72643),o=s(86203);class c{constructor(e,t){this.el=e,this.sportBetService=t,this.isAlive$=new a.xQ,this.clearSmartCols(),setTimeout(()=>{this.orderCols()},100),this.sportBetService.columnViewChange.pipe((0,i.R)(this.isAlive$),(0,r.b)(1e3)).subscribe(e=>{this.clearSmartCols(),setTimeout(()=>{this.orderCols()},100)})}ngOnDestroy(){this.isAlive$.next()}addItemToCol(e,t){let s=t.length;for(let i of t){if(0==i.clientHeight&&0==t[s-1].clientHeight)return e.style.display="block",e.style.padding=this.margin+"px",e.className="",i.appendChild(e),!1;{let s=this.checkColHeights(t);return e.style.display="block",e.style.padding=this.margin+"px",e.className="",t[s].appendChild(e),!1}}}checkColHeights(e){let t=[],s=0;for(let i of e){if(s==e.length-1)return t.push(i.clientHeight),s=0,this.getColumnIndex(Math.min.apply(null,t),e);t.push(i.clientHeight),s++}}getColumnIndex(e,t){let s=0;for(let i of t){if(e==i.clientHeight)return s;s++}}orderCols(){const e=this.col-1,t=this.el.nativeElement;for(let a=0;a<=e;a++){const e=document.createElement("div");e.className="smart-col-item smart-col-"+this.col+" col-item-"+a,e.id="smId"+a,t.appendChild(e)}const s=t.getElementsByClassName("temp-col-item"),i=[],r=t.getElementsByClassName("smart-col-item");for(let a=0;a<=s.length-1;a++)i.push(s[a]);for(let a of i)this.addItemToCol(a,r)}clearSmartCols(){const e=this.el.nativeElement.getElementsByClassName("smart-col-item");for(let t=e.length-1;t>=0;--t)e[t].remove()}ngOnChanges(e){}}c.\u0275fac=function(e){return new(e||c)(n.Y36(n.SBq),n.Y36(o.d))},c.\u0275dir=n.lG2({type:c,selectors:[["","smart-col",""]],inputs:{col:"col",margin:"margin"},features:[n.TTD]})},32980:function(e,t,s){"use strict";s.d(t,{r:function(){return d}});var i=s(72643),r=s(99960),a=s(25288),n=s(2397),o=s(99701),c=s(41182),l=function(e,t,s,i){return new(s||(s=Promise))(function(r,a){function n(e){try{c(i.next(e))}catch(t){a(t)}}function o(e){try{c(i.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(n,o)}c((i=i.apply(e,t||[])).next())})};class d{constructor(e,t,s,i,r,a){this.trackersDataService=e,this.storageService=t,this.el=s,this.translateFactory=i,this.applicationService=r,this.traderService=a,this.trackerStatusSubs=this.trackersDataService.trackerStatus.subscribe(e=>{this.options=e,e.eventId?e.lvt&&3===e.providerId&&this.appendScriptIntoDomAndGenerate(e):this.removeWidget()})}appendScriptIntoDomAndGenerate(e){this.createTrackerContainer(e);const t=this.applicationService.settingList.find(e=>"statscore-match-tracker"===e.parameter);this.applicationService.settingList.find(e=>"statscore-prematch-url"===e.parameter);statScoreEmbeder(t.value),this.removeWidget(),this.embedWidget(e)}prepareDesktopLiveBar(e,t){e>t?this.inScroll||(this.removeWidget(),this.embedWidget(this.options,"livebar"),this.inScroll=!0):this.inScroll&&(this.removeWidget(),this.embedWidget(this.options),this.inScroll=!1)}prepareForScroll(e,t){return l(this,void 0,void 0,function*(){document.getElementById(`${this.options.eventType}-${this.options.eventId}`);const s=document.getElementById("stlvb"),i=document.getElementById("hdr-c");e>t?(this.inScroll||(yield this.removeWidget(),yield this.embedWidget(this.options,"livebar"),this.inScroll=!0),s.style.top=i.classList.contains("hd-fx")?"0px":`${i.offsetHeight}px`):this.inScroll&&(yield this.removeWidget(),yield this.embedWidget(this.options),this.inScroll=!1)})}createTrackerContainer(e){if(!document.getElementById(`${e.eventType}-${e.eventId}`)){const t=document.createElement("div");t.id=`${e.eventType}-${e.eventId}`,t.className=`${e.eventType}`,this.el.nativeElement.appendChild(t)}}embedWidget(e,t){return l(this,void 0,void 0,function*(){window.STATSCOREWidgets.onLoad(s=>{if(s){switch(s.type){case"NetworkError":console.error("NetworkError----\x3e",s);break;case"BrowserNotSupported":console.error("BrowserNotSupported----\x3e",s)}return}let i,r=document.getElementById(`${e.eventType}-${e.eventId}`);"live"===e.eventType?(i=this.traderService.trader.statscoreLivebarEnabled&&t?this.traderService.trader.liveBarConfigId:this.traderService.trader.dataConfigIdLive,this.traderService.trader.statscoreLivebarEnabled&&t&&(r=document.getElementById("stlvb"))):i=this.traderService.trader.dataConfigId;const a={eventId:e.eventId,language:this.translateFactory.currentLang.code,zone:Intl.DateTimeFormat().resolvedOptions().timeZone};this.defaultWidget=new window.STATSCOREWidgets.WidgetGroup(r,i,a,{loader:{enable:!0}}),"live"===e.eventType&&"detail"===this.options.pageType&&this.widgetOnLoad()})})}widgetOnLoad(){this.defaultWidget.on("load",()=>{const e=document.getElementById(`${this.options.eventType}-${this.options.eventId}`);e.style.height=`${e.clientHeight}px`})}removeWidget(){return l(this,void 0,void 0,function*(){this.defaultWidget&&(yield this.defaultWidget.destroy())})}scrollAvailableChecker(){return"prelive"!==this.options.eventType&&(!!this.options.lvt&&("detail"===this.options.pageType&&(!this.options.stSURL||-1!==this.trackersDataService.liveBarSupportedSportKeys.indexOf(this.options.stSURL))))}ngOnDestroy(){this.trackerStatusSubs.unsubscribe()}onWindowScroll(){if(!this.scrollAvailableChecker())return!1;const e=void 0!==window.orientation||"ontouchstart"in window||navigator.msMaxTouchPoints;if("m"===this.storageService.local.get("device")||e){const e=document.getElementById("fxtr-dtl-cntnt").offsetHeight;if(!e)return;this.options.isLiveBar&&this.prepareForScroll(window.scrollY,e)}else{const e=document.getElementById("lvfd-mt").offsetHeight+150;this.options.isLiveBar&&this.prepareDesktopLiveBar(window.scrollY,e)}}}d.\u0275fac=function(e){return new(e||d)(i.Y36(r.O),i.Y36(a.S),i.Y36(i.SBq),i.Y36(n.c),i.Y36(o.W),i.Y36(c._))},d.\u0275dir=i.lG2({type:d,selectors:[["","libStatScoreTracker",""]],hostBindings:function(e,t){1&e&&i.NdJ("scroll",function(e){return t.onWindowScroll(e)},!1,i.Jf7)}})},12257:function(e,t,s){"use strict";s.d(t,{_:function(){return a}});var i=s(33452),r=s(72643);class a{constructor(e){this.tcknValid=e}tcknValidation(e){e=e.toString();for(var t=/^[0-9]{11}$/.test(e),s=0,i=0;i<10;i++)s+=Number(e.substr(i,1));var r=s%10==e.substr(10,1),a=0,n=0;for(i=0;i<10;i+=2)a+=Number(e.substr(i,1));for(i=1;i<10;i+=2)n+=Number(e.substr(i,1));var o=(7*a-n)%10==e.substr(9,0);return t&&r&&o}validate(e){return e.value.length<11?{minlength:{requiredLength:11}}:this.tcknValidation(e.value)?null:{tckknInvalid:!this.tcknValidation(e.value)}}onKeyDown(e){let t=e;-1!==[46,8,9,27,13,110,190].indexOf(t.keyCode)||65===t.keyCode&&(t.ctrlKey||t.metaKey)||67===t.keyCode&&(t.ctrlKey||t.metaKey)||86===t.keyCode&&(t.ctrlKey||t.metaKey)||88===t.keyCode&&(t.ctrlKey||t.metaKey)||t.keyCode>=35&&t.keyCode<=39||(t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault()}}a.\u0275fac=function(e){return new(e||a)(r.$8M("tcknValid"))},a.\u0275dir=r.lG2({type:a,selectors:[["","tckn-validator",""]],hostBindings:function(e,t){1&e&&r.NdJ("keydown",function(e){return t.onKeyDown(e)})},inputs:{tckn:["tckn-validator","tckn"]},features:[r._Bn([{provide:i.Cf,useExisting:(0,r.Gpc)(()=>a),multi:!0}])]})},97312:function(e,t,s){"use strict";s.d(t,{R:function(){return a}});var i=s(72643),r=s(33452);class a{validate(e){const t=e.value;if(!t)return{invalidTime:!0};const s=Number(t.split(":")[0]),i=Number(t.split(":")[1]);return isNaN(s)||isNaN(i)||s>24||i>60?{invalidTime:!0}:null}}a.\u0275fac=function(e){return new(e||a)},a.\u0275dir=i.lG2({type:a,selectors:[["","timeValidator",""]],features:[i._Bn([{provide:r.Cf,useExisting:(0,i.Gpc)(()=>a),multi:!0}])]})},8058:function(e,t,s){"use strict";s.d(t,{J:function(){return r}});var i=s(72643);class r{transform(e){let t="";return e&&(t=e.split("-").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join(" ")),t}}r.\u0275fac=function(e){return new(e||r)},r.\u0275pipe=i.Yjl({name:"codeToTitle",type:r,pure:!0}),r.\u0275prov=i.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})},67220:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var i=s(72643),r=s(41182);class a{constructor(e){this.traderService=e,this.currencyList=[]}transform(e){let t="";return this.currencyList=this.traderService.currencyList,this.currencyList.forEach(s=>{s.currencyId===e&&(t=s.currencySymbol)}),t}}a.\u0275fac=function(e){return new(e||a)(i.Y36(r._,16))},a.\u0275pipe=i.Yjl({name:"currencyId",type:a,pure:!0})},71546:function(e,t,s){"use strict";s.d(t,{O:function(){return a}});var i=s(16617),r=s(72643);class a{constructor(){}transform(e,t,s){return i.N.trader.removeCurrencySymbol&&(t=""),"\xa3"===t||"R$"===t||"ZMW"===t?s?'<span class="'+s+'"> '+t+"</span>"+e:t+" "+e:s?e+'<span class="'+s+'"> '+t+"</span>":e+" "+t}}a.\u0275fac=function(e){return new(e||a)},a.\u0275pipe=r.Yjl({name:"csSide",type:a,pure:!0})},35387:function(e,t,s){"use strict";s.d(t,{j:function(){return o}});var i=s(55150),r=s(41879),a=s(41066),n=s(72643);class o{transform(e){return(0,i.FG)(1e3).pipe((0,r.U)(()=>this.getTime(e)))}getTime(e){let t=Date.now()-e,s=Math.floor(t%36e5/6e4),i=Math.floor(t%6e4/1e3);return(0,a.B)(s)+":"+(0,a.B)(i)}}o.\u0275fac=function(e){return new(e||o)},o.\u0275pipe=n.Yjl({name:"durationTimer",type:o,pure:!0})},95671:function(e,t,s){"use strict";s.d(t,{o:function(){return r}});var i=s(72643);class r{transform(e,t,s=!0){const i=Math.floor(e*Math.pow(10,t))/Math.pow(10,t);return s?i.toLocaleString():i}}r.\u0275fac=function(e){return new(e||r)},r.\u0275pipe=i.Yjl({name:"floor",type:r,pure:!0}),r.\u0275prov=i.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})},66856:function(e,t,s){"use strict";s.d(t,{y:function(){return r}});var i=s(72643);class r{transform(e,t){return["TEXTS","MESSAGES","LINKS","LABELS"].includes(e.split(".")[0])?null:e}}r.\u0275fac=function(e){return new(e||r)},r.\u0275pipe=i.Yjl({name:"hide-missingTranslate",type:r,pure:!0})},78399:function(e,t,s){"use strict";s.d(t,{M:function(){return a}});var i=s(55150),r=s(72643);class a{transform(e){return new i.y$(t=>{setInterval(()=>{e-Date.now()<0?(t.next(!0),t.complete()):t.next(!1)},1e3)})}}a.\u0275fac=function(e){return new(e||a)},a.\u0275pipe=r.Yjl({name:"isDateInPast",type:a,pure:!0})},38506:function(e,t,s){"use strict";s.d(t,{z:function(){return a}});var i=s(72643),r=s(96842);class a{constructor(e){this.oddFormatService=e}transform(e){return this.oddFormatService.formatter(e)}}a.\u0275fac=function(e){return new(e||a)(i.Y36(r.W,16))},a.\u0275pipe=i.Yjl({name:"oF",type:a,pure:!0}),a.\u0275prov=i.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})},27860:function(e,t,s){"use strict";s.d(t,{z:function(){return a}});var i=s(72643),r=s(60664);class a{constructor(e){this.sanitizer=e}transform(e){return this.sanitizer.bypassSecurityTrustHtml(e)}}a.\u0275fac=function(e){return new(e||a)(i.Y36(r.H7,16))},a.\u0275pipe=i.Yjl({name:"safeHtml",type:a,pure:!0})},82285:function(e,t,s){"use strict";s.d(t,{g:function(){return r}});var i=s(72643);class r{transform(e){const t=e.split("/");return t[0]=t[0].substring(0,1)+t[0].substring(1,2).replace(/\w/g,"*"),t[1]=t[1].substring(0,1)+t[1].substring(1,2).replace(/\w/g,"*"),t[2]=t[2].substring(0,2)+t[2].substring(2,4).replace(/\w/g,"*"),e=t[0]+"/"+t[1]+"/"+t[2]}}r.\u0275fac=function(e){return new(e||r)},r.\u0275pipe=i.Yjl({name:"secretDate",type:r,pure:!0}),r.\u0275prov=i.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})},90743:function(e,t,s){"use strict";s.d(t,{u:function(){return r}});var i=s(72643);class r{transform(e,t){return t||(t=3),e.substring(0,t)+e.substring(t,e.length).replace(/\w/g,"*")}}r.\u0275fac=function(e){return new(e||r)},r.\u0275pipe=i.Yjl({name:"secret",type:r,pure:!0}),r.\u0275prov=i.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})},49975:function(e,t,s){"use strict";s.d(t,{S:function(){return a}});var i=s(72643),r=s(98995);class a{constructor(e){this.translateService=e}transform(e){return this.translateService.get("TEXTS."+{R:"CANCELED",C:"COMPLETED",P:"PENDING",Z:"REZERVED",V:"VALID",N:"NEW"}[e])}}a.\u0275fac=function(e){return new(e||a)(i.Y36(r.sK,16))},a.\u0275pipe=i.Yjl({name:"statusCodeTranslate",type:a,pure:!0})},20605:function(e,t,s){"use strict";s.d(t,{p:function(){return r}});var i=s(72643);class r{transform(e){return e.replace(/<.*?>/g,"")}}r.\u0275fac=function(e){return new(e||r)},r.\u0275pipe=i.Yjl({name:"stripHtml",type:r,pure:!0})},49854:function(e,t,s){"use strict";s.d(t,{s:function(){return n}});var i=s(55150),r=s(41066),a=s(72643);class n{transform(e,t){return new i.y$(s=>{this.getRemainingTime(e,t,s),setInterval(()=>{this.getRemainingTime(e,t,s)},1e3)})}getRemainingTime(e,t,s){let i=e-Date.now();i<0&&(s.next("00"),s.complete());let a,n=Math.floor(i/864e5),o=Math.floor(i%864e5/36e5),c=Math.floor(i%36e5/6e4),l=Math.floor(i%6e4/1e3),d=(0,r.B)(n),u=(0,r.B)(o),h=(0,r.B)(c),m=(0,r.B)(l);"day"===t?a=d:"hour"===t?a=u:"min"===t?a=h:"sec"===t&&(a=m),s.next(a)}}n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=a.Yjl({name:"timeCounter",type:n,pure:!0})},59859:function(e,t,s){"use strict";s.d(t,{B:function(){return r}});var i=s(72643);class r{transform(e){let t="";return e&&(t=e.replace(/-/g,"_").toUpperCase()),t}}r.\u0275fac=function(e){return new(e||r)},r.\u0275pipe=i.Yjl({name:"translateKeyStructure",type:r,pure:!0}),r.\u0275prov=i.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})},85712:function(e,t,s){"use strict";s.d(t,{cE:function(){return i},aX:function(){return r},_R:function(){return a},aY:function(){return n}});const i={cfc:"category",cfl:"league",cfcmp:"competitor",cfcsn:"game"},r={numeric:"^[0-9]+$",numericWithSpace:"^[0-9 ]+$",string:"^[A-Za-z_ ]+$",allLettersString:"^[a-zA-Z\xc0-\xff\u0130\u0131\xd6\xf6\xdc\xfc\xc7\xe7\u011e\u011f\u015e\u015f]*$",allLettersStringWithSpace:"^[a-zA-Z\xc0-\xff\u0130\u0131\xd6\xf6\xdc\xfc\xc7\xe7\u011e\u011f\u015e\u015f ]*$",turkishString:"^[\u0130\u0131\xd6\xf6\xdc\xfc\xc7\xe7\u011e\u011f\u015e\u015fAA-Za-z_ ]+$",spaceRestricted:"^\\S*$",onlyCharDigitWithNotInSpace:"^[a-zA-Z0-9]*$",surname:"^[A-Za-z\xc0-\xff\u0130\u0131\xd6\xf6\xdc\xfc\xc7\xe7\u011e\u011f\u015e\u015f]*$",email:'^\\s*(([^<>()\\[\\]\\\\,`~;:$%^*#\u2116\\s@"]{2,})|(".+"))@(([a-zA-Z0-9^(-?)]+\\.)+[a-zA-Z]{2,})\\s*$',time:"([0-1][0-9]|[2][0-3]):([0-5][0-9])",lettersAndDigits:"^[0-9A-Za-z_ ]+$",date:"^(0[1-9]|[12][0-9]|3[01])[-/.](0[1-9]|1[012])[-/.](202[0-9])",validDate:"^(3[01]|[12][0-9]|0?[1-9])/(1[0-2]|0?[1-9])/(?:[0-9]{2})?[0-9]{2}$",cardNumber:"/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/",airtelMtnPhone:"^.{3}(70|74|75|76|78|77|39).*",uppercase:"^[A-Z_ ]+$",uppercaseWithDigits:"^[A-Z0-9_ ]+$",mexicanTaxNumber:"^([A-Za-z]{4})([0-9]{6})([0-9A-Za-z]{3})",portugalTaxNumber:"^(PT)?[0-9]{9}$",brazilianPhoneNumber:"^\\+55[0-9]{11}$",paycellNumber:"^5[0-9]{10}$",brazilianCPF:"[0-9]{3}\\.[0-9]{3}\\.[0-9]{3}-[0-9]{2}",brazilianCPFLoginPattern:/[0-9]{3}\.[0-9]{3},[0-9]{3}-[0-9]{2}|[0-9]{11}/gim,brazilianCNPJ:"[0-9]{2}\\.[0-9]{3}\\.[0-9]{3}/[0-9]{4}-[0-9]{2}",lettersNumbersWithDash:"^[0-9A-Za-z_-]+$"},a={trIban:"TR000000000000000000000000",svIban:"SV00aaaaa00000000000000000000",oldTRIban:"TR00000000****************",cardNumber:"0000-0000-0000-0000",cardNumberWithSpace:"0000 0000 0000 0000",uppercase:"[A-Z]",date:"00/00/0000",dateWithDash:"00-00-0000",brazilianPhoneNumber:"+{55}00000000000",brazilianCPF:"000.000.000-00",brazilianCNPJ:"00.000.000/0000-00"},n={GENERAL:["ODD_CANCELLED","EVENT_ABORT","EVENT_STARTED","TRADER_FIXTURE_ODD_INVALID","CRITICAL_POSITION","ODD_NOT_FOUND","EVENT_SUSPENDED","MTS_STAKE_TOO_HIGH","MTS_CUSTOMER_LIABILITY_EXCEEDED","MTS_REJECTED","MTS_MULTIBET_BONUS_FOUND","MTS_ODDS_TOO_HIGH","MTS_INTERNAL_EXCEPTION","MTS_STAKE_TOO_LOW","MTS_MARKET_EXPIRED","MTS_TICKET_NOT_FOUND","MTS_INCONSISTENT_TICKET_BOOKMAKER_CODE","MTS_TICKET_CONTAINS_LIVE_SELECTIONS","MTS_TICKET_CANCELLATION_EXPIRED","MTS_PREMATCH_SELECTION","MTS_OPTION_NOT_ACTIVE","MTS_TICKET_ALREADY_SETTLED","MTS_TICKET_ALREADY_CANCELLED","MTS_SELECTION_AMOUNT_TOO_HIGH","MTS_ODDS_TOO_LOW","MTS_MARKET_CANNOT_BE_COMBINED_WITH_EVENT_IN_SAME_TOURNAMENT","MTS_SAME_MARKET_SAME_EVENT","MTS_SAME_EVENT_DIFFERENT_MARKET","MTS_CORRELATED_TOURNAMENTS","MTS_WRONG_NUMBER_OF_COMBINATIONS","MTS_TICKET_EXCEEDS_MAXIMUM_COMBINATIONS","MTS_NO_OUTCOME_AVAILABLE","MTS_MARKET_REMOVED","MTS_OUTRIGHT_REMOVED","MTS_ODDS_NOT_FOUND","MTS_MARKET_UNAVAILABLE","MTS_BOOKMAKER_NOT_ACTIVE","MTS_BOOKMAKER_SETTINGS_NOT_FOUND","MTS_TOURNAMENT_UNAVAILABLE","MTS_MAX_PAYOUT_LIMIT_EXCEEDED","MTS_MATCH_NOT_ACTIVE","MTS_TIME_OUT_ERROR"],FIXTURE_GENERAL:["TRADER_FIXTURE_FROZEN"],BET_CLOSED:["PRELIVE_BET_CLOSED","LIVE_BET_CLOSED","VIRTUAL_BET_CLOSED","VIRTUAL_FOOTBALL_CLOSED","VIRTUAL_TENNIS_CLOSED","VIRTUAL_BASKETBALL_CLOSED","VIRTUAL_EUROCUP_CLOSED","VIRTUAL_DOG_CLOSED","VIRTUAL_HORSE_CLOSED","VIRTUAL_CHAMPIONS_CUP_CLOSED","VIRTUAL_ASIAN_CUP_CLOSED","VIRTUAL_FOOTBALL_LEAGUE_MODE_CLOSED"],ODD_CHANGED:["ODD_CHANGED"],FIXTURE_RETURN_LIMIT:["FIXTURE_RETURN_LIMIT_ERROR"],PLAY_LIMIT:["FIXTURE_ODD_PLAY_LIMIT_ERROR","FIXTURE_PLAY_LIMIT_ERROR"],ODD_RETURN_LIMIT:["FIXTURE_ODD_RETURN_LIMIT_ERROR"]}},99701:function(e,t,s){"use strict";s.d(t,{W:function(){return l}});var i=s(16617),r=s(27795),a=s(41879),n=s(72643),o=s(92221),c=s(73386);class l{constructor(e,t){this.http=e,this.errHandler=t,this.settings$=new r.t,this.appSettings$=new r.t}getApplicationParameters(){return new Promise((e,t)=>{this.http.get(`${i.N.apiEndpoint}/api/generic/getApplicationParameters/${window.location.host}/w`).subscribe(t=>{t.success?(this._settings=t.data,this.setAppParams(t.data),this.appSettings$.next(this._settings),e(this.settingList)):e(t)},e=>{console.log("error------\x3egetApplicationParameters",e),t(this.errHandler.handle(e.error||""))})})}getAppSettingsParametersValues(e){return this.appSettings$.pipe((0,a.U)(t=>{const s={};return e.forEach(e=>s[e]=t.find(t=>t.parameter===e).value),s}))}setAppParams(e){this._settings=e}get settingList(){return this._settings}}l.\u0275fac=function(e){return new(e||l)(n.LFG(o.eN),n.LFG(c.t))},l.\u0275prov=n.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})},90137:function(e,t,s){"use strict";s.d(t,{e:function(){return l}});var i=s(76857),r=s(72643),a=s(92221),n=s(73386),o=s(41182),c=s(25288);class l{constructor(e,t,s,r){this.http=e,this.handler=t,this.traderService=s,this.storage=r,this._selectedFixtureView="eur",this._isAsianView=!1,this.activeAsianViewSubject=new i.xQ,this.getActivatedAsianView()}activeAsianViewObserver(){return this.activeAsianViewSubject.asObservable()}get isAsianView(){return this._isAsianView}getActivatedAsianView(){return this.traderService.trader.asianView,this.storage.local.get("selectedFixtureView")?this._selectedFixtureView=this.storage.local.get("selectedFixtureView"):this.traderService.trader.defaultViewType&&2===this.traderService.trader.defaultViewType&&(this._selectedFixtureView="asian"),this.activeAsianViewSubject.next(this._selectedFixtureView),"asian"===this._selectedFixtureView&&(this._isAsianView=!0),this._selectedFixtureView}setActiveFixtureView(e){this.storage.local.set("selectedFixtureView",e),this.activeAsianViewSubject.next(e),location.reload()}}l.\u0275fac=function(e){return new(e||l)(r.LFG(a.eN),r.LFG(n.t),r.LFG(o._),r.LFG(c.S))},l.\u0275prov=r.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})},92097:function(e,t,s){"use strict";s.d(t,{Y:function(){return m}});var i=s(83762),r=s(6284),a=s(88166),n=s(30321),o=s(76857),c=s(72643),l=s(25288),d=s(41182),u=s(56497),h=s(96842);class m{constructor(e,t,s,i){this.storageService=e,this.traderService=t,this.scriptLoader=s,this.oddFormat=i,this._betBoosterActiveSelection=new o.xQ,this.betBoosterActiveSelection$=this._betBoosterActiveSelection.asObservable()}prepareBetBoosterJson(e){const t=(0,i.Z)(e);try{const e=[];let s;const i={};if(!t[0].cs[0].sns[0].fs[0].vld||t[0].cs[0].sns[0].fs[0].frz)throw`Betbooster fixture freeze:${t[0].cs[0].sns[0].fs[0].frz} or not valid:${t[0].cs[0].sns[0].fs[0].vld}`;t[0].cs[0].sns[0].fs[0].btgs.forEach((t,a)=>{if(t.fos=t.fos.filter(e=>e.valid&&e.tvalid&&!e.freeze),t.fos.length&&t.lineItem){t.fos.find(e=>e.lineItem)?(i[t.btgId]=t.fos.map((e,t)=>e.sv),i[t.btgId]=(0,r.Z)(i[t.btgId])):(s=t.fos.filter((e,t)=>e).map((e,t)=>({id:e.foId,name:e.hSh,odds:e.hO,displayOdds:this.oddFormat.formatter(e.hO),isSelected:0===t})),e.push({id:t.btgId,name:t.btgN,bets:s}))}});for(const r in i)t[0].cs[0].sns[0].fs[0].btgs.forEach((e,t)=>{e.btgId===Number(r)&&(e.line=i[r])});const n=[];return t[0].cs[0].sns[0].fs[0].btgs.forEach((e,t)=>{if(e.lineItem){e.fos.find(e=>e.lineItem)&&e.line.forEach(t=>{e.fos.forEach((s,i)=>{if(s.sv===t){const i=(0,a.Z)(n,{line:t,id:e.btgId});i?i.bets.push({id:s.foId,name:s.hSh,odds:s.hO,displayOdds:this.oddFormat.formatter(s.hO),isSelected:!1}):n.push({id:e.btgId,name:e.btgN,line:t,bets:[{id:s.foId,name:s.hSh,odds:s.hO,displayOdds:this.oddFormat.formatter(s.hO),isSelected:!0}]})}})})}}),e.concat(n)}catch(s){console.warn("exception--------\x3eprepareBetBoosterJson",s)}}prepareBetBoosterActiveSelections(e){try{const t=this.storageService.local.get("selectedOdds");if(t){const s=t.filter(t=>t.fId===e[0].cs[0].sns[0].fs[0].fId).map(e=>e.foId);e[0].cs[0].sns[0].fs[0].betBoosterActiveSelections=JSON.stringify(s)}else e[0].cs[0].sns[0].fs[0].betBoosterActiveSelections=JSON.stringify([])}catch(t){console.log("prepareBetBoosterActiveSelections----------\x3e",t)}}betBoosterActiveSelectionIterator(e,t){return new Promise((s,i)=>{const r=Object.assign({},e);let a=JSON.parse(r.betBoosterActiveSelections);const o=t.odd;try{o?t.remove&&a.indexOf(o[0].foId)>-1?(0,n.Z)(a,e=>e===o[0].foId):t.add&&-1===a.indexOf(o.foId)&&a.push(o.foId):a=[],s(JSON.stringify(a))}catch(c){console.warn("betBoosterActiveSelectionIterator----------\x3e",c),i(c)}})}loadBetBoostScript(){this.traderService.trader.betBoosterEnabled&&this.scriptLoader.loadScript("betBooster",null,this.traderService.trader.betBoosterApiUrl).then(e=>{}).catch(e=>{console.warn("betBoosterApiUrl----\x3e",e)})}addDeleteUpdateBetBoosterBetMarketObj(e,t,s){try{const i=Object.assign([],this.defaultFullLiveEventDetail[0].cs[0].sns[0].fs[0].betBoosterJSON);switch(e){case"change-odd":s&&s.lineItem&&i.forEach(e=>{if(e.id===s.btgId){const s=e.bets.map(e=>(e.id===t.foId&&(e.displayOdds=this.oddFormat.formatter(t.hO),e.odds=t.hO),e));e.bets=s}});break;case"remove-bet-type-group":s&&i.forEach(e=>{(0,n.Z)(e,{id:s.btgId})});break;case"remove-fixture-odd":s&&s.lineItem&&i.forEach(e=>{if(e.id===t.btgId){const s=(0,n.Z)(e.bets,{id:t.foId});console.log("_bets   remove-fixture-odd-------\x3e",s),e.bets=s}});break;case"add-fixture-odd":s.lineItem&&i.forEach(e=>{e.id===s.btgId&&(t.fo.lineItem&&(t.fo.sv,e.line),e.bets.push({id:t.fo.foId,name:t.fo.hSh,odds:t.fo.hO,displayOdds:this.oddFormat.formatter(t.fo.hO),isSelected:!0}))})}this.defaultFullLiveEventDetail[0].cs[0].sns[0].fs[0].betBoosterJSON=i}catch(i){console.warn("prepareBetBoosterBetMarketObj----\x3e",i)}}get betBoosterActiveSelection(){return this.betBoosterActiveSelection$}get defaultFullLiveEventDetail(){return this._defaultFullLiveEventDetail}set defaultFullLiveEventDetail(e){this._defaultFullLiveEventDetail=e}get defaultFullPreMatchEventDetail(){return this._defaultFullPreMatchEventDetail}set defaultFullPreMatchEventDetail(e){this._defaultFullPreMatchEventDetail=e}}m.\u0275fac=function(e){return new(e||m)(c.LFG(l.S),c.LFG(d._),c.LFG(u.$),c.LFG(h.W))},m.\u0275prov=c.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"})},60131:function(e,t,s){"use strict";s.d(t,{V:function(){return V}});var i=s(10338),r=s(3191),a=s(97597),n=s(81602),o=s(16617),c=s(65958),l=s(33452),d=s(89166),u=s(30321),h=s(88166),m=s(12447),p=s(41909),g=s(57365),b=s(63561),v=s(36622),f=s(9145),y=s(27098),S=s(92717),E=s(70187),T=s(85712),A=s(72643),I=s(2397),B=s(92221),O=s(52899),M=s(98995),w=s(41182),_=s(25288),P=s(55209),L=s(38506),N=s(41189),x=s(25961),C=s(7035),k=s(88428),F=s(68346),R=s(33485),D=s(98250),G=s(88634),U=s(11056),$=s(69271),W=function(e,t,s,i){return new(s||(s=Promise))(function(r,a){function n(e){try{c(i.next(e))}catch(t){a(t)}}function o(e){try{c(i.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(n,o)}c((i=i.apply(e,t||[])).next())})};class V{constructor(e,t,s,r,a,n,o,l,u,h,m,p,g,b,v,f,y,S,E){this.translateFactory=e,this.http=t,this.rootService=s,this.translate=r,this.traderService=a,this.storageService=n,this.userService=o,this.oddFormatPipe=l,this.toastFactory=u,this.promotionsService=h,this.decimalPipe=m,this.staticContentService=p,this.promotionAvabilitiy=g,this.modalService=b,this.trackingService=v,this.datePipe=f,this.customNumpadService=y,this.iframeMessagesService=S,this.cookieService=E,this._selectedOddCount=new d.Subject,this._oddRemoved=new d.Subject,this._amountActions=new d.Subject,this._acceptChangedForSingle=new d.Subject,this._slipSideNavAction=new d.Subject,this._readyCouponAmount=new d.Subject,this._rulesWorked=new d.Subject,this._betPlaced=new d.Subject,this.selectedOddCount$=this._selectedOddCount.asObservable(),this.oddRemoved$=this._oddRemoved.asObservable(),this.amountActions$=this._amountActions.asObservable(),this.acceptChangedForSingle$=this._acceptChangedForSingle.asObservable(),this.readyCouponAmount$=this._readyCouponAmount.asObservable(),this.slipSideNavAction$=this._slipSideNavAction.asObservable(),this.rulesWorked$=this._rulesWorked.asObservable(),this.betPlaced$=this._betPlaced.asObservable(),this.selectedOdds=this.storageService.local.get("selectedOdds")||[],this.customBetOdds={betBuilderOdd:this.storageService.local.get("selectedOdds")||[],betradarBetBuilderOdd:this.storageService.local.get("selectedOdds")||[]},this._ipSlip={ip:0,ar:Number(this.storageService.session.get("ar"))||0,ad:Number(this.storageService.session.get("ad"))||0,fb:0,bo:0,sbm:0,cps:[]},this.getAmountsUnsubscribe=new d.Subject,this._errorGroups=T.aY,this._bankerList={},this._bookResult={bookingExpireDate:null,bookingRef:null,title:null},this._errors={notEnaughBalance:!1,playError:"",systemSMPA:!1,singleSMPA:!1,maxBetError:null,winAmountSMPAError:!1,multiMaxPay:null,singleMaxPay:null,systemMaxPay:null,limitErrors:new Map},this._view="single",this._userView="betSlip",this.oddChanges$=new d.Subject,this.hasPromotions=!1,this.promotionHasFrozen=!1,this._freeBets=[],this._bonuses=[],this._playErrorList={},this._textsTranslates={},this._validAnte=!0,this._validScbb=!0,this._validVirtual=!0,this._systemModels={sysUpPossibleWinAmounts:{},sysPossibleWinAmounts:{}},this._maximumPayOutError={single:{active:!1,newPossibleAmount:null,odd:null},multi:{active:!1,newPossibleAmount:null,odd:null},system:{active:!1,newPossibleAmount:null,odd:null}},this._slip=null,this._betSlipBody={ip:0,ar:Number(this.storageService.session.get("ar"))||0,ad:Number(this.storageService.session.get("ad"))||0,fb:0,bo:0,sbm:0,cps:[]},this._amounts={cost:0,possibleAmount:0,multibet:0,multiRate:0,system:0,systemCost:0,systemWin:0,appToAll:0,allSingle:0,multiBetBonusAmount:0,instantPlayAmount:0,amountToWin:0,multibetBonusRate:0,stakeTaxRate:0,stakeTaxAmount:0,effectivePlayedAmount:0,taxAmount:0,maxCouponWin:0},this.activeOddCount=this.selectedOdds.filter(e=>e.active).length,this.playErrors$=new c.y(e=>{this._playErrors=e}).pipe((0,i.B)()),this.selectedOdds.forEach(e=>{this.rootService.activeBetButtons[`${e.ref}`]=!0}),this.selectedOdds&&this.selectedOdds.length&&(this.activeOddCount=this.selectedOdds.filter(e=>e.active).length),this.setTranslates(),this.betSlipTimeHandler(),this.iframeMessagesService.sendBetItem(this.selectedOdds)}bodyIteratorForSlipHandler(e){if(e&&!document.getElementById("btslpSld").classList.contains("opened"))return;const t=o.N.trader.IsIframe?0:document.getElementsByTagName("header")[0].offsetHeight;document.getElementById("btslpSld").classList.contains("opened")?(document.getElementById("btslpSld").classList.remove("opened"),document.getElementsByTagName("body")[0].style.overflow="visible",document.getElementById("btslpSld").style.top="100%"):(document.getElementById("btslpSld").classList.add("opened"),document.getElementById("btslpSld").style.top=`${t}px`,document.getElementsByTagName("body")[0].style.overflow="hidden",document.getElementById("btslpSld").style.height=`calc(100% - ${t}px)`),this.customNumpadService._cNumPadAmountChanged.next({action:"typeChaged",amount:0,playType:this.view,decimalAmount:0,fromAlreadyAmount:!1})}checkAntepost(){const e=this.selectedOdds.filter(e=>e.ante&&e.active),t=this.selectedOdds.filter(e=>!e.ante&&e.active);this._validAnte=!(e.length&&(t.length>e.length||t.length===e.length))}checkBetBuilder(){const e=this.selectedOdds.filter(e=>e.isBetBuilder&&e.active),t=this.selectedOdds.filter(e=>!e.isBetBuilder&&e.active);this._validScbb=!this.traderService.trader.betbuilderEnabled||!(e.length&&t.length)}checkVirtual(){const e=this.selectedOdds.filter(e=>e.isVirtual&&e.active),t=this.selectedOdds.filter(e=>!e.isVirtual&&e.active);this._validVirtual=!(e.length&&(t.length>e.length||t.length===e.length))}clearOdds(e=!0){this.selectedOdds=[],this.rootService.activeBetButtons={},this.setSession(),this.hasPromotions=!1,this.oddChanges$&&(this.oddChanges$.next({remove:!0}),this._selectedOddCount.next(this.selectedOdds.length)),e&&this.clearBooking()}toggleOdd(e,t,s,i,r,a){const n=this.setOdd(e,t,s,a),o=this.selectedOdds.find(e=>e.foId===n.foId);if(o)o.selection!==n.selection&&this.addOdd(n,i,r),this.removeOdd(o.foId,o.selection);else if(this.addOdd(n,i,r),"m"===this.storageService.local.get("device")&&document.getElementById("bslpb")&&!document.getElementById("bslpb").classList.contains("animated")){const e=["animated","bounce"];document.getElementById("bslpb").classList.add(...e),setTimeout(()=>{document.getElementById("bslpb").classList.remove(...e)},500)}this.setSession(),this.checkAntepost(),this.checkBetBuilder(),this.checkVirtual(),this.activeOddCount=this.selectedOdds.filter(e=>e.active).length}addOdd(e,t,s){const i=this.traderService.trader?this.traderService.trader.NumBetSlip:18;this.selectedOdds.length<i?(this.rootService.activeBetButtons[`${e.foId}-${e.selection}`]=!0,this.selectedOdds.push(e),this.trackingService.addOdd(e),this.setSession(),this.oddChanges$.next({add:!0,odd:e}),this.iframeMessagesService.addOdd(e),this._selectedOddCount.next(this.selectedOdds.length)):this.translate.get("MESSAGES.MAXIMUM_BET_LIMIT_MESSAGES",{param0:this.traderService.trader.NumBetSlip||18}).subscribe(e=>{o.N.trader.IsIframe?this.iframeMessagesService.showSnackbar(e,"error"):this.toastFactory.error(e)})}removeOdd(e,t){const s=this.selectedOdds.find(t=>t.foId===e);if(s){delete this.rootService.activeBetButtons[`${s.foId}-${s.selection}`];const i=(0,u.Z)(this.selectedOdds,{foId:e,selection:t});this.trackingService.removeOdd(e,t),this.iframeMessagesService.removeOdd(i),this.setSession(),this.oddChanges$.next({remove:!0,odd:i}),this._oddRemoved.next(),this._selectedOddCount.next(this.selectedOdds.length),this.clearBooking()}}setNormalOdd(e,t,s,i,r,a,n,o,c,l){return{foId:t.foId,ref:`${t.foId}-${l}`,selection:l,selectionName:t.hSh,odd:t.hO,playedOdd:t.hO,banker:!1,mmp:e.mmp,fId:e.fId,mCod:e.mCod,afed:e.afed,ante:e.ante,btgN:s.btgN,btgId:s.btgId,stId:i.stId||e.stId,cId:r.cId,cN:r.cN,sId:a.sId,seaN:a.seaN,lId:a.lId||e.lId,lbO:e.lbO,lSt:e.lSt,fsd:e.fsd,hcN:e.hcN,acN:e.acN,hcId:e.hcId,acId:e.acId,amount:0,active:!0,valid:!0,isVirtual:n,isPreLive:o,isLive:c}}setCustomBetOdd(e,t,s,i,r,a,n,o,c,l){const d=!!this.traderService.trader.betradarBetbuilderEnabled;return{foId:e.foId,ref:`${e.foId}-${t}`,selection:t,selectionName:d?e.selectionName:e.description,odd:e.odd,playedOdd:e.odd,banker:!1,mmp:s.mmp,fId:s.fId,mCod:s.mCod,afed:s.afed,ante:s.ante,btgN:d?e.btgN:null,btgId:e.btgId,stId:n.stId||s.stId,cId:r.cId,cN:r.cN,sId:i.sId,seaN:i.seaN,lId:i.lId||s.lId,lbO:s.lbO,lSt:s.lSt,fsd:s.fsd,hcN:s.hcN,acN:s.acN,hcId:s.hcId,acId:s.acId,amount:0,active:!0,valid:e.valid,isVirtual:l,isPreLive:o,isLive:c,isBetBuilder:!0,betradarCustomBetSelections:e.betradarCustomBetSelections,legs:e.legs}}setOdd(e,{type:t,cI:s,sI:i,fI:r,bI:a,oI:n,sl:o,isVirtual:c,isPreLive:l,isLive:d},u=null,h){const m=e.cs[s];u||(u=e.cs[s].sns[i]);const p=!(!h||!h.foId);let g;const b=u.fs[r],v=b.btgs[a],f=v.fos[n];return g=p?this.setCustomBetOdd(h,o,b,u,m,v,e,l,d,c):this.setNormalOdd(b,f,v,e,m,u,c,l,d,o),this.translate.get(`TEXTS.${t}`).subscribe(e=>{g.type=e}),g}prepareBetradarCustomBetCouponData(e,t,s,i,r){try{this.customBetOdds.betradarBetBuilderOdd=[{fId:r.fId,hcN:r.hcN,acN:r.acN,foId:i.foId,fsd:r.fsd,valid:i.valid,odd:i.odd,type:i.type,betradarCustomBetSelections:i.selections}],this.toggleOdd(e,s,t,null,null,this.customBetOdds.betradarBetBuilderOdd[0])}catch(a){throw(null==a?void 0:a.message)||(null==a?void 0:a.error)}}prepareSportCastCustomBetCouponData(e,t,s,i,r){try{this.customBetOdds.betBuilderOdd=[{fId:r,sBFId:i.fId,hcN:i.hcN,acN:i.acN,legs:i.legs,foId:i.foId,fsd:i.fsd,valid:i.valid,odd:i.odd,description:i.description,marketId:i.marketId,isBetBuilder:!0,btgId:i.betTypeGroupId}],this.toggleOdd(e,s,t,null,null,this.customBetOdds.betBuilderOdd[0])}catch(a){throw(null==a?void 0:a.message)||(null==a?void 0:a.error)}}k_combinations(e,t){let s,i,r,a,n;if(t>e.length||t<=0)return[];if(t===e.length)return[e];if(1===t){for(r=[],s=0;s<e.length;s++)r.push([e[s]]);return r}for(r=[],s=0;s<e.length-t+1;s++)for(a=e.slice(s,s+1),n=this.k_combinations(e.slice(s+1),t-1),i=0;i<n.length;i++)r.push(a.concat(n[i]));return r}calculateMaximumPayoutAmount(){return new Promise((e,t)=>{if(this.userService.user&&this.userService.user.username)if(this.traderService.trader.dCI!==this.userService.user.currencyId){const t={from:this.traderService.trader.dCI,to:this.userService.user.currencyId,amount:this.traderService.trader.tMPL},s=new n.qP(t);this.traderService.calculateCurrency(s).then(t=>{this.calculatedMaximumPayoutAmount=t,e(this.calculatedMaximumPayoutAmount)})}else this.calculatedMaximumPayoutAmount=this.traderService.trader.tMPL,e(this.calculatedMaximumPayoutAmount);else this.calculatedMaximumPayoutAmount=this.traderService.trader.tMPL,e(this.calculatedMaximumPayoutAmount)})}maximumPayoutSystemAmountSetter(e){const t=e.filter(e=>e>this.calculatedMaximumPayoutAmount).map(e=>this.calculatedMaximumPayoutAmount),s=e.filter(e=>e<this.calculatedMaximumPayoutAmount).reduce((e,t)=>e+t,0);return t.reduce((e,t)=>e+t,0)+s}maximumPayOutControl(e,t,s){try{if("system"!==t)return e>this.calculatedMaximumPayoutAmount?this.setMaximumPayOutErrorData(!0,this.calculatedMaximumPayoutAmount,t,s):this.setMaximumPayOutErrorData(!1,null,t,s);{const i={};for(const a in e)e[a]>this.calculatedMaximumPayoutAmount?i[a]=this.setMaximumPayOutErrorData(!0,this.calculatedMaximumPayoutAmount,t,s,a):i[a]=this.setMaximumPayOutErrorData(!1,this.calculatedMaximumPayoutAmount,t,s,a);const r=(0,h.Z)(i,e=>e.active);return this.maximumPayOutError.system=r||{active:!1,newPossibleAmount:null,odd:null},this.maximumPayOutError}}catch(i){console.error("maximumPayOutControl exception --------\x3e",i)}}play(e){this.traderService.trader.alwaysFastBet&&(e.ip=1),this._playErrorList={};const t={requestBody:e,identity:null};return t.identity=this.storageService.session.get("tckn")||null,this.selectedOdds.forEach(e=>{e.playedOdd=e.odd}),new Promise((s,i)=>{this.http.post(`${o.N.publicApiEndpoint}/api/user/sportsBet/play`,t).subscribe(t=>{this.trackingService.playBet(e),this.iframeMessagesService.playSlip(t),this.traderService.trader.alwaysFastBet&&(this.hasPromotions=!1,this.userService.refreshBalance().then(e=>{console.log("res",e)})),s(t)},e=>{try{const t="string"==typeof e.error?JSON.parse(e.error):e.error;t.data&&t.data.message&&t.data.message.length>3?i("string"==typeof t.data.message?JSON.parse(t.data.message):t.data.message):t.responseCodes&&("REJECT_TC_NOT_ACCEPTED"===t.responseCodes[0].responseKey?this.prepareTcModal():"CUSTOMER_IDENTITY_NOT_VERIFIED"===t.responseCodes[0].responseKey&&this.translate.get("MESSAGES.CUSTOMER_IDENTITY_NOT_VERIFIED").subscribe(e=>{this.tcknMessage=e}),i([{key:t.responseCodes[0].responseKey}]))}catch(e){i([{key:"EXCEPTION"}])}})})}messageFinder(e){return W(this,void 0,void 0,function*(){return this.errorMesssageGroup={},e.forEach(e=>{for(const t in this._errorGroups)this._errorGroups[t].indexOf(e.key)>-1&&(this.errorMesssageGroup[t]={error:e});Object.keys(this.errorMesssageGroup).length||(this.errorMesssageGroup.DEFAULT={error:e})}),this.errorMesssageGroup})}errorHandler(e,t){return W(this,void 0,void 0,function*(){const s=yield this.messageFinder(e),i=Object.keys(s),r={};let a={};return i.forEach(e=>{let i,n;switch(e){case"GENERAL":i=this.selectedOdds.find(t=>t.foId===s[e].error.params),i&&(i.valid=!1,r[i.foId]={key:`MESSAGES.${s[e].error.key}`}),t&&(this.translate.get(`MESSAGES.${s[e].error.key}`).subscribe(e=>{o.N.trader.IsIframe?this.iframeMessagesService.showSnackbar(e,"error"):this.toastFactory.error(e)}),this.traderService.trader.mts&&(a={group:"GENERAL",action:"back"}));break;case"BET_CLOSED":this.translate.get(`MESSAGES.${s[e].error.key}`).subscribe(e=>{this.errors.playError=e,t||(o.N.trader.IsIframe?this.iframeMessagesService.showSnackbar(e,"error"):this.toastFactory.error(e))});break;case"FIXTURE_GENERAL":n=this.selectedOdds.find(t=>t.fId===s[e].error.params),r[n.foId]={key:`MESSAGES.${s[e].error.key}`};break;case"ODD_CHANGED":s[e].error.params.forEach(t=>{i=this.selectedOdds.find(e=>e.foId===t.fo),i&&(i.valid=!1,r[i.foId]={key:`MESSAGES.${s[e].error.key}`,newOdd:t.fr})});break;case"FIXTURE_RETURN_LIMIT":this.showIncreaseLimitButton=o.N.trader.increaseLimitButtonBetslip,a={error:s[e].error,action:"limitErrorAction"};break;case"PLAY_LIMIT":this.showBalanceConfirmButton=!0,this.showIncreaseLimitButton=o.N.trader.increaseLimitButtonBetslip,a={error:s[e].error,action:"limitErrorAction"};break;case"ODD_RETURN_LIMIT":a={error:s[e].error,action:"limitErrorAction"};break;case"DEFAULT":a={error:s[e].error,action:"defaultErrorAction"}}}),this.playErrorList=r,this.playErrorsObserver.next(r),a})}getFixturesDetails(e=[]){return this.traderService.traderDefaults$.pipe((0,r.w)(t=>{const s={requestBody:{fixtureIds:e,bragiUrl:t.tBU}},i=this.storageService.local.get("device"),r=o.N.trader.name,a=`/api-v2/fixture-detail/${i}/${this.storageService.local.get("languageId")||this.translateFactory.currentLang.id}/${r}`;return this.http.post(a,s)}))}confirm(e){const t={requestBody:e,identity:null};return t.identity=this.storageService.session.get("tckn")||null,new Promise((s,i)=>{this.http.post(`${o.N.publicApiEndpoint}/api/user/sportsBet/confirm`,t).subscribe(t=>{this.hasPromotions=!1,this.userService.refreshBalance().then(e=>{console.log("res",e)}),this.trackingService.confirmBet(e),this.iframeMessagesService.confirmSlip(t),s(t)},e=>{try{if(void 0===e.error.data||void 0===e.error.data.message)i([{key:e.error.responseCodes[0].responseKey}]);else{const t="string"==typeof e.error?JSON.parse(e.error):e.error;i(JSON.parse(t.data.message))}}catch(e){i([{key:"EXCEPTION"}])}})})}clearBooking(){null!==this.storageService.session.get("booking")&&this.storageService.session.remove("booking")}checkChangedOdd(e,t){this.selectedOdds.forEach(s=>{const i=this._playErrorList[s.foId];i&&i.newOdd&&(t||e&&i.newOdd>s.odd)&&(s.odd=i.newOdd)})}preparePossibleAmountForFreebetTraderAttr(e,t){return this.traderService.trader.sfai?e-t:e}checkMmp(e){return(!this.traderService.trader.BMMPFL||!e.isLive)&&e.mmp>1}prepareBodyForSelectPromotion(e,t){const s=Object.assign(t);return e.val>0?(s.rp=1,s.upid=e.val,s.upt=e.type,this.amounts.maxCouponWin=e.maxCouponWin):s.hasOwnProperty("rp")&&(delete s.rp,delete s.upid,delete s.upt,this.amounts.maxCouponWin=0),s}lastCheckBalanceAndPromotions(e,t,s){return W(this,void 0,void 0,function*(){const i={};return s&&this.userService.refreshBalance().then(s=>{this.getAllPromotions(!0).then(s=>{i.success=!0,this.checkAvability(t,e)}).catch(e=>{i.success=!1})}).catch(e=>{i.success=!1}),i})}getAllPromotions(e){return e&&(this.hasPromotions=!1),new Promise((e,t)=>{this.hasPromotions?e(this._promotions):this.promotionsService.getPromotions().then(t=>{this._promotions=t,this._freeBets=t.freebets,this._bonuses=t.bonuses,this.hasPromotions=!0,e(this._promotions)}).catch(e=>{this.hasPromotions=!0,this._promotions=null,this._freeBets=null,this._bonuses=null,t(e)})})}checkAvability(e,t){this.getAllPromotions().then(s=>{if(s||null!==s){this.promotionHasFrozen=s.hasFrozenBonus;const i=this.selectedOdds.filter(e=>e.active);this._freeBets.length?this._freeBets.forEach((s,r)=>{this.promotionAvabilitiy.checkPromotionsAvailability(s,"freebet",i,e,t,this.promotionHasFrozen),this._rulesWorked.next(!0)}):this._rulesWorked.next(!0),this._bonuses.length?this._bonuses.forEach((s,r)=>{this.promotionAvabilitiy.checkPromotionsAvailability(s,"bonus",i,e,t,this.promotionHasFrozen),this._rulesWorked.next(!0)}):this._rulesWorked.next(!0)}}).catch(e=>{this._rulesWorked.next(!0)})}translateSelectedOdds(){const e=this.selectedOdds.map(e=>e.fId);this.getFixturesDetails(e).subscribe(e=>{this.translateLiveOdds(e.data)})}translateLiveOdds(e){const t=e.reduce((e,t)=>[...e,...t.cs],[]).reduce((e,t)=>[...e,...t.sns],[]).reduce((e,t)=>[...e,...t.fs],[]).reduce((e,t)=>[...e,...t.btgs],[]).reduce((e,t)=>[...e,...t.fos],[]).reduce((e,t)=>(e[t.foId]=t,e),{});this.selectedOdds=this.selectedOdds.map(e=>{const s=t[e.foId];return s?Object.assign(Object.assign({},e),{selectionName:s.oc,btgN:s.btgN||s.btN}):Object.assign({},e)}),this.setSession()}setMaximumPayOutErrorData(e,t,s,i,r){switch(s){case"single":return i.newPossibleAmount=e&&i.amount?t:null,this.maximumPayOutError.single={active:e,newPossibleAmount:t,odd:i},this.maximumPayOutError;case"multi":return this.maximumPayOutError.multi={active:e,newPossibleAmount:t,odd:null},this.maximumPayOutError;case"system":return{active:e,newPossibleAmount:t,odd:null}}}setSession(){var e;this.storageService.local.set("selectedOdds",this.selectedOdds),(null===(e=this.selectedOdds)||void 0===e?void 0:e.length)&&!this.cookieService.get("betSlipTime")&&this.cookieService.setWithExpiryInMinutes("betSlipTime",String(Date.now()),60),this.storageService.local.set("selectedOddsLanguage",this.translate.currentLang)}removeSelectPromotionKeys(e){const t=Object.assign({},e);return t.hasOwnProperty("rp")&&(delete t.rp,delete t.upid,delete t.upt),t}booking(e,t){const s=this.removeSelectPromotionKeys(t),i=new n.qP(s);return new Promise((t,s)=>{e?this.http.post(`${o.N.apiEndpoint}/api/user/booking/bookabet`,i).subscribe(e=>{this.bookSuccess=!0,this.translate.get("TEXTS.REZERVATION_NUMBER_PARAM",{param0:e.data.bookingRef}).subscribe(t=>{this.bookResult.bookingExpireDate=e.data.bookingExpireDate,this.bookResult.bookingRef=e.data.bookingRef,this.bookResult.title=t}),t(e)},e=>{let t;try{this.bookSuccess=!1,t=e.error.responseCodes[0].responseMessage}catch(i){s([{key:"EXCEPTION"}])}try{const e="string"==typeof t?JSON.parse(t):t;s(e)}catch(r){s(t)}}):this.http.post(`${o.N.apiEndpoint}/api/generic/booking/bookabet`,i).subscribe(e=>{this.bookSuccess=!0,this.translate.get("TEXTS.REZERVATION_NUMBER_PARAM",{param0:e.data.bookingRef}).subscribe(t=>{this.bookResult.bookingExpireDate=e.data.bookingExpireDate,this.bookResult.bookingRef=e.data.bookingRef,this.bookResult.title=t}),t(e)},e=>{let t;try{this.bookSuccess=!1,t=e.error.responseCodes[0].responseMessage}catch(i){s([{key:"EXCEPTION"}])}try{const e="string"==typeof t?JSON.parse(t):t;s(e)}catch(r){s(t)}})})}printDataForBookABet(e,t,s,i,r,a,n){let c;switch(t.filter(e=>e.playedOdd).map(e=>e.playedOdd=this.oddFormatPipe.transform(e.playedOdd)),e){case"single":c=this.amounts.cost;break;case"multi":c=this.amounts.multibet;break;case"system":c=this.amounts.systemCost}return{time:this.datePipe.transform(Date.now(),"dd/MM/yy HH:mm"),texts:this.textsTranslates,stake:c,systemType:t[0].systemType,bookDetail:t,bookResult:i,bookabetPrintLogo:this.traderService.trader.bookabetPrintLogo,CDNPathOfbookabetPrintLogo:this.traderService.trader.tCDNU+o.N.trader.name+"/upload_files/logo.png",couponType:t[0].couponType.toUpperCase(),headerContent:r,footerContent:a,currencyCode:n,multi:"multi"===this.view,single:"single"===this.view,system:"system"===this.view,traderName:o.N.trader.name,traderDomain:window.location.hostname}}getBookabetDetail(e){const t=new n.qP(e);return t.channel="o",new Promise((e,s)=>{this.http.post(o.N.apiEndpoint+"/api/generic/booking/load",t).subscribe(t=>{e(t)},e=>{try{const t="string"==typeof e.error?JSON.parse(e.error):e.error;s("string"==typeof t.data.message?JSON.parse(t.data.message):t.data.message)}catch(e){s([{key:"EXCEPTION"}])}})})}getBookABetStatics(e){const t=new n.qP(e);this.staticContentService.getStaticContent(t).then(e=>e&&e[0].moduleContent?e[0].moduleContent:"")}isSameFixtureForCombination(){const e=this.selectedOdds.map(e=>e.fId),t=(0,m.Z)(this.selectedOdds,"fId");if(e.length!==t.length){const t=e.slice().sort(),s=[];for(let e=0;e<t.length-1;e++)t[e+1]===t[e]&&s.push(t[e]);return s}}createSingleForm(e,t){const s={};return s["fc_"+e.foId]=new l.NI({value:"",disabled:this.checkMmp(e)},[l.kI.min(t)]),new l.cw(s)}resetAmountsObject(){return W(this,void 0,void 0,function*(){switch(this.view){case"single":return this.amounts.cost=0,this.amounts.possibleAmount=0,this.amounts.allSingle=0,this.amounts.stakeTaxRate=0,this.amounts.stakeTaxAmount=0,this.amounts.effectivePlayedAmount=0,this.amounts.taxAmount=0,this.amounts.taxRate=0,this.amounts.secTaxAmount=0,!0;case"multi":return this.amounts.multibet=0,this.amounts.multiRate=0,this.amounts.multiBetBonusAmount=0,this.amounts.possibleAmount=0,this.amounts.amountToWin=0,this.amounts.stakeTaxRate=0,this.amounts.stakeTaxAmount=0,this.amounts.effectivePlayedAmount=0,this.amounts.taxAmount=0,this.amounts.taxRate=0,this.amounts.secTaxAmount=0,!0;case"system":return this.amounts.systemCost=0,this.amounts.systemWin=0,this.amounts.stakeTaxRate=0,this.amounts.stakeTaxAmount=0,this.amounts.effectivePlayedAmount=0,this.amounts.taxAmount=0,this.amounts.taxRate=0,this.amounts.secTaxAmount=0,!0;default:return this.amounts={cost:0,possibleAmount:0,multibet:0,multiRate:0,system:0,systemCost:0,systemWin:0,appToAll:0,allSingle:0,multiBetBonusAmount:0,instantPlayAmount:0,amountToWin:0,multibetBonusRate:0,stakeTaxRate:0,stakeTaxAmount:0,effectivePlayedAmount:0,taxAmount:0,taxRate:0,secTaxAmount:0},!0}})}setSingleAllAmount(e){if("single"!==this.view)return!1;let t;return this.amounts.allSingle?(this.amounts.cost=0,t=!0,this.selectedOdds.forEach(e=>{this.checkMmp(e)||(e.amount=this.amounts.allSingle)}),this.oddChanges$.next({change:!0})):(0,p.Z)(this.amounts.allSingle)&&(this.selectedOdds.forEach(e=>{e.amount=0}),this.amounts.cost=0,t=!1,this.amounts.allSingle=0),t}clearSlip(){return W(this,void 0,void 0,function*(){yield this.resetAmountsObject(),this.clearOdds(),this._oddRemoved.next(),this.betSlipBody.fb=0,this.betSlipBody.bo=0,this.ssFb=null,this.systemModels={sysUpPossibleWinAmounts:{},sysPossibleWinAmounts:{}},this.iframeMessagesService.clearOdds(),this.preview=null,this.successBet=null,this.bookSuccess=!1,this.bookResult={bookingExpireDate:null,bookingRef:null,title:null},this.storageService.local.remove("bookABetPrintStorage"),this.storageService.local.remove("printStorage"),this.playErrorList={},this.errors.playError=null,this.errors.notEnaughBalance=null,this.view="single",this.multiBetBonusRulesMessages=null})}changeTab(e,t,s,i,r){if(e===this.view)return!1;if(!this.selectedOdds.length)return!1;switch(e){case"single":this.view=e,this.calculatePossibleAmount(null,this.ssFb,this.view,s,i,r),this.resetAmountsObject();break;case"multi":this.selectedOdds.length>1&&(this.view=e,"d"===r&&t.enable(),this.resetAmountsObject(),this.selectedOdds.map(e=>e.amount=0),this.calculatePossibleAmount(null,this.ssFb,this.view,s,i,r));break;case"system":this.selectedOdds.length>1&&(this.view=e,this.resetAmountsObject(),this.selectedOdds.map(e=>e.amount=0),this.calculateCombinations(r))}this.activeOddCount=this.selectedOdds.filter(e=>e.active).length,this.ssFb=null,this.betSlipBody.fb=0,this.amounts.instantPlayAmount=0,this.multiBetBonusRulesMessages=null,null!==this.storageService.session.get("ip")&&this.storageService.session.remove("ip"),"m"===r&&this.customNumpadService._cNumPadAmountChanged.next({action:"typeChaged",amount:0,playType:e,decimalAmount:0,fromAlreadyAmount:!1}),this.errors&&(this.errors={notEnaughBalance:!1,playError:"",systemSMPA:!1,singleSMPA:!1,maxBetError:null,winAmountSMPAError:!1,multiMaxPay:null,singleMaxPay:null,systemMaxPay:null,limitErrors:new Map})}defineSMPA(e){if(e)if(this.traderService.trader.dCI===this.userService.user.currencyId)this.sMPA=this.traderService.trader.sMPA;else{const e={from:this.traderService.trader.dCI,to:this.userService.user.currencyId,amount:this.traderService.trader.sMPA},t=new n.qP(e);this.traderService.calculateCurrency(t).then(e=>{this.sMPA=Math.ceil(100*e)/100})}else this.sMPA=this.traderService.trader.sMPA}singleBetPlayable(e,t,s,i,r,a,n,o){return t?this.errors.singleSMPA||!n||a.play||!o||t.disabled?s.single=!1:s.single=!0:i.cost&&!a.play&&!this.errors.singleSMPA&&n&&o?e&&i.cost>r?s.single=!1:s.single=!0:s.single=!1}multiBetPlayable(e,t,s,i,r,a,n,o,c,l,d,u,h){return t?!c||!l||!h||a.play||n.length||Number(i.multibet)<o||!d||u<2||t.disabled?s.multi=!1:s.multi=!0:!i.multibet||!c||!l||!h||a.play||n.length||Number(i.multibet)<o||!d||u<2||e&&Number(i.multibet)>r?s.multi=!1:s.multi=!0}systemBetPlayable(e,t,s,i,r,a,n,o,c,l,d){return!i.systemCost||!n||!o||!d||a.play||this.errors.systemSMPA||!c||l<2||e&&i.systemCost>r?s.system=!1:s.system=!0}normalPrintData(e,t,s,i,r,a,n,c){return{time:s,masterId:e.sportsBetMasterId,useLogo:o.N.trader.printLogo,bookabetPrintLogo:this.traderService.trader.bookabetPrintLogo,CDNPathOfbookabetPrintLogo:this.traderService.trader.tCDNU+o.N.trader.name+"/upload_files/logo.png",coupons:t.coupons,totalBets:t.totalBets,possibleReturnAmount:this.decimalPipe.transform(t.possibleReturnAmount,"1.2-2"),initialPossibleReturnAmount:this.decimalPipe.transform(t.initialPossibleReturnAmount,"1.2-2"),possibleReturnAmountBeforeTax:this.decimalPipe.transform(t.possibleReturnAmountBeforeTax,"1.2-2"),multibetBonusAmount:e.mbbResult&&e.mbbResult.amount?this.decimalPipe.transform(e.mbbResult.amount,"1.2-2"):0,multibetBonusRate:e.mbbResult&&e.mbbResult.rate?100*e.mbbResult.rate:0,multibetBonusAmountPlus:!(!e.mbbResult||!e.mbbResult.amount)&&e.mbbResult.amount>0,taxAmountMinus:t.taxAmount>0,showMBRate:0!==t.multibetBonusRate,showMultibetBonus:"multi"===i&&this.traderService.trader.tMBB,taxAmount:this.decimalPipe.transform(t.taxAmount,"1.2-2"),secTaxAmount:this.decimalPipe.transform(t.secTaxAmount,"1.2-2"),secondTaxAmount:this.decimalPipe.transform(t.secTaxAmount,"1.2-2"),secondTax:100*this.traderService.trader.tSTAX||null,taxRate:t.taxRate,showTaxs:!this.traderService.trader.tHideTax,selectedOdds:a,couponNames:t.couponNames,tAMBBT:this.traderService.trader.tAMBBT,texts:this.textsTranslates,isMulti:"multi"===i,isSingle:"single"===i,isSystem:"system"===i,systemModels:n,combinations:c,stake:this.decimalPipe.transform(t.playedAmount,"1.2-2"),currencyCode:r.currencyCode,traderName:o.N.trader.name,traderDomain:window.location.hostname,customerId:this.userService.user.customerId}}acceptChanges(e,t,s){return e.target.checked?(t.ad=t.ar=1,s&&(s.ad=s.ar=1)):(t.ad=t.ar=0,s&&(s.ad=s.ar=0)),this.storageService.session.set("ar",t.ar),this.storageService.session.set("ad",t.ad),{betSlipBody:t,slip:s}}acceptRaisedChanges(e,t,s){return e.target.checked?(t.ar=1,s&&(s.ad=s.ar=1)):(t.ad=t.ar=0,s&&(s.ad=s.ar=0)),this.storageService.session.set("ar",t.ar),this.storageService.session.set("ad",t.ad),{betSlipBody:t,slip:s}}acceptChangesWithOutEvent(e,t){return e.ad=e.ar=1,t&&(t.ad=t.ar=1),this.storageService.session.set("ar",e.ar),this.storageService.session.set("ad",e.ad),this._acceptChangedForSingle.next(!0),{betSlipBody:e,slip:t}}setSelectedOddAndAmountForIP(e,t,s=null){return this.setIpAmount(),this.setOdd(e,t,s)}transferInstantPlayBodyToService(e){this._ipSlip=e}whichSystemAndPrepareEnteredAmounts(e){let t,s;if(!(0,g.Z)(e))return(0,g.Z)(e.sysPossibleWinAmounts)?(0,g.Z)(e.sysUpPossibleWinAmounts)||(t=Object.keys(e.sysUpPossibleWinAmounts)[0],s=!1):(t=Object.keys(e.sysPossibleWinAmounts)[0],s=!0),{sysIndex:Number(t)-1,isNormal:s}}posReturnLessThanStakeNotifyConfirm(e){return!(this.traderService.trader.posReturnLessThanStakeNotify&&e.possibleReturnAmount<e.playedAmount)}prepareTcModal(){const e=new n.u_("terms-and-conditions-modal","terms-and-conditions-mdl",null,0);return this.modalService.modalObserver.next(e),!1}findOdd(e,t){return e.find(e=>e.foId===t)}prepareForBetslip(e,t,s){let i={};return e[0].cs.forEach((e,r)=>{e.sns.forEach((e,a)=>{e.fs.forEach((e,n)=>{e.btgs.forEach((e,o)=>{const c=this.findOdd(e.fos,t);e.fos.forEach((e,t)=>{c&&c.foId===e.foId&&(i={cI:r,sI:a,fI:n,bI:o,oI:t,sl:1,isVirtual:!1,isPreLive:!s,isLive:s,valid:e.valid,tvalid:e.tvalid,active:!0,selection:t,ref:e.foId+"-"+t})})})})})}),i}prepareCoupons(e,t,s,i,r){var a,n,o,c;const l=t.couponPlayResults,d=(0,b.Z)(l,"sportBetTmpId"),u={};u[i+1]=s?this.systemModels.sysPossibleWinAmounts[i+1]:this.systemModels.sysUpPossibleWinAmounts[i+1];let h=0,m=0;t.mbbResult&&(h=t.mbbResult.amount,m=100*t.mbbResult.rate),"play"===e?(this.preview={couponNames:Object.keys(d),coupons:d,possibleReturnAmount:this.traderService.trader.sfai&&t.possibleReturnAmountExcFreebet?t.possibleReturnAmountExcFreebet:t.possibleReturnAmount,initialPossibleReturnAmount:this.traderService.trader.sfai&&t.possibleReturnAmountExcFreebet?t.possibleReturnAmountExcFreebet:t.initialPossibleReturnAmount,possibleReturnAmountBeforeTax:t.possibleReturnAmountBeforeTax,multibetBonusAmount:h,multibetBonusRate:m,taxAmount:t.taxAmount,secTaxAmount:t.secTaxAmount,taxRate:100*t.taxRate,totalBets:l[0].totalBets,playedAmount:l[0].playedAmount,playedSystemNames:s&&"system"===r?u:null,playedSystemUpNames:s||"system"!==r?null:u,stakeTaxRate:t.stakeTaxRate,stakeTaxAmount:t.stakeTaxAmount,effectivePlayedAmount:t.effectivePlayedAmount,claimablePromotions:t.claimablePromotions,maxCouponWin:0},(null===(a=this.ssFb)||void 0===a?void 0:a.maxCouponWin)?this.preview.maxCouponWin=this.ssFb.maxCouponWin:(null===(o=null===(n=this.bonuses)||void 0===n?void 0:n[0])||void 0===o?void 0:o.maxCouponWin)?this.preview.maxCouponWin=null===(c=this.bonuses)||void 0===c?void 0:c[0].maxCouponWin:this.amounts.maxCouponWin&&(this.preview.maxCouponWin=this.amounts.maxCouponWin)):(this._betPlaced.next(!0),this.successBet={couponNames:Object.keys(d),coupons:d,sportsBetMasterId:t.sportsBetMasterId,possibleReturnAmount:t.possibleReturnAmountExcFreebet?t.possibleReturnAmountExcFreebet:t.possibleReturnAmount,initialPossibleReturnAmount:t.possibleReturnAmountExcFreebet?t.possibleReturnAmountExcFreebet:t.initialPossibleReturnAmount,possibleReturnAmountBeforeTax:t.possibleReturnAmountBeforeTax,multibetBonusAmount:h,multibetBonusRate:m,taxAmount:t.taxAmount,secTaxAmount:t.secTaxAmount,taxRate:100*t.taxRate,totalBets:l[0].totalBets,playedAmount:l[0].playedAmount,playedSystemNames:s&&"system"===r?u:null,playedSystemUpNames:s||"system"!==r?null:u,stakeTaxRate:t.stakeTaxRate,stakeTaxAmount:t.stakeTaxAmount,effectivePlayedAmount:t.effectivePlayedAmount})}calculateMultiBetAmounts(e){let t=Number(this.amounts.possibleAmount);return this.traderService.trader.tCMBW&&(t-=this.amounts.multibet),e.maxBonusWin?(e.maxBonusWin<t*(e.rate/100)?this.amounts.multiBetBonusAmount=Number(e.maxBonusWin):this.amounts.multiBetBonusAmount=t*(e.rate/100),this.amounts.multiBetBonusAmountToBeWin=Number(this.amounts.multiBetBonusAmount+this.amounts.possibleAmount),this.amounts.multibetBonusRate=e.rate,this.amounts.multiBetBonusAmount?this.prepareMBBTextMessage(e):this.multiBetBonusRulesMessages=null):this.clearMultiBetBonusAmounts(),this.amounts}findMultiBetAmounts(e){return e&&e.amount?(this.amounts.multibetBonusRate=100*e.rate,this.amounts.multiBetBonusAmount=e.amount,this.amounts.multiBetBonusAmountToBeWin=Number(this.amounts.multiBetBonusAmount+this.amounts.possibleAmount),this.amounts.multiBetBonusAmount?this.prepareMBBTextMessage(e):this.multiBetBonusRulesMessages=null):this.clearMultiBetBonusAmounts(),this.amounts}prepareMultiBetBonusAmount(e){return W(this,void 0,void 0,function*(){return this.traderService.trader.tMBB&&Number(this.amounts.multibet)>0?this.bonuses.length?this.bonuses[0].disabled?(this.findMultiBetAmounts(e),!0):(this.amounts.multiBetBonusAmount=0,this.amounts.multiBetBonusAmountToBeWin=0,!0):(this.findMultiBetAmounts(e),!0):(this.amounts.multiBetBonusAmount=0,this.amounts.multiBetBonusAmountToBeWin=0,this.multiBetBonusRulesMessages=null,!0)})}getMultiBet(e,t){return new Promise((s,i)=>{!this.traderService.trader.tSTAX&&!this.traderService.trader.tSAT&&!this.traderService.trader.cts&&this.traderService.trader.tMBB&&Number(e)>0?(this.createMultiBetModel(),t?this.bonuses.length?this.bonuses[0].disabled?this.promotionsService.getMultibetBonusForLoginUser(this.slip).then(e=>{this.calculateMultiBetAmounts(e),s(!0)}):(this.amounts.multiBetBonusAmount=0,this.amounts.multiBetBonusAmountToBeWin=0,this.multiBetBonusRulesMessages=null,s(!0)):this.promotionsService.getMultibetBonusForLoginUser(this.slip).then(e=>{this.calculateMultiBetAmounts(e),s(!0)}):this.promotionsService.getMultibetBonusForVisitor(this.slip).then(e=>{this.calculateMultiBetAmounts(e),s(!0)})):(this.amounts.multiBetBonusAmount=0,this.amounts.multiBetBonusAmountToBeWin=0,s(!0))})}possibleAmountAndTaxAmountSetter(e){"system"===this.view?this.amounts.systemWin=e.possibleReturnAmount:this.amounts.possibleAmount=e.possibleReturnAmount,this.amounts.stakeTaxAmount=e.stakeTaxAmount,this.amounts.stakeTaxRate=e.stakeTaxRate,this.amounts.secTaxAmount=e.secTaxAmount,this.amounts.taxAmount=e.taxAmount,this.amounts.taxRate=100*e.taxRate,this.amounts.effectivePlayedAmount=e.effectivePlayedAmount}clearPreplayTaxAmounts(){this.amounts.stakeTaxAmount=0,this.amounts.stakeTaxRate=0,this.amounts.secTaxAmount=0,this.amounts.taxAmount=0,this.amounts.taxRate=0,this.amounts.effectivePlayedAmount=0}clearMultiBetBonusAmounts(){this.amounts.multiBetBonusAmount=0,this.amounts.multiBetBonusAmountToBeWin=0,this.amounts.multibetBonusRate=0,this.multiBetBonusRulesMessages=null}clearErrors(){this.errors={notEnaughBalance:!1,playError:"",systemSMPA:!1,singleSMPA:!1,maxBetError:null,winAmountSMPAError:!1,multiMaxPay:null,singleMaxPay:null,systemMaxPay:null,limitErrors:new Map}}calculatePossibleAmount(e,t,s,i,r,a,n){return W(this,void 0,void 0,function*(){if(this.selectedOdds&&this.selectedOdds.length)switch(s){case"single":if(this.ssFb){let e,t,s;this.selectedOdds&&1===this.selectedOdds.length?e=(0,v.Z)(this.selectedOdds,e=>e.usingFreebet&&e.amount&&e.active&&this.ssFb.amount?this.ssFb.amount*e.odd:0):(s=(0,v.Z)(this.selectedOdds,e=>e.usingFreebet&&e.amount&&e.active&&this.ssFb.amount?this.ssFb.amount*e.odd:0),t=(0,v.Z)(this.selectedOdds,e=>!e.usingFreebet&&e.active&&e.amount?e.amount*e.odd:0),e=t+s),this.amounts.cost=this.ssFb.amount,this.rpa=this.preparePossibleAmountForFreebetTraderAttr(e,this.ssFb.amount),this.traderService.trader.sfai&&(this.reCalcPossibleAmountsForFreebet=!0),this.traderService.trader.preplayEnabled&&n?(this.amounts.cost=n.playedAmount,this.possibleAmountAndTaxAmountSetter(n)):this.amounts.possibleAmount=this.rpa}else this.reCalcPossibleAmountsForFreebet=!1,this.traderService.trader.preplayEnabled&&n?(this.amounts.cost=n.playedAmount,this.possibleAmountAndTaxAmountSetter(n)):(this.amounts.cost=(0,v.Z)(this.selectedOdds,e=>e.active&&e.amount?Number(e.amount):0),this.amounts.possibleAmount=(0,v.Z)(this.selectedOdds,e=>e.active&&e.amount?Number(e.amount)*e.odd:0));"m"===a&&(this.customNumpadService.amounts=this.amounts),yield this.maxPayoutProcessForSingleBet(a,i,e);break;case"multi":let t=1;if(this.selectedOdds.forEach(e=>{e.active&&(t*=e.odd)}),this.ssFb){const e=this.ssFb.amount*t;this.rpa=this.preparePossibleAmountForFreebetTraderAttr(e,this.ssFb.amount),this.traderService.trader.preplayEnabled&&n?(n.mbbResult||this.clearMultiBetBonusAmounts(),this.possibleAmountAndTaxAmountSetter(n)):this.amounts.possibleAmount=this.rpa,this.traderService.trader.sfai&&(this.reCalcPossibleAmountsForFreebet=!0),this.maxPayoutProcessForMbb(t,s)}else{if(this.reCalcPossibleAmountsForFreebet=!1,this.traderService.trader.preplayEnabled&&n?(this.possibleAmountAndTaxAmountSetter(n),n.mbbResult||this.clearMultiBetBonusAmounts()):(this.amounts.possibleAmount=this.amounts.multibet*t,this.getMultiBet(this.amounts.multibet,r).then(e=>{e&&this.maxPayoutProcessForMbb(t,s)})),this.amounts.multiRate=t,this.traderService.trader.preplayEnabled&&n){(yield this.prepareMultiBetBonusAmount(n.mbbResult))&&this.maxPayoutProcessForMbb(t,s)}"m"===a&&(this.customNumpadService.amounts=this.amounts)}}})}maxPayoutProcessForSingleBet(e,t,s){return W(this,void 0,void 0,function*(){if(this.traderService.trader.tACMPL&&this.traderService.trader.tMPL)if(this.amounts.possibleAmount>0){for(const s in this.selectedOdds)this.maximumPayOutError=this.maximumPayOutControl(Number(this.selectedOdds[s].amount)*this.selectedOdds[s].odd,this.view,this.selectedOdds[s]);const e=(0,v.Z)(this.selectedOdds,e=>e.active&&e.amount&&!e.newPossibleAmount?Number(e.amount)*e.odd:0),t=(0,v.Z)(this.selectedOdds,e=>e.active&&e.newPossibleAmount?e.newPossibleAmount:0);this.amounts.possibleAmountBeforeTax=e+t}else this.amounts.possibleAmountBeforeTax=0})}maxPayoutProcessForMbb(e,t){if(this.traderService.trader.tACMPL&&this.traderService.trader.tMPL)if(this.amounts.possibleAmount>0){const s=this.amounts.possibleAmount;this.maximumPayOutError=this.maximumPayOutControl(s,t),this.maximumPayOutError&&this.maximumPayOutError.multi&&this.maximumPayOutError.multi.active?(this.amounts.possibleAmountBeforeTax=this.maximumPayOutError.multi.newPossibleAmount,this.closeNormalMultiPayOutMessage=!1):this.ssFb?this.amounts.possibleAmountBeforeTax=this.rpa:this.amounts.possibleAmountBeforeTax=this.amounts.multibet*e}else this.amounts.possibleAmount=0}createSingleBetModel(e){this.slip=Object.assign({},this.betSlipBody),this.slip.cps=[],this.slip.ar=Number(this.hideAcceptOddChanges)||this.slip.ar,this.slip.ad=Number(this.hideAcceptOddChanges)||this.slip.ad,(this.slip.ar||this.slip.ad)&&this.checkChangedOdd(this.slip.ar,this.slip.ad),e?this.selectedOdds.forEach(e=>{if(e.active){const t=this.decimalPipe.transform(e.amount,"1.2-2");this.slip.cps.push({pa:Number(t.replace(/,/g,"")),cs:1,ce:1,ib:!1,po:[{fo:e.foId,sl:e.selection,ba:!1,fr:e.odd}]})}}):this.ssFb?this.selectedOdds.forEach(e=>{e.active&&this.slip.cps.push({pa:null,cs:1,ce:1,ib:!1,po:[{fo:e.foId,sl:e.selection,ba:!1,fr:e.odd}]})}):this.selectedOdds.forEach(e=>{if(e.amount&&e.active){const t=this.decimalPipe.transform(e.amount,"1.2-2");this.slip.cps.push({pa:Number(t.replace(/,/g,"")),cs:1,ce:1,ib:!1,po:[{fo:e.foId,sl:e.selection,ba:!1,fr:e.odd}]})}})}createMultiBetModel(){this.slip=Object.assign({},this.betSlipBody),this.slip.cps=[],this.slip.ar=Number(this.hideAcceptOddChanges)||this.slip.ar,this.slip.ad=Number(this.hideAcceptOddChanges)||this.slip.ad;const e=this.decimalPipe.transform(this.amounts.multibet,"1.2-2");this.slip.cps.push({pa:Number(e.replace(/,/g,"")),cs:1,ce:1,ib:!1,po:[]}),(this.slip.ar||this.slip.ad)&&this.checkChangedOdd(this.slip.ar,this.slip.ad),this.selectedOdds.forEach(e=>{e.active&&this.slip.cps[0].po.push({fo:e.foId,sl:e.selection,ba:!1,fr:e.odd})}),this.slip.cps[0].cs=this.slip.cps[0].po.length,this.slip.cps[0].ce=this.slip.cps[0].po.length,this.ssFb&&(this.slip.cps[0].pa=null)}createSystemBetModel(e){this.slip=Object.assign({},this.betSlipBody),this.slip.cps=[],this.slip.ar=Number(this.hideAcceptOddChanges)||this.slip.ar,this.slip.ad=Number(this.hideAcceptOddChanges)||this.slip.ad,(this.slip.ar||this.slip.ad)&&this.checkChangedOdd(this.slip.ar,this.slip.ad);const t=(0,f.Z)(this.selectedOdds,{active:!0}),s=(0,y.Z)(t,e=>({fo:e.foId,sl:e.selection,ba:e.banker,fr:e.odd})),i=(0,f.Z)(t,{banker:!0}),r=i.length;if(this.bankerList={},i.forEach(e=>{this.bankerList[e.foId]=!0}),e){if(Number(this.systemModels.sysPossibleWinAmounts[this.sysInd+1])){const e=r+this.sysInd+1,t=this.decimalPipe.transform(this.systemModels.sysPossibleWinAmounts[this.sysInd+1],"1.2-2");this.slip.cps.push({pa:Number(t.replace(/,/g,"")),cs:e,ce:e,ib:!1,po:s})}}else if(Number(this.systemModels.sysUpPossibleWinAmounts[this.sysInd+1])){const e=r+this.sysInd+1,t=this.decimalPipe.transform(this.systemModels.sysUpPossibleWinAmounts[this.sysInd+1],"1.2-2");this.slip.cps.push({pa:Number(t.replace(/,/g,"")),cs:e,ce:s.length,ib:!1,po:s})}}getAmountsApiBeforeAction(e,t){if("single"===this.view){const e=(0,v.Z)(this.selectedOdds,e=>e.active&&e.amount?Number(e.amount):0);if(!Number(e))return this.amounts.cost=0,this.amounts.possibleAmount=0,!1;this.createSingleBetModel(!1)}else if("multi"===this.view){if(!Number(this.amounts.multibet)){let e=1;return this.selectedOdds.forEach(t=>{t.active&&(e*=t.odd)}),this.amounts.multibetBonusRate=0,this.amounts.multiBetBonusAmount=0,this.multiBetBonusRulesMessages=null,this.amounts.possibleAmount=0,this.amounts.multiRate=e,!1}this.createMultiBetModel()}else if("system"===this.view&&(this.sysInd=t,this.createSystemBetModel(e),this.systemAmountValueCheck(t,e),this.amounts.systemCost=0,this.amounts.systemCost+=e?Number(this.systemModels.sysPossibleWinAmounts[t+1])*this.combinations[t].count||0:Number(this.systemModels.sysUpPossibleWinAmounts[t+1])*this.combinations[t].up||0,!this.amounts.systemCost))return!1;return!0}getAmountsFromApi(e,t,s){return new Promise((i,r)=>{this.amountsLoader&&this.getAmountsUnsubscribe.next();if(!this.getAmountsApiBeforeAction(t,s))return i(!1);const n={requestBody:this.slip,identity:null};n.identity=this.storageService.session.get("tckn")||null,this.amountsLoader=!0,e?this.http.post(`${o.N.publicApiEndpoint}/api/user/sportsBet/preplay`,n).pipe((0,a.R)(this.getAmountsUnsubscribe)).subscribe(e=>{i(e.data),this.amountsLoader=!1},e=>{this.amountsLoader=!1;try{const t="string"==typeof e.error?JSON.parse(e.error):e.error;t.data&&t.data.message?r("string"==typeof t.data.message?JSON.parse(t.data.message):t.data.message):t.responseCodes&&r([{key:t.responseCodes[0].responseKey}])}catch(e){r([{key:"EXCEPTION"}])}}):this.http.post(`${o.N.publicApiEndpoint}/api/generic/sportsBet/info`,n).pipe((0,a.R)(this.getAmountsUnsubscribe)).subscribe(e=>{i(e.data),this.amountsLoader=!1},e=>{this.amountsLoader=!1;try{const t="string"==typeof e.error?JSON.parse(e.error):e.error;t.data&&t.data.message?r("string"==typeof t.data.message?JSON.parse(t.data.message):t.data.message):t.responseCodes&&r([{key:t.responseCodes[0].responseKey}])}catch(e){r([{key:"EXCEPTION"}])}})})}prepareMBBTextMessage(e){if(e&&e.multiBetBonusRates){let t,s,i;const r=e.multiBetBonusRates.filter(e=>100*e.rate>this.amounts.multibetBonusRate);if(r&&r.length)if(i=100*r[0].rate,e.minOddAtCoupon){const a=this.selectedOdds.filter(t=>t.playedOdd>=e.minOddAtCoupon);s={param0:i,param1:r[0].minEventCount-a.length,param2:e.minOddAtCoupon},t="MESSAGES.MBB_MIN_SELECTION_FOR_HIGHER_RATE",this.translate.get(t,s).subscribe(e=>{this.multiBetBonusRulesMessages={minOddAtCouponMessage:e}})}else s={param0:i,param1:r[0].minEventCount-this.selectedOdds.length},t="MESSAGES.MBB_MIN_SELECTION_FOR_HIGHER_RATE_WO_ODD",this.translate.get(t,s).subscribe(e=>{this.multiBetBonusRulesMessages={minOddAtCouponMessage:e}});else this.multiBetBonusRulesMessages=null}}calculateCombinations(e){return W(this,void 0,void 0,function*(){yield this.calculateCombinationItems();const t=this.combinations.length;for(const s in this.combinations)Number(s)<t&&(yield this.calculateSysPossibleReturnAmount(Number(s),!0,e),this.combinations[s].up>1&&(yield this.calculateSysPossibleReturnAmount(Number(s),!1,e)))})}calculateSysPossibleReturnAmount(e,t,s,i){return W(this,void 0,void 0,function*(){this.isNormal=!!t,this.sysInd=e,yield this.systemAmountValueCheck(e,t);const r=[],a=[];this.selectedOdds.forEach(e=>{e.active&&(!0===e.banker?a.push(e.odd):r.push(e.odd))});const n=r.length,o=()=>{let t=this.combinations[e].number,s=0;const o=[];for(;t<=n;){const i=this.k_combinations(r,t);for(const t in i){let r=1;for(const e in i[t])r*=i[t][e];o.push(r*Number(this.systemModels.sysUpPossibleWinAmounts[e+1])),s+=r}t++}let c=!1;for(const e in this.systemModels.sysUpPossibleWinAmounts)void 0===this.systemModels.sysUpPossibleWinAmounts[e]&&(c=!0);let l=c?0:s*this.systemModels.sysUpPossibleWinAmounts[e+1],d=1;if(a.length>0)if(a.length>1)for(const e in a)d*=a[e];else d=a[0];l*=d,this.traderService.trader.preplayEnabled&&i?this.possibleAmountAndTaxAmountSetter(i):this.amounts.systemWin=l,this.traderService.trader.tACMPL&&this.traderService.trader.tMPL&&(this.amounts.systemWin>0?(this.maximumPayOutError=this.maximumPayOutControl(o,this.view),this.maximumPayOutError.system.active?this.amounts.systemWinBeforeTax=this.maximumPayoutSystemAmountSetter(o):this.amounts.systemWinBeforeTax=l):this.amounts.systemWinBeforeTax=0),this.errors.systemSMPA=Number(this.systemModels.sysUpPossibleWinAmounts[e+1])&&this.systemModels.sysUpPossibleWinAmounts[e+1]<this.sMPA},c=()=>{const t=this.k_combinations(r,this.combinations[e].number);let s=0;const n=[];for(const i in t){let r=1;for(const e in t[i])r*=t[i][e];n.push(r*Number(this.systemModels.sysPossibleWinAmounts[e+1])),s+=r}let o=!1;for(const e in this.systemModels.sysPossibleWinAmounts)void 0===this.systemModels.sysPossibleWinAmounts[e]&&(o=!0);let c=o?0:s*this.systemModels.sysPossibleWinAmounts[e+1],l=1;if(a.length>0)if(a.length>1)for(const e in a)l*=a[e];else l=a[0];c*=l,this.traderService.trader.preplayEnabled&&i?this.possibleAmountAndTaxAmountSetter(i):this.amounts.systemWin=c,this.traderService.trader.tACMPL&&this.traderService.trader.tMPL&&(this.amounts.systemWin>0?(this.maximumPayOutError=this.maximumPayOutControl(n,this.view),this.maximumPayOutError.system.active?this.amounts.systemWinBeforeTax=this.maximumPayoutSystemAmountSetter(n):this.amounts.systemWinBeforeTax=c):this.amounts.systemWinBeforeTax=0),this.errors.systemSMPA=Number(this.systemModels.sysPossibleWinAmounts[e+1])&&this.systemModels.sysPossibleWinAmounts[e+1]<this.sMPA};this.amounts.systemWin=0,this.amounts.systemCost=0,t?c():o(),t?this.traderService.trader.preplayEnabled&&i?this.amounts.systemCost=i.playedAmount:this.amounts.systemCost+=Number(this.systemModels.sysPossibleWinAmounts[e+1])*this.combinations[e].count||0:this.traderService.trader.preplayEnabled&&i&&i.playedAmount?this.amounts.systemCost=i.playedAmount:this.amounts.systemCost+=Number(this.systemModels.sysUpPossibleWinAmounts[e+1])*this.combinations[e].up||0,this.errors.systemSMPA=Number(this.amounts.systemCost)&&this.amounts.systemCost<this.sMPA,this.checkSystemSizeLimit(),"m"===s&&this.customNumpadService._cNumPadAmountChanged.next({action:"systemWin",amount:this.amounts.systemWin,playType:this.view,decimalAmount:0,fromAlreadyAmount:!1})})}systemAmountValueCheck(e,t){return W(this,void 0,void 0,function*(){let s;return t?(s=this.systemModels.sysPossibleWinAmounts[e+1],this.systemModels.sysPossibleWinAmounts={},this.systemModels.sysUpPossibleWinAmounts={},this.systemModels.sysPossibleWinAmounts[e+1]=s):(s=this.systemModels.sysUpPossibleWinAmounts[e+1],this.systemModels.sysPossibleWinAmounts={},this.systemModels.sysUpPossibleWinAmounts={},this.systemModels.sysUpPossibleWinAmounts[e+1]=s),!0})}checkSystemSizeLimit(){return!(!(0,S.Z)(Number(this.amounts.systemWin),0)&&this.selectedOdds.length>Number(this.traderService.trader.NumSysC||this.traderService.trader.NumBetSlip))||(this.translate.get("MESSAGES.MAXIMUM_SYSTEM_BET_LIMIT_MESSAGES",{param0:this.traderService.trader.NumSysC||this.traderService.trader.NumBetSlip}).subscribe(e=>{this.errors.maxBetError=e}),!1)}calculateCombinationItems(){return W(this,void 0,void 0,function*(){this.combinations=[];const e=this.selectedOdds.filter(e=>!0===e.active),t=e.length;if(t<2)return;const s=e.filter(e=>!0===e.banker).length;let i=(0,E.Z)(e,"mmp").mmp-s;i<1&&(i=1);const r=t-s;if(0===r)return;const a=r,n=s>0?s+"B+":"";for(let o=r;o>=i;o--){let e=1;if(a!==o)if(o>a-o){for(let t=a;t>o;t--)e*=t;for(let t=a-o;t>=1;t--)e/=t}else{for(let t=a;t>a-o;t--)e*=t;for(let t=o;t>=1;t--)e/=t}if(e>=1){const t={name:`${n}${o}`,count:e,number:o};this.combinations.unshift(t)}}for(const o in this.combinations){const e=this.combinations[o];e.up=0;for(const t in this.combinations){const s=this.combinations[t];Number(s.number)>=Number(e.number)&&(e.up+=Number(s.count))}}})}getSMPA(){if(this.userService.user&&null!==this.userService.user.username&&this.traderService.trader.dCI!==this.userService.user.currencyId){const e={from:this.traderService.trader.dCI,to:this.userService.user.currencyId,amount:this.traderService.trader.sMPA},t=new n.qP(e);return this.traderService.calculateCurrency(t).then(e=>Math.ceil(100*e)/100)}return new Promise(e=>e(this.traderService.trader.sMPA))}back(e,t,s,i){switch(this.preview=null,this.successBet=null,this.slip=null,this.bookSuccess=!1,this.bookResult={bookingExpireDate:null,bookingRef:null,title:null},this.storageService.local.remove("bookABetPrintStorage"),this.storageService.local.remove("printStorage"),this.ssFb=null,this.betSlipBody.fb=0,this.betSlipBody.bo=0,this.errors.limitErrors.clear(),this.view){case"single":this.traderService.trader.preplayEnabled?this.getAmountsFromApi(s).then(t=>{t&&this.calculatePossibleAmount(null,this.ssFb,this.view,i,s,e,t)}):this.calculatePossibleAmount(null,this.ssFb,this.view,i,s,e);break;case"multi":this.traderService.trader.preplayEnabled?this.getAmountsFromApi(s).then(t=>{t&&this.calculatePossibleAmount(null,this.ssFb,this.view,i,s,e,t)}):this.calculatePossibleAmount(null,this.ssFb,this.view,i,s,e),"d"===e&&t.enable();break;case"system":this.calculateCombinations(e),this.resetAmountsObject()}}betSlipTimeHandler(){o.N.trader.IsIframe||this.cookieService.get("betSlipTime")||this.clearOdds()}get ipSlip(){return this._ipSlip}setIpAmount(){this._ipAmount=this.storageService.session.get("ip")}get ipAmount(){return this._ipAmount}get playErrorsObservable(){return this.playErrors$}get playErrorsObserver(){return this._playErrors}get playErrorList(){return this._playErrorList}get textsTranslates(){return this._textsTranslates}set playErrorList(e){this._playErrorList=e}get validAnte(){return this._validAnte}get validScbb(){return this._validScbb}get validVirtual(){return this._validVirtual}set freeBets(e){this._freeBets=e}set bonuses(e){this._bonuses=e}get freeBets(){return this._freeBets}get bonuses(){return this._bonuses}get promotions(){return this._promotions}setTranslates(){this.translate.get("TEXTS.SYSTEM").subscribe(e=>{this._textsTranslates.SYSTEM=e}),this.translate.get("TEXTS.DATE").subscribe(e=>{this._textsTranslates.DATE=e}),this.translate.get("TEXTS.HOUR").subscribe(e=>{this._textsTranslates.HOUR=e}),this.translate.get("TEXTS.BET_NO").subscribe(e=>{this._textsTranslates.BET_NO=e}),this.translate.get("TEXTS.TOTAL_NUMBER_OF_COUPONS").subscribe(e=>{this._textsTranslates.TOTAL_NUMBER_OF_COUPONS=e}),this.translate.get("TEXTS.TOTAL_BET_COUNTS").subscribe(e=>{this._textsTranslates.TOTAL_BET_COUNTS=e}),this.translate.get("TEXTS.TOTAL").subscribe(e=>{this._textsTranslates.TOTAL=e}),this.translate.get("TEXTS.AND_UP").subscribe(e=>{this._textsTranslates.AND_UP=e}),this.translate.get("TEXTS.BOOKING_CODE").subscribe(e=>{this._textsTranslates.BOOKING_CODE=e}),this.translate.get("TEXTS.MULTI_BET").subscribe(e=>{this._textsTranslates.MULTI_BET=e}),this.translate.get("TEXTS.TOTAL_DEPOSIT").subscribe(e=>{this._textsTranslates.TOTAL_DEPOSIT=e}),this.translate.get("TEXTS.PRINT_COUPON").subscribe(e=>{this._textsTranslates.PRINT_COUPON=e}),this.translate.get("TEXTS.BONUS_AMOUNT").subscribe(e=>{this._textsTranslates.BONUS_AMOUNT=e}),this.translate.get("TEXTS.SINGLE_BET").subscribe(e=>{this._textsTranslates.SINGLE_BET=e}),this.translate.get("TEXTS.SYSTEM_BETS").subscribe(e=>{this._textsTranslates.SYSTEM_BETS=e}),this.translate.get("TEXTS.AND_UP").subscribe(e=>{this._textsTranslates.AND_UP=e}),this.translate.get("TEXTS.BET_TYPE").subscribe(e=>{this._textsTranslates.BET_TYPE=e}),this.translate.get("TEXTS.POSSIBLE_WINNINGS").subscribe(e=>{this._textsTranslates.POSSIBLE_WINNINGS=e}),this.translate.get("TEXTS.TAX_AMOUNT").subscribe(e=>{this._textsTranslates.TAX_AMOUNT=e}),this.translate.get("TEXTS.MULTIBET_BONUS_AMOUNT").subscribe(e=>{this._textsTranslates.MULTIBET_BONUS_AMOUNT=e}),this.translate.get("TEXTS.AMOUNT_TO_PAY").subscribe(e=>{this._textsTranslates.AMOUNT_TO_PAY=e}),this.translate.get("TEXTS.STAKE").subscribe(e=>{this._textsTranslates.STAKE=e}),this.translate.get("TEXTS.CUSTOMER_ID").subscribe(e=>{this._textsTranslates.CUSTOMER_ID=e}),this.translate.get("TEXTS.THIS_IS_NOT_A_REAL_BETSLIP").subscribe(e=>{this._textsTranslates.THIS_IS_NOT_A_REAL_BETSLIP=e})}get selectedOddCount(){return this.selectedOddCount$}get oddRemoved(){return this.oddRemoved$}get readyCouponAmount(){return this.readyCouponAmount$}get slipSideNavAction(){return this.slipSideNavAction$}get acceptChangedForSingle(){return this.acceptChangedForSingle$}get rulesWorked(){return this.rulesWorked$}set calculatedMaximumPayoutAmount(e){this._calculatedMaximumPayoutAmount=e}get calculatedMaximumPayoutAmount(){return this._calculatedMaximumPayoutAmount}get amountActions(){return this.amountActions$}get multiBetBonusRulesMessages(){return this._multiBetBonusRulesMessages}set multiBetBonusRulesMessages(e){this._multiBetBonusRulesMessages=e}get tcknMessage(){return this._tcknMessage}set tcknMessage(e){this._tcknMessage=e}set preview(e){this._preview=e}get preview(){return this._preview}set successBet(e){this._successBet=e}get successBet(){return this._successBet}set ssFb(e){this._ssFb=e}get ssFb(){return this._ssFb}set rpa(e){this._rpa=e}get rpa(){return this._rpa}set reCalcPossibleAmountsForFreebet(e){this._reCalcPossibleAmountsForFreebet=e}get reCalcPossibleAmountsForFreebet(){return this._reCalcPossibleAmountsForFreebet}set amounts(e){this._amounts=e}get amounts(){return this._amounts}set closeNormalMultiPayOutMessage(e){this._closeNormalMultiPayOutMessage=e}get closeNormalMultiPayOutMessage(){return this._closeNormalMultiPayOutMessage}get slip(){return this._slip}set slip(e){this._slip=e}get betSlipBody(){return this._betSlipBody}set betSlipBody(e){this._betSlipBody=e}get view(){return this._view}set view(e){this._view=e}get userView(){return this._userView}set userView(e){this._userView=e}get maximumPayOutError(){return this._maximumPayOutError}set maximumPayOutError(e){this._maximumPayOutError=e}get sMPA(){return this._sMPA}set sMPA(e){this._sMPA=e}get activeOddCount(){return this._activeOddCount}set activeOddCount(e){this._activeOddCount=e}get errors(){return this._errors}set errors(e){this._errors=e}set isNormal(e){this._isNormal=e}get isNormal(){return this._isNormal}set sysInd(e){this._sysInd=e}get sysInd(){return this._sysInd}set bookSuccess(e){this._bookSuccess=e}get bookSuccess(){return this._bookSuccess}set bookResult(e){this._bookResult=e}get bookResult(){return this._bookResult}set systemModels(e){this._systemModels=e}get systemModels(){return this._systemModels}get bankerList(){return this._bankerList}set bankerList(e){this._bankerList=e}get amountsLoader(){return this._amountsLoader}set amountsLoader(e){this._amountsLoader=e}get showBalanceConfirmButton(){return this._showBalanceConfirmButton}set showBalanceConfirmButton(e){this._showBalanceConfirmButton=e}get showIncreaseLimitButton(){return this._showIncreaseLimitButton}set showIncreaseLimitButton(e){this._showIncreaseLimitButton=e}get hideAcceptOddChanges(){return this.traderService.trader.hideAcceptOddChanges}}V.\u0275fac=function(e){return new(e||V)(A.LFG(I.c),A.LFG(B.eN),A.LFG(O.U),A.LFG(M.sK),A.LFG(w._),A.LFG(_.S),A.LFG(P.Y),A.LFG(L.z),A.LFG(N.U),A.LFG(x.B),A.LFG(C.JJ),A.LFG(k.K),A.LFG(F.O),A.LFG(R.F),A.LFG(D.z),A.LFG(C.uU),A.LFG(G.s),A.LFG(U.e),A.LFG($.h))},V.\u0275prov=A.Yz7({token:V,factory:V.\u0275fac,providedIn:"root"})},79658:function(e,t,s){"use strict";s.d(t,{H:function(){return f}});var i=s(49745),r=s(16617),a=s(92221),n=s(17042),o=s(41879),c=s(14844),l=s(72643),d=s(2397),u=s(98995),h=s(41182),m=s(60131),p=s(37290),g=s(7035),b=s(25288),v=function(e,t,s,i){return new(s||(s=Promise))(function(r,a){function n(e){try{c(i.next(e))}catch(t){a(t)}}function o(e){try{c(i.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(n,o)}c((i=i.apply(e,t||[])).next())})};class f{constructor(e,t,s,i,r,a,n,o){this.translateService=e,this.translate=t,this.http=s,this.traderService=i,this.betSlipService=r,this.prerenderService=a,this.decimalPipe=n,this.storage=o}selectedProviderHandler(){const e=this.sportCastCustomBetRequirementsHandler(),t=this.betradarCustomBetRequirementsHandler(),s={scbb:{loaded:!1,typeOfWidget:"iframe",worksWithoutLogin:this.traderService.trader.betbuilderWithoutLogin,messages:null,runMethods:e,showBetbuilderInModal:this.traderService.trader.showBetbuilderInModal},brbb:{loaded:!1,typeOfWidget:"script",worksWithoutLogin:this.traderService.trader.betbuilderWithoutLogin,messages:null,runMethods:t,showBetbuilderInModal:this.traderService.trader.showBetbuilderInModal}};return this.traderService.trader.betbuilderEnabled?this.customBetProvider=s.scbb:this.traderService.trader.betradarBetbuilderEnabled&&(this.customBetProvider=s.brbb),this.customBetProvider}sportCastCustomBetRequirementsHandler(){const e={getIframeSource:t=>{this.launchSportCastIframe(t).subscribe(t=>{e.iframeSouceUrl=`${t.data}&culture=${this.translateService.currentLang.metaLangCode||this.translateService.currentLang.locale}`})},getSportCastCbDetail:t=>{this.getSportCastBetDetail(t).subscribe(t=>{e.getBetDetails=t.data;this.betSlipService.prepareSportCastCustomBetCouponData(this.customBetProvider.sport,this.customBetProvider.season,{type:"single",cI:0,sI:0,fI:0,bI:0,oI:0,sl:1,isVirtual:!1,isPreLive:!0,isLive:!1},e.getBetDetails.betbuilderOdds,Number(this.customBetProvider.fixture.fId))})},hideBBTermsConditionLink:this.traderService.trader.hideBBTermsConditionLink,eventListeners:t=>v(this,void 0,void 0,function*(){t&&(e.callback=s=>v(this,void 0,void 0,function*(){if(t.contentWindow===s.source&&s&&s.data&&"string"==typeof s.data){e.currentEvent=s;const t=JSON.parse(s.data);switch(t.command){case"addToBetslip":e.getSportCastCbDetail(new i.qP(t.marketId))}}}),window.addEventListener("message",e.callback,!1))}),destroyListener:()=>{var t;(null===(t=null==e?void 0:e.currentEvent)||void 0===t?void 0:t.currentTarget)&&e.currentEvent.currentTarget.removeEventListener(e.currentEvent.type,e.callback)},sportCastBetBuilderTermsUrlGenerator:(e,t)=>this.sportCastBetBuilderTermsUrlGenerator(e,t)};return e}sportCastBetBuilderTermsUrlGenerator(e,t){let s;switch(t){case"soccer":case"football":case"baseball":case"basketball":case"american-football":case"rugby":case"cricket":case"aussie-rules":case"ice-hockey":s=!0;break;default:s=!1}return{active:s,uri:`/${e}/contents/betbuilder-terms-condition-${t}`}}betradarCustomBetRequirementsHandler(){const e={odds:"",probability:"",fixtureId:0,calculatedOddsBySystem:"",getFixture:(e,t)=>{const s={matchId:e,path:"getFixture",method:"GET",betradarLangCode:this.translateService.currentLang.betradarLangCode||this.translateService.currentLang.code};this.betradarCBWidgetProxyApiHandler(s,t).subscribe(e=>{t(!1,e)},e=>v(this,void 0,void 0,function*(){const s=yield this.messageParserFromXml(e.error);s&&t({message:s,error_code:e.status})}))},addToBetSlip:(e,t)=>{try{if(e.selectedOutcomes.length>=2){const s=[];e.selectedOutcomes.forEach(e=>{s.push({market_id:e.srMarket.id,outcome_id:e.outcomeId,specifiers:e.srMarket.specifiers})});const r=this.customBetProvider.runMethods,a={odd:r.odds,probability:r.probability,id:r.fixtureId,activeDomain:location.host,selections:s};this.setBRBB(new i.qP(a),t).subscribe(e=>{var s,i;if(null===(i=null===(s=e.data)||void 0===s?void 0:s.betbuilderOdds)||void 0===i?void 0:i.valid){const s={type:e.data.betbuilderOdds.selections.length>1?"multi":"single",cI:0,sI:0,fI:0,bI:0,oI:0,sl:1,isVirtual:!1,isPreLive:!0,isLive:!1},i={odd:this.decimalPipe.transform(e.data.betbuilderOdds.odd,"1.2-2"),fId:this.customBetProvider.fixture.fId,foId:e.data.betbuilderOdds.foId,valid:e.data.betbuilderOdds.valid,selections:e.data.betbuilderOdds.selections};this.betSlipService.prepareBetradarCustomBetCouponData(this.customBetProvider.sport,this.customBetProvider.season,s,i,this.customBetProvider.fixture),t({succeeded:!0})}else t({succeeded:!1,reason:"MESSAGES.BETBUILDER_NOT_VALID"})})}else this.translate.get("MESSAGES.MINIMUM_PLAY_ERROR",{param0:2}).subscribe(e=>t({succeeded:!1,reason:e}))}catch(s){throw s.message||s.error}},calculate:(e,t)=>{var s,i;const r=(null===(s=null==e?void 0:e.selectedOutcomes)||void 0===s?void 0:s.length)>0&&`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n           <filterSelections xmlns="http://schemas.sportradar.com/custombet/v1/endpoints"\n           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n           xsi:schemaLocation="http://schemas.sportradar.com/custombet/v1/endpoints\n           http://schemas.sportradar.com/custombet/v1/endpoints/Selections.xsd">\n           <selection id="${e.matchId}">\n           ${e.selectedOutcomes.map(e=>e.getSelection()).join(" ")}\n           </selection>\n           </filterSelections>`,a={matchId:e,path:"calculate",method:"POST",body:{postContent:r},betradarLangCode:this.translateService.currentLang.betradarLangCode||this.translateService.currentLang.code};(null===(i=null==e?void 0:e.selectedOutcomes)||void 0===i?void 0:i.length)>0&&this.betradarOddsVisibilityHandler(e.selectedOutcomes),this.betradarCBWidgetProxyApiHandler(a,t).subscribe(e=>v(this,void 0,void 0,function*(){(yield this.getProbabilityOnXML(String(e)))&&t(!1,e)}),e=>v(this,void 0,void 0,function*(){const s=yield this.messageParserFromXml(e.error);s&&t({message:s,error_code:e.status})}))},getAvailableMarkets:(e,t)=>{const s={matchId:e,path:"getAvailableMarkets",method:"GET",betradarLangCode:this.translateService.currentLang.betradarLangCode||this.translateService.currentLang.code};this.betradarCBWidgetProxyApiHandler(s,t).subscribe(e=>{t(!1,e)},e=>v(this,void 0,void 0,function*(){const s=yield this.messageParserFromXml(e.error);s&&t({message:s,error_code:e.status},1)}))},getMarkets:(e,t)=>{const s={matchId:e,path:"getMarkets",method:"GET",betradarLangCode:this.translateService.currentLang.betradarLangCode||this.translateService.currentLang.code};this.betradarCBWidgetProxyApiHandler(s,t).subscribe(e=>{t(!1,e)},e=>v(this,void 0,void 0,function*(){const s=yield this.messageParserFromXml(e.error);s&&t({message:s,error_code:e.status})}))},getProfile:(e,t)=>{const s={matchId:e,path:"getProfile",method:"GET",betradarLangCode:this.translateService.currentLang.betradarLangCode||this.translateService.currentLang.code};this.betradarCBWidgetProxyApiHandler(s,t).subscribe(e=>{t(!1,e)},e=>v(this,void 0,void 0,function*(){const s=yield this.messageParserFromXml(e.error);s&&t({message:s,error_code:e.status})}))},initScript:e=>{var t,s,i,r,a,n,o,c,l;(null==e?void 0:e.length)||console.warn("betradar source not found"),this.customBetProvider.loaded=!1,t=window,s=document,i="script",r=e,a="SIR",n={theme:!1,language:this.translateService.currentLang.betradarLangCode||this.translateService.currentLang.code,oddsType:"eu"},t[a]||((l=t[a]=()=>{(t[a].q=t[a].q||[]).push(arguments)}).l=1*Number(new Date),l.o=n,o=s.createElement(i),c=s.getElementsByTagName(i)[0],o.async=1,o.src=r,o.setAttribute("n",a),c.parentNode.insertBefore(o,c))},setSIR:(t,s)=>{let i=!0;"m"===this.storage.local.get("device")&&this.traderService.trader.showBetbuilderInModal&&(i=!1),setTimeout(()=>{SIR("addWidget",".sr-widget-cb","customBet",{matchId:t,useClientTheming:!0,isInline:i,dataProviderConfig:{getFixture:e.getFixture,getMarkets:e.getMarkets,calculate:e.calculate,getAvailableMarkets:e.getAvailableMarkets,getProfile:e.getProfile,addToBetSlip:e.addToBetSlip}}),e.fixtureId=s,this.customBetProvider.loaded=!0},1500)},destroySIRWidget:()=>{try{SIR("removeWidget",".sr-widget-cb"),this.brbbShowOddsHandlerTimer&&clearInterval(this.brbbShowOddsHandlerTimer)}catch(e){throw e.message}}};return e}betradarWidgetScriptSourceHandler(e,t){const s=(null==e?void 0:e.length)?e.find(e=>"BetradarMatchTrackerV3"===e.parameter):null;return(null==s?void 0:s.value)?s.value.replace("<CLIENTID>",t):""}sportCastTermsUrlGenerator(e,t){let s;switch(t){case"soccer":case"football":case"baseball":case"basketball":case"american-football":case"rugby":case"cricket":case"aussie-rules":case"ice-hockey":s=!0;break;default:s=!1}return{active:s,uri:`/${e}/contents/betbuilder-terms-condition-${t}`}}sportCastRulesChecker(){return this.customBetProvider.worksWithoutLogin||this.customBetProvider.user?{show:!1,type:null,message:null}:{show:!0,type:"info",message:"MESSAGES.LOGIN_TO_CONTINUE"}}generateBetTypeGroupMarketElement(){const e={id:-5,text:""};this.translate.get("TEXTS.BUILD_BET").subscribe(t=>{return s=e,i={text:t},Object.assign(Object.assign({},s),i);var s,i})}setCustomBetOnFixtureHandler(e){try{e.hasCustomBetProvider=!1,(this.traderService.trader.betbuilderEnabled&&e.sBFId||this.traderService.trader.betradarBetbuilderEnabled&&e.brbb)&&(e.hasCustomBetProvider=!0)}catch(t){console.error("exception on setCustomBetOnFixtureHandler----\x3e",t)}}betradarCBWidgetApiHandler(e,t){const s=this.prerenderService.getUrl(e,"custom-bet",!0);return this.http.get(s).pipe((0,o.U)(e=>e),(0,c.K)(e=>(t({message:e.subscribe(e=>e.body),error_code:"400"}),e)))}betradarCBWidgetProxyApiHandler(e,t){let s="";const i=`/${this.translateService.currentLang.code}/custom-bet/${e.path}`;switch(e.path){case"getMarkets":s=`${i}`;break;case"getProfile":s=`${i}/${e.matchId.teamId}`;break;case"calculate":s=`${i}`;break;default:s=`${i}/${e.matchId.matchId}`}if("POST"===e.method){const t={headers:new a.WM({"Content-Type":"application/xml;charset=utf-8"})};return this.http.post(s,e.body.postContent,{headers:t.headers,responseType:"text"}).pipe((0,o.U)(e=>e),(0,c.K)(e=>(0,n._)(e)))}return this.http.get(s,{responseType:"text"}).pipe((0,o.U)(e=>e),(0,c.K)(e=>(0,n._)(e)))}launchSportCastIframe(e){return this.http.post(`${r.N.apiEndpoint}/api/user/launchBetBuilderWidget`,e)}getSportCastBetDetail(e){return this.http.post(`${r.N.apiEndpoint}/api/user/betbuilder/getBetDetails`,e)}setBRBB(e,t){return this.http.post(`${r.N.apiEndpoint}/betbuilder/set-betbuilder`,e).pipe((0,o.U)(e=>(e.success||t({succeeded:!1,reason:this.translate.get(`MESSAGES.${null==e?void 0:e.responseCodes[0].responseKey}`).subscribe(e=>t({succeeded:!1,reason:e}))}),e)),(0,c.K)(e=>(t({succeeded:!1,reason:e.subscribe(e=>e.body)}),e)))}calculateMargin(e){return this.http.post(`${r.N.apiEndpoint}/betbuilder/calculate-margin`,e).pipe((0,o.U)(e=>e),(0,c.K)(e=>e))}getProbabilityOnXML(e){return v(this,void 0,void 0,function*(){try{const t=/(odds=)("[^"]+").(probability=)("[^"]+")/,s=/\d+\.?\d*/,i=e.match(t),r=i[2].match(s),a=i[4].match(s),n=this.customBetProvider.runMethods;return n.odds=r[0],n.probability=a[0],n}catch(t){throw t.error}})}betradarOddsVisibilityHandler(e){if((null==e?void 0:e.length)<2)this.brbbShowOddsHandlerTimer=setInterval(()=>{const e=document.querySelector(".sr-cb-bet-builder-odds__wrapper");e&&e.classList.add("hide")},50);else{const e=setInterval(()=>{const t=document.querySelector(".sr-cb-bet-builder-odds__wrapper");t&&(clearInterval(this.brbbShowOddsHandlerTimer),clearInterval(e),t.classList.contains("hide")&&t.classList.remove("hide"))},50)}}setOddsToXML(e,t){return v(this,void 0,void 0,function*(){try{const s=(new DOMParser).parseFromString(e,"application/xml");return s.getElementsByTagName("calculation")[0].getAttributeNode("odds").nodeValue=t,s.children[0].outerHTML}catch(s){throw console.error("setOddsToXML-----\x3eexception",s),s.error}})}messageParserFromXml(e){return v(this,void 0,void 0,function*(){try{const t=(new DOMParser).parseFromString(e,"application/xml");return t.getElementsByTagName("response")[0].textContent}catch(t){throw console.error("getMessageFromXml-----\x3eexception",t),t.error}})}set customBetProvider(e){this._customBetProvider=e}get customBetProvider(){return this._customBetProvider}}f.\u0275fac=function(e){return new(e||f)(l.LFG(d.c),l.LFG(u.sK),l.LFG(a.eN),l.LFG(h._),l.LFG(m.V),l.LFG(p.$),l.LFG(g.JJ),l.LFG(b.S))},f.\u0275prov=l.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"})},88634:function(e,t,s){"use strict";s.d(t,{s:function(){return o}});var i=s(89166),r=s(72643),a=s(33485),n=s(41182);class o{constructor(e,t){this.modalService=e,this.traderService=t,this._numbers=[],this._existingControl=!1,this.increasingFloatIndex=0,this.containsSetted=!1,this.numPadAmount=0,this.floating=!1,this._cNumPadAmountChanged=new i.Subject,this.cNumPadAmountChanged$=this._cNumPadAmountChanged.asObservable(),this._cNumPadModal=new i.Subject,this.cNumPadModal$=this._cNumPadModal.asObservable(),this._alreadyAmounts=[],this._numbers=[...Array(10).keys()],this._numbers.push(this._numbers.shift()),this.traderService.trader&&this.traderService.trader.taMBQAM?this._alreadyAmounts=this.traderService.trader.taMBQAM.split(",").map(Number):this._alreadyAmounts=[1,5,10,25,50,100],this._retrySet=!1,this._useServiceAmount=!1}openNumPadModal(e,t,s,i,r){this._playingType=e,this.selectedOdds=t,this._singleOdd=s,this._amounts=r,this.sysModel=i,this.findAmountOfType(e,r,s,t),this.modalService.modalObserver.next();const a=e=>{e.preventDefault()};this._cNumPadModal.next(!0),setTimeout(()=>{window.addEventListener("selectstart",a)})}findAmountOfType(e,t,s,i){switch(e){case"single":s&&s.amount?(this.singlePerAll=!1,this._retrySet=!0,this.numPadAmount=s.amount,this._cNumPadAmountChanged.next({action:"retry",amount:s.amount,playType:e,decimalAmount:0,fromAlreadyAmount:!1})):s&&!s.amount?(this.singlePerAll=!1,this._existingControl=!0,this.numPadAmount=s.amount):"single"===e&&!s&&i.length&&t.allSingle&&(this._retrySet=!0,this.singlePerAll=!0,this.numPadAmount=t.allSingle,this._cNumPadAmountChanged.next({action:"retry",amount:t.allSingle,playType:e,decimalAmount:0,fromAlreadyAmount:!1}));break;case"multi":t.multibet&&(this._retrySet=!0,this.numPadAmount=t.multibet,this._cNumPadAmountChanged.next({action:"retry",amount:t.multibet,playType:e,decimalAmount:0,fromAlreadyAmount:!1}));break;case"system":t.systemCost&&(this._retrySet=!0);break;case"fastBet":t.instantPlayAmount&&this._cNumPadAmountChanged.next({action:"retry",amount:t.instantPlayAmount,playType:e,decimalAmount:0,fromAlreadyAmount:!1})}}closeModal(){this._cNumPadModal.next(!1)}get numbers(){return this._numbers}set numbers(e){this._numbers=e}get alreadyAmounts(){return this._alreadyAmounts}set alreadyAmounts(e){this._alreadyAmounts=e}get cNumPadAmountChanged(){return this.cNumPadAmountChanged$}get cNumPadModal(){return this.cNumPadModal$}get amounts(){return this._amounts}set amounts(e){this._amounts=e}get playingType(){return this._playingType}set playingType(e){this._playingType=e}get singleOdd(){return this._singleOdd}set singleOdd(e){this._singleOdd=e}get retrySet(){return this._retrySet}set retrySet(e){this._retrySet=e}get useServiceAmount(){return this._useServiceAmount}set useServiceAmount(e){this._useServiceAmount=e}set existingControl(e){this._existingControl=e}get existingControl(){return this._existingControl}get singlePerAll(){return this._singlePerAll}set singlePerAll(e){this._singlePerAll=e}}o.\u0275fac=function(e){return new(e||o)(r.LFG(a.F),r.LFG(n._))},o.\u0275prov=r.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})},56497:function(e,t,s){"use strict";s.d(t,{$:function(){return c}});var i=s(7035),r=s(16617),a=s(72643),n=s(2397),o=s(25288);class c{constructor(e,t,s){this.dom=e,this.translateFactory=t,this.storage=s,this.scripts={},this.ScriptStore=[{name:"ottcc",src:"https://s.emerchantpay.com/ottcc-emp.min.js"},{name:"niubiz",src:"https://static-content.vnforapps.com/elements/v1/payform.min.js",reload:!0},{name:"kkiapay",src:"https://cdn.kkiapay.me/k.js"},{name:"esaGames",src:this.resolveEsaGamesScript(r.N.trader)},{name:"betBooster",src:"https://betbooster-widget.lvision.io/v2/staging/bundle-es5.js"},{name:"checkin",src:"https://eightstorm.regily.com/d9708c106ad3b9b31fe90c234768dd41.js"},{name:"esaGames",src:this.resolveEsaGamesScript(r.N.trader)}],this.ScriptStore.forEach(e=>{this.scripts[e.name]={loaded:!1,src:e.src,name:e.name,reload:e.reload}}),this.langList=r.N.trader.langList,this.currentLang=this.translateFactory.currentLang.code}resolveEsaGamesScript(e){return e.isSportingTechTrader?"https://esagames-milan.esagaming.com/js/ESGLobby.js":"casinoqa"===e.name?"https://test.esagaming.it/ESGLobby.js":r.N.esaGamingScript}load(...e){const t=[];return e.forEach(e=>t.push(this.loadScript(e))),Promise.all(t)}loadScript(e,t,s){return new Promise((i,r)=>{if(!this.scripts[e].loaded||this.scripts[e].reload){let r=document.createElement("script");r.type="text/javascript",r.src=s||this.scripts[e].src,r.readyState?r.onreadystatechange=()=>{"loaded"!==r.readyState&&"complete"!==r.readyState||(r.onreadystatechange=null,this.scripts[e].loaded=!0,i({script:e,loaded:!0,status:"Loaded"}))}:r.onload=()=>{this.scripts[e].loaded=!0,i({script:e,loaded:!0,status:"Loaded"})},r.onerror=t=>i({script:e,loaded:!1,status:"Loaded"}),t?t.document.getElementsByTagName("head")[0].appendChild(r):document.getElementsByTagName("head")[0].appendChild(r)}else i({script:e,loaded:!0,status:"Already Loaded"})})}setCanonicalURL(e){let t;this.clearLinks(),"promotions"===e.params.slug?t=this.dom.URL.split("?")[0]:e.params.cId&&e.params.sId&&e.params.stId?t=this.dom.URL.split(`${e.params.cId}`)[0]:e.params.cSURL&&e.params.stSURL&&(t=this.dom.URL.split(`${e.params.cSURL}`)[0]),Object.keys(this.langList).forEach(e=>{const s=this.dom.createElement("link"),i=null==t?this.dom.URL:t;this.dom.head.appendChild(s),this.setAttributes(s,e,i)})}clearLinks(){let e=document.getElementsByTagName("link");for(let t=e.length-1;t>=0;t--)"alternate"!==e[t].rel&&"canonical"!==e[t].rel||e[t].parentNode.removeChild(e[t])}setAttributes(e,t,s){return t===this.currentLang?(e.setAttribute("rel","canonical"),e.setAttribute("href",s)):(e.setAttribute("rel","alternate"),e.setAttribute("hreflang",t),e.setAttribute("href",s.replace("/"+this.currentLang,"/"+t))),e}setPaymentIqJscardencrypterUrl(){return new Promise((e,t)=>{if(this.storage.session.get("paymentIqMethods")){this.merchantId=this.storage.session.get("paymentIqMethods").merchantId;let s={name:"jscardencrypter",src:`https://api.paymentiq.io/paymentiq/api/viq/jscardencrypter/${this.merchantId}`};this.ScriptStore.push(s),this.scripts.jscardencrypter={loaded:!1,src:s.src,name:s.name},this.loadScript("jscardencrypter").then(t=>{e(t)}).catch(e=>{t(e)})}else t("paymentIqMethods Session Storage is missing")})}}c.\u0275fac=function(e){return new(e||c)(a.LFG(i.K0),a.LFG(n.c),a.LFG(o.S))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})},98620:function(e,t,s){"use strict";s.d(t,{u:function(){return o}});var i=s(33452),r=s(87383),a=s(76857),n=s(72643);class o{constructor(){this._fastBetIsOpen=new r.X(!1),this.fastBetIsOpen$=this._fastBetIsOpen.asObservable(),this.changeFastBetAmount=new a.xQ,this._isFastBetEnabled=new r.X(!1),this.isFastBetEnabled$=this._isFastBetEnabled.asObservable(),this.fastBetForm=new i.cw({instantAmount:new i.NI,ar:new i.NI,ad:new i.NI})}closeFastBet(){this._fastBetIsOpen.next(!1)}openFastBet(){this._fastBetIsOpen.next(!0)}disableFastBet(){this._isFastBetEnabled.next(!1)}enableFastBet(){this._isFastBetEnabled.next(!0)}}o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=n.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})},11056:function(e,t,s){"use strict";s.d(t,{e:function(){return d}});var i=s(89166),r=s(16617),a=s(72643),n=s(2397),o=s(46627),c=s(25288),l=s(55209);class d{constructor(e,t,s,r){this.translateFactory=e,this.router=t,this.storage=s,this.userService=r,this.iframeSlipMessages={},this._externalSlipClosed=new i.Subject,this.externalSlipClosed$=this._externalSlipClosed.asObservable(),window.addEventListener("message",e=>{this.messageParser(e)})}betSlipUserTabClassHandler(e){r.N.trader.IsIframe&&(e?document.getElementById("bet-slip-master")&&!document.getElementById("bet-slip-master").classList.contains("scrll")&&setTimeout(()=>{document.getElementById("bet-slip-master").classList.add("scrll")},500):document.getElementById("bet-slip-master")&&document.getElementById("bet-slip-master").classList.contains("scrll")&&setTimeout(()=>{document.getElementById("bet-slip-master").classList.remove("scrll")},500))}openMobileExternalSlip(e){if(!r.N.trader.IsIframe)return;if(e&&!document.getElementById("btslpSld").classList.contains("opened"))return;const t=document.getElementsByTagName("body")[0];document.getElementById("btslpSld").classList.contains("opened")?(document.getElementById("btslpSld").classList.remove("opened"),document.getElementById("btslpSld").style.top="100%",this.betSlipOpened=!1,this._externalSlipClosed.next(!0),t.style.overflow="visible"):(this.betSlipOpened=!0,document.getElementById("btslpSld").classList.add("opened"),document.getElementById("btslpSld").style.top="0",document.getElementById("btslpSld").style.height="100%",t.style.overflow="hidden",this.couponFooterFixRePositionOnIos(),this.scrollTop())}couponTypedBetslipContainerRepositionOnIos14(){if(!this.isApple14&&!this.isApple&&!r.N.trader.IsIframe)return;const e=setInterval(()=>{const t=document.querySelector(".bslp-cnt");t&&(clearInterval(e),t&&!t.classList.contains("new-height-for-ios14")&&t.classList.add("new-height-for-ios14"))},50)}couponFooterFixRePositionOnIos(){if(!this.isApple&&!r.N.trader.IsIframe)return;const e=setInterval(()=>{const t=document.querySelector(".coupon-footer-fix");t&&(clearInterval(e),this.isChrome?t&&!t.classList.contains("pad-bottom-chrome")&&t.classList.add("pad-bottom-chrome"):this.isApple14?t&&!t.classList.contains("pad-bottom-apple14")&&t.classList.add("pad-bottom-apple14"):t&&!t.classList.contains("pad-bottom")&&t.classList.add("pad-bottom"))},50)}customNumpadRePositionOnIos(){if(!this.isApple&&!r.N.trader.IsIframe)return;const e=setInterval(()=>{const t=document.getElementById("cNumpad");t&&(clearInterval(e),this.isChrome?t&&!t.classList.contains("pad-bottom-chrome")&&t.classList.add("pad-bottom-chrome"):this.isApple14?t&&!t.classList.contains("pad-bottom-apple14")&&t.classList.add("pad-bottom-apple14"):t&&!t.classList.contains("pad-bottom")&&t.classList.add("pad-bottom"))},50)}bodyOpenOverflowHandler(){r.N.trader.IsIframe&&(document.getElementsByTagName("body")[0].style.overflow="scroll")}sendBetItem(e){"pgsb-con"===window.name&&r.N.trader.IsIframe&&parent.postMessage(JSON.stringify({messageType:"odd:count",messageData:e}),"*")}slipClosed(){"pgsb-con"===window.name&&r.N.trader.IsIframe&&parent.postMessage(JSON.stringify({messageType:"slip:closed",messageData:!0}),"*")}customNumpadPositionHandler(){const e=setInterval(()=>{const t=document.getElementById("cNumpad").scrollHeight;t&&(clearInterval(e),parent.postMessage(JSON.stringify({messageType:"scrollTo:bottomOfPage",messageData:t}),"*"))},100)}callMainHeight(){"pgsb-con"===window.name&&r.N.trader.IsIframe&&parent.postMessage(JSON.stringify({messageType:"call:mainHeight",messageData:null}),"*")}confirmSlip(e){"pgsb-con"===window.name&&r.N.trader.IsIframe&&parent.postMessage(JSON.stringify({messageType:"slip:confirm",messageData:e}),"*")}playSlip(e){"pgsb-con"===window.name&&r.N.trader.IsIframe&&parent.postMessage(JSON.stringify({messageType:"slip:play",messageData:e}),"*")}scrollTop(){r.N.trader.IsIframe&&parent.postMessage(JSON.stringify({messageType:"window:scrollTop",messageData:null}),"*")}bodyStyle(){if(r.N.trader.IsIframe){const e=document.getElementsByTagName("body")[0];e.classList.contains("ifr-trd")||(e.classList.add("ifr-trd"),r.N.trader.useIframeMobileBottomMenu&&(e.style.paddingBottom="56px"))}}heightForCustomNumpad(){parent.postMessage(JSON.stringify({messageType:"modal:open",messageData:this.mainWindowHeight}),"*")}bodyHeight(e){if("pgsb-con"===window.name&&r.N.trader.IsIframe){const t=document.getElementsByTagName("body")[0].clientHeight;parent.postMessage(JSON.stringify({messageType:"content:height",messageData:e||t}),"*")}}countRequest(e){r.N.trader.IsIframe&&("m"===e||setTimeout(()=>{this.bodyHeight()},1500))}showSnackbar(e,t){parent.postMessage(JSON.stringify({messageType:"snackbar:show",messageData:{content:e,type:t}}),"*")}specificRouteRedirect(e){if(e&&e.route){const t="bet",s="sports",i=e.language,r="m"===this.storage.local.get("device");if("object"==typeof e.route){const a="param",n=e.route.page;let o=0,c=[];for("dashboard"===n?c=[i,n]:"main"===n?c=r?[i]:[i,t,n]:r&&"league"===n?c=[i,t,s]:r||"league"!==n?"league"!==n&&(c=[i,t,n]):c=[i,t];o<8;){const t=`${a}${o}`;e.route.hasOwnProperty(t)&&c.push(e.route[t]),o++}this.router.navigate(c)}}}addOdd(e){"pgsb-con"===window.name&&r.N.trader.IsIframe&&parent.postMessage(JSON.stringify({messageType:"odd:add",messageData:e}),"*")}removeOdd(e){"pgsb-con"===window.name&&r.N.trader.IsIframe&&parent.postMessage(JSON.stringify({messageType:"odd:remove",messageData:e}),"*")}clearOdds(){"pgsb-con"===window.name&&r.N.trader.IsIframe&&parent.postMessage(JSON.stringify({messageType:"slip:clearOdds",messageData:null}),"*")}externalTraderNavigation(e){"pgsb-con"===window.name&&r.N.trader.IsIframe&&parent.postMessage(JSON.stringify({messageType:"main-navigate",messageData:e}),"*")}openModalWithIframeConfig(e){setTimeout(()=>{r.N.trader.IsIframe&&document.getElementById(e)&&(document.getElementById(e).style.top="2%")},300)}messageParser(e){if(r.N.trader.IsIframe&&e&&e.data&&"string"==typeof e.data&&!e.data.match("webpack")){const t=JSON.parse(e.data);if(t)switch(t.messageType){case"content:height":this.bodyHeight(t.messageData);break;case"pgsb:login":break;case"pgsb:logout":t.messageData.token;break;case"pgsb:openSlip":this.openMobileExternalSlip();break;case"pgsb:languageChange":t.messageData;break;case"pgsb:navigateToPath":this.specificRouteRedirect(t.messageData);break;case"mainWindow:height":this.mainWindowHeight=t.messageData;break;case"mainWindow:resize":this.countRequest(this.storage.local.get("device"))}}}get isChrome(){return this._isChrome}set isChrome(e){this._isChrome=e}get isApple14(){return this._isApple14}set isApple14(e){this._isApple14=e}get isApple(){return this._isApple}set isApple(e){this._isApple=e}get betSlipOpened(){return this._betSlipOpened}set betSlipOpened(e){this._betSlipOpened=e}get mainWindowHeight(){return this._mainWindowHeight}set mainWindowHeight(e){this._mainWindowHeight=e}}d.\u0275fac=function(e){return new(e||d)(a.LFG(n.c),a.LFG(o.F0),a.LFG(c.S),a.LFG(l.Y))},d.\u0275prov=a.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})},33263:function(e,t,s){"use strict";s.d(t,{X:function(){return p}});var i=s(17276),r=s(16617),a=s(92717),n=s(7035),o=s(72643),c=s(61583),l=s(25288),d=s(60664),u=s(2397),h=function(e,t,s,i){return new(s||(s=Promise))(function(r,a){function n(e){try{c(i.next(e))}catch(t){a(t)}}function o(e){try{c(i.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(n,o)}c((i=i.apply(e,t||[])).next())})};const m=i;class p{constructor(e,t,s,i,a,n){this.metaService=e,this.storageService=t,this.title=s,this.meta=i,this._document=a,this.translateFactory=n,this.device="d",this.inProgress=!1,this.code="generic",this.names=["name=description","name=keywords","name=author"],this.trader=r.N.trader,this.setMetaHTMLLangAttribute()}setMeta(e,t){return h(this,void 0,void 0,function*(){const s=this.storageService.local.get("device")||"d";this.clearMeta(),this.title.setTitle("");const i=yield this.metaService.getTraderPages(),r=i.find(t=>t.pageCode===e&&t.device==s),a=i.find(e=>e.pageCode===this.code&&e.device==s);if(r&&this.getPageStatus(r,t,s)&&!a)return this.page=this.parseMetadata(r),void this.setPageMeta(this.page);if(a&&this.getGenericStatus(a,t,s)&&!r)return this.page=this.parseMetadata(a),void this.setPageMeta(this.page);if(r&&this.getPageStatus(r,t,s)&&a&&this.getGenericStatus(a,t,s)){this.page=this.parseMetadata(r);const e=this.parseMetadata(a);return this.page.metas=this.page.metas.concat(e.metas),void this.setPageMeta(this.page)}})}setMetaHTMLLangAttribute(){this.translateFactory.currentLang.metaLangCode?this._document.documentElement.lang=this.mapMetaLang(this.translateFactory.currentLang.code):this._document.documentElement.lang=this.translateFactory.currentLang.code}mapMetaLang(e){const t={ptb:"pt-BR"};return t[e]?t[e]:e}setPageMeta(e){this.title.setTitle(e.title),this.meta.addTags(e.metas)}getPageStatus(e,t,s){return!(!(0,a.Z)(e.languageId,t)||!(0,a.Z)(e.device,s))||!!(0,a.Z)(e.languageId,t)}getGenericStatus(e,t,s){return!(!(0,a.Z)(e.languageId,t)||!(0,a.Z)(e.device,s))}clearMeta(){for(const e of this.names)this.meta.removeTag(e)}parseMetadata(e){e.metas=[];const t=new RegExp(/(<title[^>]*>[^<]*<\/title\s?>)|(<meta[^>]*>)|(<link[^>]*>)/,"g"),s=new RegExp(/(<script[^>]*>[^<]*<\/script\s?>)/,"g"),i=/\s?([a-zA-Z|a-zA-Z\-]*)=["\u201c]([^"\u201d]*)["\u201d]/,r=e.mainMeta,a=r.match(t),n=r.match(s);let o="";if(n){n.forEach(e=>{o+=e});const e=m(o);for(let t=0;t<n.length;t++){const s=document.createElement("script");s.type="text/javascript",e[t].innerHTML&&(s.innerHTML=e[t].innerHTML,document.getElementsByTagName("head")[0].appendChild(s)),(e[t].getAttribute("src")&&!this.trader.checkMetaScriptsLoaded||e[t].getAttribute("src")&&!this.isScriptLoaded(e[t].getAttribute("src")))&&(s.src=e[t].getAttribute("src"),document.getElementsByTagName("head")[0].appendChild(s))}}return a&&a.forEach(t=>{if(t.startsWith("<title")){const s=/>([^<]*)</.exec(t);e.title=s[1]}else{const s=new RegExp(/\s?([a-zA-Z|a-zA-Z\-]*)=["\u201c]([^"\u201d]*)["\u201d]/,"g"),r=t.match(s).map(e=>{const t=i.exec(e),s={};return s[t[1]]=t[2],s});if(t.startsWith("<link")){const e=document.createElement("LINK");t.match(s).map(t=>{const s=i.exec(t);e.setAttribute(s[1],s[2])});document.getElementsByTagName("head")[0].appendChild(e)}else{const t={};r.forEach(e=>{Object.assign(t,e)}),e.metas.push(t)}}}),e}isScriptLoaded(e){const t=document.getElementsByTagName("script");for(let s=t.length;s--;)if(t[s].src===e)return!0;return!1}}p.\u0275fac=function(e){return new(e||p)(o.LFG(c.J),o.LFG(l.S),o.LFG(d.Dx),o.LFG(d.h_),o.LFG(n.K0),o.LFG(u.c))},p.\u0275prov=o.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})},61583:function(e,t,s){"use strict";s.d(t,{J:function(){return o}});var i=s(16617),r=s(72643),a=s(92221),n=s(25288);class o{constructor(e,t){this.http=e,this.storage=t,this.inProgress=!1,this._traderPages=[]}getTraderPages(){return new Promise((e,t)=>{if(this.inProgress){const t=setInterval(()=>{if(!this.inProgress)return clearInterval(t),void e(this._traderPages)},1e3);return}if(this._traderPages.length)return void e(this._traderPages);const s=[];this.inProgress=!0,this.http.get(`${i.N.apiEndpoint}/api/generic/getTraderPages/${window.location.host}/${this.storage.local.get("device")}/${String(this.storage.local.get("languageId")||i.N.trader.defaultLang.id)}`).subscribe(t=>{t.data.forEach(e=>{e.metas&&e.metas.length&&s.push({languageId:e.languageId,device:e.device,mainMeta:e.metas,metas:[],title:null,pageCode:e.traderPageMaster.pageCode})}),this.inProgress=!1,this._traderPages=s,e(this._traderPages)},e=>{this.inProgress=!1,t([])})})}}o.\u0275fac=function(e){return new(e||o)(r.LFG(a.eN),r.LFG(n.S))},o.\u0275prov=r.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})},33485:function(e,t,s){"use strict";s.d(t,{F:function(){return a}});var i=s(76857),r=s(72643);class a{constructor(){this.modalObserver=new i.xQ,this.modalActionsObserver=new i.xQ}emitModalActions(e){this.modalActionsObserver.next(e)}}a.\u0275fac=function(e){return new(e||a)},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})},96842:function(e,t,s){"use strict";s.d(t,{W:function(){return m}});var i=s(76857),r=s(16617),a=s(92717),n=s(55714),o=s(86709),c=s(72643),l=s(92221),d=s(73386),u=s(7035),h=s(25288);class m{constructor(e,t,s,r){this.http=e,this.handler=t,this.decimalPipe=s,this.storage=r,this.activeOddFormatSubject=new i.xQ}activeOddFormatObserver(){return this.activeOddFormatSubject.asObservable()}fetchOddsFormats(){return new Promise((e,t)=>{this.http.get(`${r.N.apiEndpoint}/api/generic/getTraderOddDisplayTypes/${window.location.host}`).subscribe(t=>{this._oddsFormats=t.data,e(t.data)},e=>{t(this.handler.handle(e.error||""))})})}getActiveOddsFormat(){if(this._activeOddFormat)return this.activeOddFormatSubject.next(this._activeOddFormat),this._activeOddFormat;{const e=this._oddsFormats.sort((e,t)=>e.orderBy-t.orderBy)[0],t=this.storage.local.get("oddsFormat")||e.oddDisplayTypeId;return this._activeOddFormat=this._oddsFormats.find(e=>e.oddDisplayTypeId===Number(t)),this.activeOddFormatSubject.next(this._activeOddFormat),this.aOFI=this._activeOddFormat.oddDisplayTypeId,this._activeOddFormat.oddDisplayTypeId}}setActiveOddsFormat(e){const t=Number(this.storage.local.get("oddsFormat"));if((0,a.Z)(e.oddDisplayTypeId,t))return;const s=this._oddsFormats.find(t=>t.oddDisplayTypeId===e.oddDisplayTypeId);s||(this._activeOddFormat=this._oddsFormats.find(e=>1===e.oddDisplayTypeId)),this.aOFI=s.oddDisplayTypeId,this.activeOddFormatSubject.next(s),this.storage.local.set("oddsFormat",s.oddDisplayTypeId)}normalize(e){return e.length>6?(e=Number(e.replace(/\,/g,"")),!0):(e=Number(e),!isNaN(e)&&(!!(0,n.Z)(e)&&(!(0,o.Z)(e)&&!!e)))}reduce(e,t){const s=new Array(2),i=this.gcd(e,t);return s[0]=e/i,s[1]=t/i,s}gcd(e,t){let s,i;if(t>e)s=t,i=e;else if(e>t)s=e,i=t;else if(e==t)return e;for(;0!==i;){let e=i;i=s%i,s=e}return s}decimalToAmerican(e){if(this.normalize(e))return"string"==typeof e&&(e=e.replace(/,/g,"")),(e=Number(e))>=2?"+"+(100*(e-1)).toFixed(0):1===e?e:"-"+(100/(e-1)).toFixed(0)}decimalToFractional(e){if(!this.normalize(e))return;"string"==typeof e&&(e=e.replace(/,/g,""));let t=1e4*((e=parseFloat(e).toFixed(2))-1),s=1e4;t=Math.round(t),s=Math.round(s);const i=this.reduce(t,s);return t=i[0],s=i[1],t+"/"+s}decimalToHongKong(e){if(this.normalize(e))return"string"==typeof e&&(e=e.replace(/,/g,"")),((e=Number(e))-1).toFixed(2)}decimalToMalay(e){if(this.normalize(e))return"string"==typeof e&&(e=e.replace(/,/g,"")),e=Number(e),(e*=1)>=2?(-1/(e-1)).toFixed(4):(e-1).toFixed(4)}decimalToIndonesian(e){if(this.normalize(e))return"string"==typeof e&&(e=e.replace(/,/g,"")),(e=Number(e))>=2?(e-1).toFixed(2):1===e?e:(-1/(e-1)).toFixed(2)}formatter(e){if(!this.normalize(e))return;let t=e;switch(Number(this.aOFI)){case 2:t=this.decimalToFractional(t);break;case 3:t=this.decimalToAmerican(t);break;case 4:t=this.decimalToHongKong(t);break;case 5:t=this.decimalToMalay(t);break;case 6:t=this.decimalToIndonesian(t)}return t}}m.\u0275fac=function(e){return new(e||m)(c.LFG(l.eN),c.LFG(d.t),c.LFG(u.JJ),c.LFG(h.S))},m.\u0275prov=c.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"})},37290:function(e,t,s){"use strict";s.d(t,{$:function(){return l}});var i=s(16617),r=s(72643),a=s(41182),n=s(25288),o=s(2397),c=s(90137);class l{constructor(e,t,s,r){this.traderService=e,this.storageService=t,this.translateFactory=s,this.asianViewService=r,this._device=this.storageService.local.get("device"),this._prefix="/api-v2",this._trader=i.N.trader.name,this._bragi=this.traderService.trader.tBU,this._bragiAntepostForBetgenius=this.traderService.trader.bragiBetradarUrlForGenius,this._language=this.storageService.local.get("languageId")||this.translateFactory.currentLang.id}getRootPath(e){return`${this._prefix}/${e}/${this._device}/${this._language}/${this._trader}`}getUrl(e,t,s){e&&e.requestBody&&this.traderService.trader.asianView&&(e.requestBody.asianView=this.asianViewService.isAsianView,"fixture-detail"===t&&(e.requestBody.asianShowMore=this.asianViewService.isAsianView));const i=this.getRootPath(t),r=Object.assign({},e.requestBody),a=Object.keys(r);let n=i;const o=JSON.stringify(e),c=btoa(o);return a.forEach(e=>{null!=e?Array.isArray(r[e])?n+="/"+r[e].join("-"):n+="/"+r[e]:n+="/any"}),e.requestBody||(e.requestBody={}),e.requestBody.bragiUrl=this._bragi,!s&&this.traderService.trader.enableOutrightsForGenius&&"antepost-fixture-for-betgenius"===t&&(e.requestBody.bragiAntepostForBetgenius=this._bragiAntepostForBetgenius),s?`${n}/${c}`:n}getOrderUrl(e,t,s){t.antePostEvent?t.antePostEvent="ante":t.antePostEvent="no-ante",this.traderService.trader.uofEnabled&&(t.betTypeGroupLimit||(t.betTypeGroupLimit=2),e.requestBody.betTypeGroupLimit=t.betTypeGroupLimit),this.traderService.trader.asianView&&(e.requestBody.asianView=this.asianViewService.isAsianView),t.asianView=!!this.asianViewService.isAsianView;const i=Object.assign({},t),r=[{name:"stN",order:1},{name:"cN",order:2},{name:"seaN",order:3}].sort((e,t)=>e.order-t.order),a=this.traderService.trader.uofEnabled?t.betTypeGroupLimit:"null";let n="/null/";e.requestBody.timeRangeInHours&&(n="/"+e.requestBody.timeRangeInHours+"/");let o=this.getRootPath(s)+n+t.asianView+"/"+t.antePostEvent+"/"+a;return r.forEach(e=>{const t=i[e.name];null!=t&&(o+="/"+t.replace(" ","-"))}),e.requestBody||(e.requestBody={}),e.requestBody.bragiUrl=this._bragi,o}}l.\u0275fac=function(e){return new(e||l)(r.LFG(a._),r.LFG(n.S),r.LFG(o.c),r.LFG(c.e))},l.\u0275prov=r.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})},68346:function(e,t,s){"use strict";s.d(t,{O:function(){return p}});var i=s(81602),r=s(51131),a=s(14757),n=s(70187);class o{constructor(e,t,s,o,c,l,d,u,h,m,p,g){this.translate=e,this.userService=t,this.oddFormatService=s,this.storageService=o,this.name=c,this.gettingPromotion=l,this.gettingOdds=d,this.type=u,this.betAmount=h,this.checkResult=m,this.methods={validFixtureEndDate(e,t,s,r,a,n,o,c,l,d){if(t.validFixtureEndDate){const r=s.filter(e=>{if(e.ante&&e.afed&&e.afed>t.validFixtureEndDate)return e});r&&r.length&&c.push(new i.WN(!1,this.validFixtureDateMessage,!1,e,Number(t.promotionId)))}},sportTypeIsMatched:(e,t,s,a,n,o,c,l,d,u)=>{if(t.focusedSportTypeIds){let a=t.focusedSportTypeIds.split(","),n=[];s.forEach(e=>{n.push(String(e.stId))}),a=a.sort(),n=[...new Set(n)],n=n.sort();const o=!(0,r.Z)(n,a).length;let c;this.translate.get("MESSAGES.SPORT_TYPE_DOES_NOT_MATCH").subscribe(e=>{c=e}),l.push(new i.WN(o,c,!1,e,Number(t.promotionId)))}},leagueIsMatched:(e,t,s,a,n,o,c,l,d,u)=>{if(t.focusedLeagueIds){let a=t.focusedLeagueIds.split(","),n=[];s.forEach(e=>{n.push(String(e.lId))}),n=n.sort(),n=[...new Set(n)],a=a.sort();const o=!(0,r.Z)(n,a).length;let c;this.translate.get("MESSAGES.NOT_MATCH_LEAGUE").subscribe(e=>{c=e}),l.push(new i.WN(o,c,!1,e,Number(t.promotionId)))}},minNumberOfEvents:(e,t,s,r,a,n,o,c,l,d)=>{if(t.minNumberOfEvents){const r=s.length>=t.minNumberOfEvents,a=t.minNumberOfEvents;let n;this.translate.get("MESSAGES.MINNUMBEROFEVENTS",{param0:a}).subscribe(e=>{n=e}),c.push(new i.WN(r,n,!1,e,Number(t.promotionId)))}},maxNumberOfEvents:(e,t,s,r,a,n,o,c,l,d)=>{if(t.maxNumberOfEvents&&"single"!==d){const r=s.length<=t.maxNumberOfEvents,a=t.maxNumberOfEvents;let n;this.translate.get("MESSAGES.MAXNUMBEROFEVENTS",{param0:a}).subscribe(e=>{n=e}),c.push(new i.WN(r,n,!1,e,Number(t.promotionId)))}},minOddAtCoupon:(e,t,s,r,n,o,c,l,d,u)=>{if(t.minOddAtCoupon&&s.length>1&&"multi"===u){const r=Number((0,a.Z)(s,"odd").odd)>=t.minOddAtCoupon,n=this.oddFormatService.formatter(t.minOddAtCoupon);let o;this.translate.get("MESSAGES.MINODDATCOUPON",{param0:n}).subscribe(e=>{o=e}),l.push(new i.WN(r,o,!1,e,Number(t.promotionId)))}},maxOddAtCoupon:(e,t,s,r,a,o,c,l,d,u)=>{if(t.maxOddAtCoupon&&s.length>1){const r=Number((0,n.Z)(s,"odd").odd)<=t.maxOddAtCoupon,a=this.oddFormatService.formatter(t.maxOddAtCoupon);let o;this.translate.get("MESSAGES.MAXODDATCOUPON",{param0:a}).subscribe(e=>{o=e}),l.push(new i.WN(r,o,!1,e,Number(t.promotionId)))}},totalAmountIsBiggerThanSelectedPromotion:(e,t,s,r,a,n,o,c,l)=>{if(t.minPlayedAmount&&"bonus"===n){const s=t.minPlayedAmount,r=t.minPlayedAmount<=o;let a;this.translate.get("MESSAGES.TOTALAMOUNT",{param0:s}).subscribe(e=>{a=e}),c.push(new i.WN(r,a,!1,e,Number(t.promotionId)))}},minOddAtCouponSb:(e,t,s,r,n,o,c,l,d,u)=>{if(t.minOddAtCouponSb&&s&&s.length){let r=!0;"single"===u&&n&&(r=Number((0,a.Z)(s,"odd").odd)>=t.minOddAtCouponSb);const o=this.oddFormatService.formatter(t.minOddAtCouponSb);let c;this.translate.get("MESSAGES.MINODDATCOUPONSB",{param0:o}).subscribe(e=>{c=e}),l.push(new i.WN(r,c,!1,e,Number(t.promotionId)))}},isPreLive:(e,t,s,r,a,n,o,c,l,d)=>{if(!t.isPrelive&&s&&s.length){const r=!s.find(e=>e.isPrelive);let a;this.translate.get("MESSAGES.BONUS_NOT_AVAILABLE_PRELIVE").subscribe(e=>{a=e}),c.push(new i.WN(r,a,!1,e,Number(t.promotionId)))}},isLive:(e,t,s,r,a,n,o,c,l)=>{if(!t.isLive){const r=!s.find(e=>e.isLive);let a;this.translate.get("MESSAGES.BONUS_NOT_AVAILABLE_LIVE").subscribe(e=>{a=e}),c.push(new i.WN(r,a,!1,e,Number(t.promotionId)))}},isVirtual:(e,t,s,r,a,n,o,c,l,d)=>{if(!t.isVirtual){const r=!s.find(e=>e.isVirtual);let a;this.translate.get("MESSAGES.BONUS_NOT_AVAILABLE_VIRTUAL").subscribe(e=>{a=e}),c.push(new i.WN(r,a,!1,e,Number(t.promotionId)))}},isInsideExludedSportTypes:(e,t,s,r,a,n,o,c,l,d)=>{if(t.xExcludedSportTypeIds){let r,a=!0;s.forEach(e=>{if(t.xExcludedSportTypeIds.split(",").includes(String(e.stId)))return a=!1,!1}),this.translate.get("MESSAGES.SPORT_TYPE_DOES_NOT_MATCH").subscribe(e=>{r=e}),c.push(new i.WN(a,r,!1,e,Number(t.promotionId)))}},isInsideExludedLeagues:(e,t,s,r,a,n,o,c,l,d)=>{if(t.xExcludedLeagueIds){let r,a=!0;s.forEach(e=>{t.xExcludedLeagueIds.split(",").includes(String(e.lId))&&(a=!1)}),this.translate.get("MESSAGES.EXCLUDED_LEAGUE").subscribe(e=>{r=e}),c.push(new i.WN(a,r,!1,e,Number(t.promotionId)))}},isInsideExludedBetTypeGroups:(e,t,s,r,a,n,o,c,l,d)=>{if(t.excludedBetTypeGroupIds){let r,a=!0;s.forEach(e=>{if(t.excludedBetTypeGroupIds.split(",").includes(String(e.btgId)))return a=!1,!1}),this.translate.get("MESSAGES.EXCLUDED_BET_TYPE_GROUP").subscribe(e=>{r=e}),c.push(new i.WN(a,r,!1,e,Number(t.promotionId)))}},maxCouponRate:(e,t,s,r,a,n,o,c,l,d)=>{if(t.maxCouponRate){let r,a;a=this.oddFormatService.formatter(t.maxCouponRate);let n,o=1;if(s.forEach(e=>{o*=e.odd}),r=o<=t.maxCouponRate,"single"===d){r=!s.filter(e=>e.odd>t.maxCouponRate).length}this.translate.get("MESSAGES.MAXCOUPONRATE",{param0:a}).subscribe(e=>{n=e}),c.push(new i.WN(r,n,!1,e,Number(t.promotionId)))}},minCouponRate:(e,t,s,r,a,n,o,c,l,d)=>{if(t.minCouponRate&&"single"!==d){let r,a,n=1;for(const e of s)e.active&&(n*=e.odd);const o=!(n<t.minCouponRate);r=this.oddFormatService.formatter(t.minCouponRate),this.translate.get("MESSAGES.MINCOUPONRATE",{param0:r}).subscribe(e=>{a=e}),c.push(new i.WN(o,a,!1,e,Number(t.promotionId)))}},containsRateOverX:(e,t,s,r,a,n,o,c,l,d)=>{if(t.containsRateOverX){const r=s.find(e=>Number(e.odd)>t.containsRateOverX),a=this.oddFormatService.formatter(t.containsRateOverX);let n;this.translate.get("MESSAGES.CONTAINSRATEOVERX",{param0:a}).subscribe(e=>{n=e}),c.push(new i.WN(r,n,!1,e,Number(t.promotionId)))}},isValidDevices:(e,t,s,r,a,n,o,c,l,d)=>{let u;this.translate.get("MESSAGES.PROMOTION_INVALID_DEVICE",{param0:t.promotionName}).subscribe(e=>u=e);let h="m"===this.storageService.local.get("device");h&&!t.isValidOnMobile&&c.push(new i.WN(!1,u,!1,e,Number(t.promotionId))),h||t.isValidOnDesktop||c.push(new i.WN(!1,u,!1,e,Number(t.promotionId)))},isHasFrozenBonus:(e,t,s,r,a,n,o,c,l,d)=>{if("bonus"===this.type&&l){let s;this.translate.get("MESSAGES.HAS_FROZEN_BONUS").subscribe(e=>{s=e}),c.push(new i.WN(!1,s,!1,e,Number(t.promotionId)))}},promotionsExpiringSoonWarning:(e,t,s,r,a,n,o,c,l,d)=>{if(t.expiryDate){const r=[],a=s.filter(e=>{if(t.expiryDate<e.fsd){const t=s.find(t=>t.fId===e.fId),i=t.acN+" - "+t.hcN;return r.push(i),e}}),n="</br>"+r.toString().replace(/,/g,",</br>");let o;this.translate.get("MESSAGES.COUPON_PROMOTION_EXPIRY_DATE",{param0:n}).subscribe(e=>{o=e}),a.length&&c.push(new i.WN(!1,o,!1,e,Number(t.promotionId)))}}};const b=d.filter(e=>Number(e.amount)>0),v=b.reduce((e,t)=>e+Number(t.amount),0)<=Number(this.userService.srb.balance.toFixed(2));this.methods[c](c,l,d,b,v,u,h,m,p,g)}}var c=s(30321),l=s(72643),d=s(98995),u=s(55209),h=s(96842),m=s(25288);class p{constructor(e,t,s,i){this.translate=e,this.userService=t,this.oddFormatService=s,this.storageService=i,this.methodNames=["sportTypeIsMatched","leagueIsMatched","minNumberOfEvents","maxNumberOfEvents","minOddAtCoupon","maxOddAtCoupon","totalAmountIsBiggerThanSelectedPromotion","minOddAtCouponSb","isPreLive","isLive","isVirtual","isInsideExludedSportTypes","isInsideExludedLeagues","isInsideExludedBetTypeGroups","maxCouponRate","minCouponRate","containsRateOverX","isValidDevices","isHasFrozenBonus","promotionsExpiringSoonWarning","validFixtureEndDate"],this.checkResult=[]}checkPromotionsAvailability(e,t,s,i,r,a){let n;this.checkResult=[];for(const c of this.methodNames)n=new o(this.translate,this.userService,this.oddFormatService,this.storageService,c,e,s,t,i,this.checkResult,a,r);return n.checkResult.some(e=>!e.availability)?(e.disabled=!0,e.checkResult=(0,c.Z)(n.checkResult,e=>!1===e.availability),e.checkResult.map(e=>{if("validFixtureEndDate"===e.method){let t;this.translate.get("MESSAGES.ANTEPOST_END_DATE_IS_BIGGER_PROMOTION_VALID_FIXTURE_DATE").subscribe(e=>{t=e}),e.reason=t}}),console.log(e.checkResult),e.checkResult.length||(e.disabled=!1)):e.disabled=!1,s.forEach(t=>{t.fsd>e.validFixtureEndDate&&(e.disabled=!0)}),e.type="freebet"===t?"freebet":"bonus",e}}p.\u0275fac=function(e){return new(e||p)(l.LFG(d.sK),l.LFG(u.Y),l.LFG(h.W),l.LFG(m.S))},p.\u0275prov=l.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})},25961:function(e,t,s){"use strict";s.d(t,{B:function(){return d}});var i=s(41879),r=s(81602),a=s(16617),n=s(72643),o=s(92221),c=s(73386),l=s(98250);class d{constructor(e,t,s){this.http=e,this.handler=t,this.trackingService=s}getPromotions(){const e=new r.qP;return new Promise((t,s)=>{this.http.post(a.N.publicApiEndpoint+"/api/user/promotions/listPromotions",e).pipe((0,i.U)(e=>e)).subscribe(e=>{this.setPromotions(e.data),this.setBonuses(e.data.bonuses),this.setFreeBets(e.data.freebets),t(this._promotions)},e=>{s(this.handler.handle(e.error||""))})})}getDeactivePromotions(){const e=new r.qP;return new Promise((t,s)=>{this.http.post(a.N.publicApiEndpoint+"/api/user/promotions/listClaimedBonuses",e).pipe((0,i.U)(e=>e)).subscribe(e=>{this.setDeactivePromotions(e.data),t(this._deactivePromotions)},e=>{s(this.handler.handle(e.error||""))})})}activateBonus(e){return new Promise((t,s)=>{this.http.post(a.N.publicApiEndpoint+"/api/user/promotions/activateBonus",e).pipe((0,i.U)(e=>e)).subscribe(s=>{this.trackingService.activateBonus(e.requestBody),t(s)},e=>{s(e.error)})})}getMultibetBonusForVisitor(e){const t=new r.qP(e);return new Promise((e,s)=>{this.http.post(a.N.apiEndpoint+"/api/generic/mbb/rates",t).pipe((0,i.U)(e=>e)).subscribe(t=>{e(t.data)},e=>{this.handler.handle(e.error||""),s(e)})})}getMultibetBonusForLoginUser(e){const t=new r.qP(e);return new Promise((e,s)=>{this.http.post(a.N.publicApiEndpoint+"/api/user/promotions/mbb/rates",t).pipe((0,i.U)(e=>e)).subscribe(t=>{e(t.data)},e=>{this.handler.handle(e.error||""),s(e)})})}getClaimableBonusAndFreebet(e,t,s){const n={currencyId:t.currencyId,customerTransactionTypeId:e.custTransMasterTypeId,depositAmount:s},o=new r.qP(n);return new Promise((e,t)=>{this.http.post(a.N.publicApiEndpoint+"/api/user/promotions/listClaimablePromotions",o).pipe((0,i.U)(e=>e)).subscribe(t=>{e(t.data)},e=>{this.handler.handle(e.error||""),t(e)})})}getCasinoAutomatedBonuses(e){return new Promise((t,s)=>{const r={requestBody:{customerCode:e}};this.http.post(a.N.apiEndpoint+"/api/user/casinoapi/getActiveBonus",r).pipe((0,i.U)(e=>e)).subscribe(e=>{t(e.data)},e=>{this.handler.handle(e.error||""),s(e)})})}getClaimableCasinoBonuses(e,t,s,i,n){const o=Object.assign(Object.assign(Object.assign(Object.assign({bonusType:e},!!t&&{countryCode:t}),!!s&&{currencyId:s}),!!i&&{depositAmount:i}),!!n&&{custTransMasterTypeId:n}),c=new r.qP(o);return new Promise((e,t)=>{this.http.post(a.N.apiEndpoint+"/api/user/casinoapi/getClaimableBonuses",c).subscribe(t=>{e(t.data.bonuses)},t=>{this.handler.handle(t.error||""),e([])})})}getClaimableSportsbookBonus(e){return new Promise((t,s)=>{this.http.get(`${a.N.publicApiEndpoint}/api/generic/register/getClaimableRegisterPromotions/bonus/${e}`).pipe((0,i.U)(e=>e)).subscribe(e=>{t(e.data)},e=>{this.handler.handle(e.error||""),s(e)})})}getClaimableSportsbookFreebet(e){return new Promise((t,s)=>{this.http.get(`${a.N.publicApiEndpoint}/api/generic/register/getClaimableRegisterPromotions/freebet/${e}`).pipe((0,i.U)(e=>e)).subscribe(e=>{t(e.data)},e=>{this.handler.handle(e.error||""),s(e)})})}hasActiveCasinoPromotions(){return new Promise((e,t)=>{this.http.get(`${a.N.publicApiEndpoint}/api/user/casinoapi/hasActivePromotions`).pipe((0,i.U)(e=>e)).subscribe(t=>{e(t.data)},e=>{this.handler.handle(e.error||""),t(e)})})}deactivatePromotion(e){return new Promise((t,s)=>{this.http.post(a.N.publicApiEndpoint+"/api/user/promotions/deactivatePromotion",e).pipe((0,i.U)(e=>e)).subscribe(e=>{t(e)},e=>{s(e.error)})})}setDeactivePromotions(e){this._deactivePromotions=e}get deactivePromotions(){return this._deactivePromotions}setPromotions(e){this._promotions=e}get promotions(){return this._promotions}setBonuses(e){this._bonuses=e}get bonuses(){return this._bonuses}setFreeBets(e){this._freeBets=e}get freeBets(){return this._freeBets}}d.\u0275fac=function(e){return new(e||d)(n.LFG(o.eN),n.LFG(c.t),n.LFG(l.z))},d.\u0275prov=n.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})},99960:function(e,t,s){"use strict";s.d(t,{O:function(){return o}});var i=s(76857),r=s(72643),a=s(41182),n=s(99701);class o{constructor(e,t){this.traderService=e,this.applicationService=t,this._trackerStatus=new i.xQ,this.trackerStatus$=this._trackerStatus.asObservable(),this.betradarStatisticsSetting={parameterDescription:"",parameter:"betradar-statics-url",value:null},this.statscoreStatisticsSetting={parameterDescription:"",parameter:"statscore-scoreframe-url",value:null},this.statScoreEventStatsSlug="/partner_event?event_id=",this.liveBarSupportedSportKeys=["basketball","soccer","football","volleyball"]}setPreferredTrackerProviderForOverview(){this.traderService.trader.preferredTrackersProvider?this.preferredTrackersProvider=this.traderService.trader.preferredTrackersProvider:this.preferredTrackersProvider="betradar"}setPreferredTrackerProvider(e,t,s){this.showTracker=!1,this.traderService.trader.preferredTrackersProvider?(this.preferredTrackersProvider=this.traderService.trader.preferredTrackersProvider,"live"===s?e.lvt&&("betradar"===this.preferredTrackersProvider&&this.traderService.trader.betradarTrackerV3ClientId||"statscore"===this.preferredTrackersProvider&&t.ssid)&&(this.showTracker=!0):e.lvt&&(this.traderService.trader.lmtOnPrelive||this.traderService.trader.isSportRadarMatchPreviewActive)&&("betradar"===this.preferredTrackersProvider&&(this.traderService.trader.betradarTrackerV3ClientId||this.traderService.trader.isSportRadarMatchPreviewActive)||"statscore"===this.preferredTrackersProvider&&t.ssid)&&(this.showTracker=!0)):(this.preferredTrackersProvider="betradar","live"===s?e.lvt&&this.traderService.trader.betradarTrackerV3ClientId&&(this.showTracker=!0):e.lvt&&this.traderService.trader.lmtOnPrelive&&this.traderService.trader.betradarTrackerV3ClientId&&(this.showTracker=!0))}findStatsUrlForProvider(e){return 2===e?this.applicationService.settingList.find(e=>e.parameter===this.betradarStatisticsSetting.parameter):this.applicationService.settingList.find(e=>e.parameter===this.statscoreStatisticsSetting.parameter)}get trackerStatus(){return this.trackerStatus$}set trackerOptions(e){this._trackerOptions=e}get trackerOptions(){return this._trackerOptions}}o.\u0275fac=function(e){return new(e||o)(r.LFG(a._),r.LFG(n.W))},o.\u0275prov=r.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})},52899:function(e,t,s){"use strict";s.d(t,{U:function(){return h}});var i=s(89166),r=s(72643),a=s(61583),n=s(25288),o=s(92221),c=s(2397),l=s(60664),d=s(33263),u=s(41182);class h{constructor(e,t,s,r,a,n,o,c){this.metaService=e,this.storageService=t,this.http=s,this.translateFactory=r,this.meta=a,this.title=n,this.metaFactory=o,this.traderService=c,this._fixtureInProgress=!1,this._isDateView=this.storageService.local.get("dateView"),this._sportsViewChange=new i.Subject,this.sportsViewChange$=this._sportsViewChange.asObservable(),this._compactStatusObject={showSwitchButton:!1,compactActive:!1,compactSwitchModelValue:!1},this._activeBetButtons={},this._placebetView={main:!1,live:!1,liveDetail:!1,prelive:!1,ultraplayEsports:!1,virtual:!1,betradarVirtualDetails:!1,betradarVirtualLanding:!1,liveDetailSide:!1,esport:!1,liveCalendar:!1,jackpot:!1,esportDetail:!1,liveRacing:!1,forex:!1,binance:!1,pragmaticVirtuals:!1}}get fixtureInProgress(){return this._fixtureInProgress}set fixtureInProgress(e){this._fixtureInProgress=e}get activeBetButtons(){return this._activeBetButtons}set activeBetButtons(e){this._activeBetButtons=e}get placebetView(){return this._placebetView}get isDateView(){return this._isDateView}set isDateView(e){this._isDateView=e}setPageMetaData(e){this.metaFactory.setMeta(e,this.translateFactory.currentLang.id)}compactViewStatusChecker(){switch(this.traderService.trader.enableCompactView){case 1:this.compactStatusObject.compactActive=!0,this.compactStatusObject.compactSwitchModelValue=!0;break;case 2:this.compactStatusObject.compactActive=!0,this.compactStatusObject.compactSwitchModelValue=!0,this.compactStatusObject.showSwitchButton=!0,null!==this.storageService.local.get("compactView")&&(this.storageService.local.get("compactView")||(this.compactStatusObject.compactActive=!1,this.compactStatusObject.compactSwitchModelValue=!1));break;case 3:this.compactStatusObject.compactActive=!1,this.compactStatusObject.compactSwitchModelValue=!1,this.compactStatusObject.showSwitchButton=!0,null!==this.storageService.local.get("compactView")&&this.storageService.local.get("compactView")&&(this.compactStatusObject.compactActive=!0,this.compactStatusObject.compactSwitchModelValue=!0);break;default:this.compactStatusObject.compactActive=!1,this.compactStatusObject.compactSwitchModelValue=!1,this.compactStatusObject.showSwitchButton=!1}}get compactStatusObject(){return this._compactStatusObject}set compactStatusObject(e){this._compactStatusObject=e}}h.\u0275fac=function(e){return new(e||h)(r.LFG(a.J),r.LFG(n.S),r.LFG(o.eN),r.LFG(c.c),r.LFG(l.h_),r.LFG(l.Dx),r.LFG(d.X),r.LFG(u._))},h.\u0275prov=r.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"})},86203:function(e,t,s){"use strict";s.d(t,{d:function(){return w}});var i=s(81602),r=s(7035),a=s(76857),n=s(16617),o=s(30321),c=s(58862),l=s(12447),d=s(73569),u=s(72643),h=s(79658),m=s(41182),p=s(92221),g=s(2397),b=s(25288),v=s(41189),f=s(11056),y=s(98995),S=s(52899),E=s(37290),T=s(99701),A=s(73386),I=s(90137),B=s(96842),O=s(92097),M=function(e,t,s,i){return new(s||(s=Promise))(function(r,a){function n(e){try{c(i.next(e))}catch(t){a(t)}}function o(e){try{c(i.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(n,o)}c((i=i.apply(e,t||[])).next())})};class w{constructor(e,t,s,i,r,n,o,c,l,d,u,h,m,p,g,b,v){this.customBetService=e,this.traderService=t,this.http=s,this.translateFactory=i,this.storageService=r,this.toastFactory=n,this.iframeMessagesService=o,this.translate=c,this.rootService=l,this.prerenderService=d,this.applicationService=u,this.handler=h,this.asianViewService=m,this.storage=p,this.oddFormat=g,this.betBoosterDataService=b,this.customBetsService=v,this._columnViewChange=new a.xQ,this.columnViewChange$=this._columnViewChange.asObservable(),this._activeTopListDataForMenuView=new a.xQ,this.activeTopListDataForMenuView$=this._activeTopListDataForMenuView.asObservable(),this._betBoosterActiveSelection=new a.xQ,this.betBoosterActiveSelection$=this._betBoosterActiveSelection.asObservable(),this._timerange=0,this.bradarUrl=null,this._fixtureDetailMarketChange=new a.xQ,this.fixtureDetailMarketChange$=this._fixtureDetailMarketChange.asObservable(),this.bragiEndpoint=this.traderService.trader.tBU,this.timerangeObserver=new a.xQ,this.timerangeObservable$=this.timerangeObserver.asObservable(),this._sportsSelectedBtg=new a.xQ,this.sportsSelectedBtg$=this._sportsSelectedBtg.asObservable(),this._betTypeList=null,this._hours={0:0,1:1,2:2,3:4,4:6,5:12,6:24,7:48}}prepareTemplateBasedData(e){try{e.forEach((e,t)=>{e.btgs.forEach((e,t)=>{const s=[],i=[];e.fos.forEach((t,r)=>{e.ddt&&1===e.ddt||(e.ddt&&2===e.ddt?(s.push(t.oc),i.push(t.sv),e.oc=[...new Set(s)],e.sv=[...new Set(i)]):e.ddt&&3===e.ddt||e.ddt&&e.ddt)})})})}catch(t){console.error("exception--------\x3eprepareTemplateBasedData",t)}}fixtureData(e){try{this.traderService.trader.mobileDisplayTemplateBasedUI&&(e.data[0].cs[0].sns[0].fs[0].btgs=e.data[0].cs[0].sns[0].fs[0].btgs.sort((e,t)=>e.pto-t.pto),e.data[0].cs[0].sns[0].fs[0].mbtgMs=e.data[0].cs[0].sns[0].fs[0].btgs.reduce((t,s,i)=>{if(s.mbtgMId){const i=t.find(e=>e.mbtgMId===s.mbtgMId);i?s.ptn&&(i.ptnS.push({ptn:s.ptn,pto:s.pto||-1,mrkp:s.mrkp,active:!1,cshOut:s.cshOut&&e.data[0].cs[0].sns[0].cshOut}),i.btgs.push(s),i.ptnS=i.ptnS.sort((e,t)=>e.pto-t.pto)):t.push({mbtgMId:s.mbtgMId||-1,mbtgMN:s.mbtgMN,activePtnMrkp:s.mrkp,ptnS:s.ptn?[{ptn:s.ptn,pto:s.pto||-1,mrkp:s.mrkp,active:!0,cshOut:s.cshOut&&e.data[0].cs[0].sns[0].cshOut}]:[],ddt:s.ddt,mbtgMOrd:s.mbtgMOrd||999999,btgs:s.ptn?[s]:[],hsd:s.hsd}),this.prepareTemplateBasedData(t)}return t},[])),e.data[0].cs[0].sns[0].fs[0].btgMs=e.data[0].cs[0].sns[0].fs[0].btgs.reduce((e,t,s)=>{t.bI=s,t.dt=t.dt||[3];const i=t.btgMId,r=e.find(e=>e.btgMId===i);if(r)r.btgs.push(t);else{let s=t.btgMN;s||this.translate.get("TEXTS.OTHERS").subscribe(e=>{s=e}),e.push({btgMId:i,btgMN:s,btgs:[t],ord:t.ord||-1})}return e},[])}catch(t){console.error("fixtureData-------\x3eexception",t)}}getLeftMenuData(e=0){return new Promise((t,s)=>{if(this._timerange===e&&this._leftMenu)t(this._leftMenu);else{let i={requestBody:{}};e>0&&(i={requestBody:{timeRangeInHours:this._hours[e]}}),this._timerange=e;const r=this.prerenderService.getUrl(i,"left-menu",!0);this.http.get(r).subscribe(i=>{i.success?(this._leftMenu=i.data,0===e?(this._leftMenuStatic=i.data,t(this._leftMenuStatic)):t(this._leftMenu)):s(i)},e=>{s(e)})}})}getLessThanTwoData(e,t){return new Promise((s,i)=>{const r=this.prerenderService.getUrl(e,t);this.http.post(r,e).subscribe(e=>{e.success||i(e),e.data.forEach(e=>{e.cs.forEach(e=>{const t={sns:[]};this.bringSeasonsUp(e.sns,t),e.sns=t.sns,(0,o.Z)(e.sns,e=>!e.fs.length)})}),s(e.data)},e=>{i(e)})})}search(e,t,s){return new Promise((i,r)=>{e.requestBody.timeRangeInHours>0&&!1===t&&(e.requestBody.timeRangeInHours=this._hours[e.requestBody.timeRangeInHours]);const a=e,n=this.prerenderService.getUrl(a,"fixture-search");this.http.post(n,a).subscribe(e=>{e.success?(this.seasonalData(e,!1,s),this.groupByDays(e,s),i(e)):r(e)},e=>{r(e)},()=>{this.rootService.fixtureInProgress=!1})})}searchByName(e,t,s){return new Promise((i,r)=>{let a,n;e.timeRangeInHours&&(e.timeRangeInHours=this._hours[this._timerange]),"esports"===e.stN?(n={requestBody:{startDate:e.startDate,endDate:e.endDate}},a=this.prerenderService.getOrderUrl(n,e,"fixture/category-details")):(n={requestBody:{}},e.timeRangeInHours>0&&(n.requestBody.timeRangeInHours=this._hours[this._timerange]),e.antePostEvent&&(n.requestBody.antePostEvent=e.antePostEvent),e.betTypeGroupLimit=e.betTypeGroupLimit||this.traderService.trader.tBTGL||2,a=this.prerenderService.getOrderUrl(n,e,"fixture/category-details")),this.http.post(a,n).subscribe(e=>{e.success?(this.seasonalData(e,t,s),this.groupByDays(e,s),i(e)):r(e)},e=>{r(e)},()=>{this.rootService.fixtureInProgress=!1})})}getFixtureDetail(e,t){return this.rootService.fixtureInProgress=!0,new Promise((s,i)=>{const r={requestBody:e},a=this.prerenderService.getUrl(r,"fixture-detail");this.http.post(a,r).subscribe(e=>{if(e.success){if(this.bringFixtureUp(e.data[0].cs[0].sns[0]),this.fixtureData(e),!t&&this.traderService.trader.betBoosterEnabled){this.betBoosterDataService.defaultFullPreMatchEventDetail=e.data;const t=this.betBoosterDataService.prepareBetBoosterJson(e.data);this.betBoosterDataService.prepareBetBoosterActiveSelections(e.data),e.data[0].cs[0].sns[0].fs[0].betBoosterJSON=t,this.customBetsService.setCustomBetOnFixtureHandler(e.data[0].cs[0].sns[0].fs[0])}s(e)}else i(e)},e=>{i(e)},()=>{setTimeout(()=>{this.rootService.fixtureInProgress=!1})})})}bringFixtureUp(e){e.fs.length||(this.bringFixtureUp(e.sns[0]),e.fs=e.sns[0].fs)}changeBetType(e,t,s,i=!1){return new Promise((r,a)=>{this.search(e,i).then(e=>{e.data[0].cs[0].sns.forEach(e=>{const i=t[0].cs[0].sns.find(t=>t.sId===e.sId);e.fs.forEach(e=>{const t=i.fs.find(t=>t.fId===e.fId);t&&t.btgs[s]&&((0,o.Z)(t.btgs,{btgId:t.btgs[s].btgId}),t.btgs.splice(s,0,e.btgs[0]),e.btgs[0].bI=s,t.btgList[e.btgs[0].btgId]=e.btgs[0])})}),(0,o.Z)(t[0].cs[0].betTypeGroups,{btgId:t[0].cs[0].betTypeGroups[s].btgId}),t[0].cs[0].betTypeGroups.splice(s,0,e.data[0].cs[0].sns[0].fs[0].btgs[0]),r(!0)}).catch(e=>{a(e)})})}nameSearch(e){return new Promise((t,s)=>{const i={requestBody:{name:e}},r=this.prerenderService.getUrl(i,"name-search");this.http.post(r,i).subscribe(e=>{e.success?(this.seasonalDataForSport(e),t(e)):s(e)},e=>{s(this.handler.handle(e.error||""))},()=>{this.rootService.fixtureInProgress=!1})})}groupByDays(e,t){try{let s=[];const i=new r.uU(this.translateFactory.currentLang.locale),a=(e,t,r,n,o)=>{e.forEach(e=>{e.days={},e.fs.forEach((a,c)=>{a.fI=c;const l=i.transform(a.fsd,"EEEE dd/MM/yyyy"),d=s.find(e=>e.day===l);if(d){d.fs.find(e=>e.fixture.fId===a.fId)||d.fs.push({s:e,fixture:a,fsd:a.fsd})}else s.push({day:l,dts:a.fsd,st:t,stI:r,c:n,snsCshOut:e.cshOut,cI:o,fs:[{s:e,fixture:a,fsd:a.fsd}],tournaments:{}});t.days[l]=n.days[l]=e.days[l]=!0,a.day=l}),e.sns&&e.sns.length&&(a(e.sns,t,r,n,o),e.sns.forEach(t=>{e.days=Object.assign(e.days,t.days)}))})};if(e.data.forEach((e,t)=>{e.days={},e.cs.forEach((s,i)=>{s.days={},a(s.sns,e,t,s,i)})}),s.forEach(e=>{e.fs=(0,c.Z)(e.fs,["fsd"],["asc"])}),s=s.sort((e,t)=>e.dts-t.dts),t)for(const e in s)for(const t in s[e].fs)s[e].tournaments[s[e].fs[t].s.seaSURL]=!0;e.days=s}catch(s){console.error("group by days exception----\x3e",s)}}seasonalData(e,t=!1,s){try{e.data.forEach(e=>{e.cs.forEach(e=>{const i={betTypeGroups:[]};if(t){const t={sns:[]};this.bringSeasonsUp(e.sns,t),e.sns=t.sns}this.asianViewService.isAsianView?this.seasonalDataForInnerSeasonAsianView(e.sns,i):this.seasonalDataForInnerSeason(e.sns,i,t,s),e.betTypeGroups=i.betTypeGroups})})}catch(i){console.error("seasonal err",i)}}seasonalDataForInnerSeasonAsianView(e,t){const s=new r.uU(this.translateFactory.currentLang.locale);e.forEach(e=>{let i=null,r=null;e.fs.forEach(e=>{if(i=s.transform(e.fsd,"EEEE dd/MM/yyyy"),i!==r){r=i,e.startDate=i;const s=(0,l.Z)(e.btgs,"mbtgMId");s.length>t.betTypeGroups.length&&(t.betTypeGroups=s)}this.customBetService.setCustomBetOnFixtureHandler(e)}),e.sns&&e.sns.length&&this.seasonalDataForInnerSeasonAsianView(e.sns,t)}),e.forEach(e=>{e.fs.forEach((e,s)=>{e.fI=s,e.asianTabs=[];let i=(0,l.Z)(e.btgs,"ptn");i=i.sort((e,t)=>e.pto-t.pto),i.forEach(t=>{if(t&&t.ptn){const s={ptn:t.ptn,pto:t.pto};e.asianTabs.push(s)}}),e.activeAsianTabName=e.asianTabs[0].ptn,e.btgList={},t.betTypeGroups.forEach(t=>{e.btgList[t.mbtgMId]=[]}),e.btgs.forEach((s,i)=>{s.dt=s.dt||[3],t.betTypeGroups.forEach((t,i)=>{t.mbtgMId===s.mbtgMId&&e.btgList[t.mbtgMId].push(s)})}),e.btgs.forEach((e,t)=>{e.bI=t})})}),console.log(t.betTypeGroups)}gettournamentEventGroupsData(e,t,s,i){if(!i)return!1;try{let t=[];if(e.fs&&e.fs.length&&t.push(...e.fs),e.sns&&e.sns.length){let i=null;const r=[];this.translate.get("TEXTS.ALL").subscribe(e=>{i=[{fs:null,groupFixtures:null,seaSURL:s.seaSURL,seaN:e,width:50,active:!0}]});const a=e.sns.map(e=>({seaN:e.seaN,fs:e.fs,seaSURL:e.seaSURL,groupFixtures:[],width:140,active:!1,lId:e.lId,sId:e.sId}));for(const e in a){let t=[];t=this.specialTournamentData.find(t=>t.seaSURL===a[e].seaSURL).groupFixtures,a[e].groupFixtures=[...new Set(t)];for(const s in a[e].fs)a[e].fs[s].fI=Number(s),r.push(a[e].fs[s])}t.push(...r),this.tournamentEventGroups=i.concat(a)}this.tournamentEventFixtures=t.sort((e,t)=>e.fsd-t.fsd)}catch(r){console.error("gettournamentEventGroupsData---exception-----\x3e",r)}}findPromotedBetTypeGroupOdds(e,t){try{e.cs.forEach(e=>{e.sns.forEach(e=>{e.fs.forEach(e=>{const s=e.btgs.find(e=>e.btgId===t.btgId&&e.mrkp===t.mrkp);e.hasPromotedBtg=s})})})}catch(s){console.error("findPromotedBetTypeGroupOdds---exception-----\x3e",s)}}findPromotedBetTypeListOnSports(e){try{e.betTypeGroups=[],e.cs.forEach(t=>{t.betTypeGroups=[],t.sns.forEach(s=>{s.fs.forEach(s=>{s.btgs.forEach(s=>{const i=t.betTypeGroups.findIndex(e=>e.btgId===s.btgId&&e.mrkp===s.mrkp);-1===i?(e.betTypeGroups.push((0,d.Z)(s)),t.betTypeGroups.push((0,d.Z)(s)),e.betTypeGroups[e.betTypeGroups.length-1].counter=1,t.betTypeGroups[t.betTypeGroups.length-1].counter=1):(e.betTypeGroups[i].counter++,t.betTypeGroups[i].counter++)})})}),(0,c.Z)(e.betTypeGroups,["prm","ord"],["desc","asc"]),(0,c.Z)(t.betTypeGroups,["prm","ord"],["desc","asc"])}),e.cs.forEach(e=>{e.sns.forEach(t=>{t.fs.forEach(t=>{const s=t.btgs.find(t=>t.btgId===e.betTypeGroups[0].btgId&&t.mrkp===e.betTypeGroups[0].mrkp);t.hasPromotedBtg=s})})})}catch(t){console.error("findPromotedBetTypeListOnSports ----\x3e",t)}}prepareCategoryBetTypeGroups(e){try{e&&e.forEach(e=>{e.betTypeGroups=[],e.sns.forEach(t=>{t.fs.forEach(t=>{t.btgs.forEach(t=>{const s=e.betTypeGroups.findIndex(e=>e.btgId===t.btgId&&e.mrkp===t.mrkp);-1===s?(e.betTypeGroups.push((0,d.Z)(t)),e.betTypeGroups[e.betTypeGroups.length-1].counter=1):e.betTypeGroups[s].counter++})})})})}catch(t){console.log("prepareCategoryBetTypeGroups error ----\x3e",t)}}seasonalDataForInnerSeason(e,t,s,i){const a=new r.uU(this.translateFactory.currentLang.locale);let n=!0;e.forEach(e=>{let r=null,o=null;e.fs.forEach((e,s)=>{r=a.transform(e.fsd,"EEEE dd/MM/yyyy"),r!==o&&(o=r,e.startDate=r,e.fI=s),e.btgs.forEach(e=>{e.dt=e.dt||[3];const s=t.betTypeGroups.findIndex(t=>t.btgId===e.btgId&&t.mrkp===e.mrkp);-1===s?(t.betTypeGroups.push((0,d.Z)(e)),t.betTypeGroups[t.betTypeGroups.length-1].counter=1):t.betTypeGroups[s].counter++}),this.customBetService.setCustomBetOnFixtureHandler(e)}),e.sns&&e.sns.length&&(n=!1,this.seasonalDataForInnerSeason(e.sns,t,s,i)),this.gettournamentEventGroupsData(e,s,e,i)}),s||(n&&(t.betTypeGroups=(0,c.Z)(t.betTypeGroups,["prm","counter","ord"],["desc","desc","asc"]),t.betTypeGroups.length>3&&"d"===this.storage.local.get("device")&&t.betTypeGroups.splice(3,t.betTypeGroups.length-3)),e.forEach(e=>{this.createNestedSeason(e),e.fs.forEach(s=>{s.btgList={},t.betTypeGroups.forEach(e=>{s.btgList[e.btgId]=null}),s.btgs.forEach((e,i)=>{e.dt=e.dt||[3],t.betTypeGroups.forEach((t,i)=>{t.btgId===e.btgId&&t.mrkp===e.mrkp&&(s.btgList[t.btgId+t.mrkp]=e,e.counter=t.counter,e.prm=t.prm)})}),s.btgs=s.btgs.filter(e=>void 0!==e.counter),s.btgs=(0,c.Z)(s.btgs,["prm","counter"],["desc","desc"]),s.btgs.forEach((e,t)=>{e.bI=t}),i&&(s.tournament=e.seaSURL,s.tournamentName=e.seaN)})}))}createNestedSeason(e){if(e.sns&&e.sns.length&&e.fs&&e.fs.length){const t=Object.assign({},e);t.hasOwnProperty("sns")&&delete t.sns,t.isMain=!0,e.sns.unshift(t);for(const s in e.sns)e.sns[s].showHeader=!0}else e.showHeader=!0,e.fs&&!e.fs.length&&(e.showHeader=!1)}seasonalDataForSport(e){try{const t=new r.uU(this.translateFactory.currentLang.locale);e.data.forEach(e=>{e.betTypeGroups=[],e.cs.forEach(s=>{const i={sns:[]};this.bringSeasonsUp(s.sns,i),s.sns=i.sns,s.sns.forEach(s=>{let i=null,r=null;s.fs.forEach(s=>{this.customBetService.setCustomBetOnFixtureHandler(s),s.ante||(i=t.transform(s.fsd,"EEEE dd/MM/yyyy"),i!==r&&(r=i,s.startDate=i,s.btgs.forEach(t=>{t.dt=t.dt||[3];const s=e.betTypeGroups.findIndex(e=>e.btgId===t.btgId);-1===s?(e.betTypeGroups.push((0,d.Z)(t)),e.betTypeGroups[e.betTypeGroups.length-1].counter=1):e.betTypeGroups[s].counter++})))})})}),e.betTypeGroups=(0,c.Z)(e.betTypeGroups,["prm","counter"],["desc","desc"]),e.betTypeGroups.length>3&&e.betTypeGroups.splice(3,e.betTypeGroups.length-3),e.cs.forEach(t=>{t.sns.forEach(t=>{t.fs.forEach(t=>{t.ante||(t.btgList={},e.betTypeGroups.forEach(e=>{t.btgList[e.btgId]=null}),t.btgs.forEach((s,i)=>{s.dt=s.dt||[3],e.betTypeGroups.forEach(function(e,i){e.btgId===s.btgId&&(t.btgList[e.btgId]=s,s.counter=e.counter,s.prm=e.prm)})}),t.btgs=t.btgs.filter(e=>void 0!==e.counter),t.btgs=(0,c.Z)(t.btgs,["prm","counter"],["desc","desc"]),t.btgs.forEach((e,t)=>{e.bI=t}))})})})})}catch(t){console.error("seasonal err",t)}}bringSeasonsUp(e,t,s=null){e.forEach(e=>{s&&(e.seaN=`${s.seaN} > ${e.seaN}`),t.sns.push(e),e.sns&&this.bringSeasonsUp(e.sns,t,e)})}searchMatchCode(e){return new Promise((t,s)=>{const i=this.prerenderService.getUrl(e,"fixture-detail");this.http.post(i,e).subscribe(e=>{t(e)},e=>{s(e)})})}mergeWithCompactBtg(e,t){const s=Object.assign([],t);for(const i in s)for(const t in e)if(e[t].btgId===s[i].betTypeGroupId){const r=Object.assign(e[t],s[i]);s[i]=r}return s}createCompactViewBetTypeGroupsData(e){try{const t={};for(const s in e){t[e[s].sportTypeId]={btgs:[],stId:e[s].sportTypeId};for(const i in e[s].betTypeGroupMarkets){const r=e[s].betTypeGroupMarkets[i].betTypeGroups.filter(e=>e.cv);for(const i in r)t[e[s].sportTypeId].btgs.push(r[i])}t[e[s].sportTypeId].btgs=(0,c.Z)(t[e[s].sportTypeId].btgs,["cvOrd"],["asc"])}this.compactViewBetTypeGroupsData=t}catch(t){console.error("createCompactViewBetTypeGroupsData-----\x3e",t)}}getBetTypeGroups(){return new Promise((e,t)=>{if(this._betTypeList)e(this._betTypeList);else{const s={},i=this.prerenderService.getUrl(s,"bet-type-groups",!0);this.http.get(i,s).subscribe(s=>{s.success?(this._betTypeList=s.data,(0,l.Z)(this._betTypeList,e=>((0,l.Z)(e.betTypeGroupMarkets,e=>((0,l.Z)(e.betTypeGroups,e=>e.betTypeGroupId),e.betTypeGroupMarketId)),e.sportTypeId)),this.createCompactViewBetTypeGroupsData(this._betTypeList),e(this._betTypeList)):t(null)},e=>{t(e)},()=>{})}})}getAntepostFixtures(e){return new Promise((t,s)=>{const i=this.traderService.trader.bragiBetradarUrlForGenius&&this.traderService.trader.enableOutrightsForGenius?"antepost-fixture-for-betgenius":"antepost-fixture",r=this.prerenderService.getUrl(e,i);this.http.post(r,e).subscribe(e=>{t(e)},e=>{s(e)})})}getAntepostFixturesBySeasonId(e){return new Promise((t,s)=>{const i=this.traderService.trader.bragiBetradarUrlForGenius&&this.traderService.trader.enableOutrightsForGenius?"antepost-fixture-for-betgenius":"antepost-fixture",r=this.prerenderService.getUrl(e,i);this.http.post(r,e).subscribe(e=>{e.success?(this.seasonalData(e,!0),t(e.data)):s(e)},e=>{s(e)})})}filteredSearchSidebarService(e){return new Promise((t,s)=>{const i={requestBody:e},r=this.prerenderService.getUrl(i,"filtered-search-sidebar-service");this.http.post(r,i).subscribe(e=>{e.success?(this.seasonalData(e),this.groupByDays(e),t(e)):s(e)},e=>{s(e)})})}todaySportsDetail(e){const t=this.prerenderService.getUrl(e,"fixture-search");return new Promise((s,i)=>{this.http.post(t,e).subscribe(e=>{e.success?(this.seasonalData(e),this.groupByDays(e),s(e.data[0])):i(e)},e=>{i(this.handler.handle(e.error||""))})})}findSeasonWithinNested(e,t){return new Promise((s,i)=>{e.forEach(e=>{if(e.sId===t&&s(e),e.sns){const i=this.findSeasonWithinNested(e.sns,t);s(i)}})}).catch(e=>{console.warn(e)})}toggleAsianShowMore(e,t,s){const r={fixtureIds:[t.fId],timeRangeInHours:null,showMoreAsian:!0,asianShowMore:!0},a=new i.qP(r);return new Promise((i,r)=>{this.search(a).then(r=>{this.findSeasonWithinNested(r.data[0].cs[0].sns,s).then(s=>{t.btgs=s.fs[0].btgs,t.asianMoreBtgs=t.btgs,t.asianMoreToggle=!t.asianMoreToggle,t.btgList={},e.betTypeGroups.forEach(e=>{t.btgList[e.mbtgMId]=[]}),t.btgs.forEach((s,i)=>{s.dt=[s.dt]||0,e.betTypeGroups.forEach((e,i)=>{e.mbtgMId===s.mbtgMId&&(t.btgList[e.mbtgMId].push(s),s.counter=e.counter,s.prm=e.prm)})}),i(t)})})})}getBetMakersWidgetUrl(e){const t={customerId:e,gameId:"betmakers-lobby",code:"betmakers"},s=new i.qP(t);return new Promise((e,t)=>{this.betMakersWidgetUrl?e(this.betMakersWidgetUrl):this.http.post(`${n.N.apiEndpoint}/api/generic/iframe/launch`,s).subscribe(s=>{s.success?(this.betMakersWidgetUrl=s.data,e(this.betMakersWidgetUrl)):t(s)},e=>{t(e)})})}findSportWithXID(e){return this.leftMenu.find(t=>t&&t.xid===e)}prepareAutoCompleteData(e){return M(this,void 0,void 0,function*(){const t={},s=yield this.nameSearch(e);return s&&s.data.length>0&&s.data.forEach(e=>{e.cs.forEach(s=>{s.sns.forEach(s=>{s.fs.forEach(s=>{if(s.acN&&s.hcN){const i=`${s.hcN} - ${s.acN} (${e.stN})`;t[i]=null}})})})}),{preparedQuery:t,rawResult:s.data}})}prepareSpecialAntepost(e,t,s,i){if(e[0].cs[0].sns[0].fs.forEach((e,t)=>{e.originIndex=t}),i&&s&&t.tournamentKey)return e[0].cs[0].sns[0].fs.filter(e=>void 0!==e.cStage&&t.tournamentKey===e.cStage)}set betMakersWidgetUrl(e){this._betMakersWidgetUrl=e}get betMakersWidgetUrl(){return this._betMakersWidgetUrl}get timerangeObservable(){return this.timerangeObservable$}get sportsSelectedBtg(){return this.sportsSelectedBtg$}get timerange(){return this._timerange}set timerange(e){this._timerange=e}get hours(){return this._hours}get columnViewChange(){return this.columnViewChange$}get activeTopListDataForMenuView(){return this.activeTopListDataForMenuView$}get leftMenu(){return this._leftMenu}get leftMenuStatic(){return this._leftMenuStatic}set leftMenuStatic(e){this._leftMenuStatic=e}get betTypeList(){return this._betTypeList}get tournamentEventGroups(){return this._tournamentEventGroups}set tournamentEventGroups(e){this._tournamentEventGroups=e}get tournamentEventFixtures(){return this._tournamentEventFixtures}set tournamentEventFixtures(e){this._tournamentEventFixtures=e}get specialAntepost(){return this._specialAntepost}set specialAntepost(e){this._specialAntepost=e}get fixtureDetailMarketChange(){return this.fixtureDetailMarketChange$}get compactViewBetTypeGroupsData(){return this._compactViewBetTypeGroupsData}set compactViewBetTypeGroupsData(e){this._compactViewBetTypeGroupsData=e}get specialTournamentData(){return[{seaSURL:"world-cup-group-a",groupFixtures:["QAT","ECU","SEN","NLD"]},{seaSURL:"world-cup-group-b",groupFixtures:["ENG","IRN","USA","WAL"]},{seaSURL:"world-cup-group-c",groupFixtures:["ARG","SAU","MEX","POL"]},{seaSURL:"world-cup-group-d",groupFixtures:["FRA","AUS","DNK","TUN"]},{seaSURL:"world-cup-group-e",groupFixtures:["ESP","CRC","DEU","JPN"]},{seaSURL:"world-cup-group-f",groupFixtures:["CAN","BEL","MAR","HRV"]},{seaSURL:"world-cup-group-g",groupFixtures:["BRA","SRB","CHE","CMR"]},{seaSURL:"world-cup-group-h",groupFixtures:["PRT","GHA","URY","KOR"]}]}get betBoosterActiveSelection(){return this.betBoosterActiveSelection$}}w.\u0275fac=function(e){return new(e||w)(u.LFG(h.H),u.LFG(m._),u.LFG(p.eN),u.LFG(g.c),u.LFG(b.S),u.LFG(v.U),u.LFG(f.e),u.LFG(y.sK),u.LFG(S.U),u.LFG(E.$),u.LFG(T.W),u.LFG(A.t),u.LFG(I.e),u.LFG(b.S),u.LFG(B.W),u.LFG(O.Y),u.LFG(h.H))},w.\u0275prov=u.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})},41189:function(e,t,s){"use strict";s.d(t,{U:function(){return a}});var i=s(72643),r=s(25288);class a{constructor(e){this.storageService=e,window.dismissAllToasts=function(e){e.Toast.removeAll()}}info(e,t="",s=8e3){Materialize.toast(`<span onclick="dismissAllToasts(Materialize)"><i class="material-icons pg-icons left">info_outline</i>${e}</span>`,s,"info")}error(e,t="",s=8e3){const i=this.storageService.local.get("errorToasts")||{},r=Date.now();i[e]&&r-i[e]<s||(i[e]=r,this.storageService.local.set("errorToasts",i),Materialize.toast(`<span onclick="dismissAllToasts(Materialize)"><i class="material-icons pg-icons left">error_outline</i>${e}`,s,"error"))}success(e,t="",s=8e3){Materialize.toast(`<span onclick="dismissAllToasts(Materialize)"><i class="material-icons pg-icons left">check</i>${e}</span>`,s,"success")}warning(e,t="",s=8e3){Materialize.toast(`<span onclick="dismissAllToasts(Materialize)"><i class="material-icons pg-icons left">warning</i>${e}</span>`,s,"warning")}}a.\u0275fac=function(e){return new(e||a)(i.LFG(r.S))},a.\u0275prov=i.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})},41066:function(e,t,s){"use strict";s.d(t,{B:function(){return i}});const i=e=>e.toString().length<2?"0"+e:e.toString()},66071:function(e,t,s){"use strict";s.d(t,{q:function(){return i}});const i=e=>e?"string"==typeof e||e instanceof String?e.toString().split(""):Array.isArray(e)||e instanceof Map||e instanceof Set?[...e]:"object"==typeof e?Object.values(e):Array.from(e):[]}}]);