var StorySlider=StorySlider||function(){function p(u){new Swiper(".js_story_slider_nested",{slidesPerView:1,nested:!0,allowTouchMove:!1,navigation:{nextEl:".js_nested_slider_next",prevEl:".js_nested_slider_prev"},pagination:{el:".js_story_pgination",clickable:!1,bulletActiveClass:"nested__pagination-bullet-active",renderBullet:function(n,t){return`<div class="story-nested__pagination-bullet ${t} js_nested_pb" data-index="${n}"><span></span></div>`}},on:{reachEnd:function(n){n.slides.length>1&&s(n.wrapperEl.closest(".js_main_slide").dataset.blockId);n.navigation.nextEl.addEventListener("click",h,!1)},reachBeginning:function(n){n.navigation.prevEl.swiper=n;n.navigation.prevEl.addEventListener("click",c,!1)},slideNextTransitionStart:function(n){n.navigation.prevEl.removeEventListener("click",c,!1)},slidePrevTransitionStart:function(n){n.navigation.nextEl.removeEventListener("click",h,!1)},slideChange:function(r){let u=r.pagination.bullets,f=u.length;for(let n=0;n<f;n++)u[n].dataset.index<r.realIndex?u[n].classList.add("seen"):u[n].classList.remove("seen");t.isBeginning&&(r.isBeginning?r.navigation.prevEl.classList.add("hidden"):r.navigation.prevEl.classList.remove("hidden"));t.isEnd&&(r.isEnd?r.navigation.nextEl.classList.add("hidden"):r.navigation.nextEl.classList.remove("hidden"));a(r);n!=""&&n.cancel();n=r.isEnd?new customPauseResumeTimer(function(){t.slideNext(200)},i):new customPauseResumeTimer(function(){r.slideNext(200)},i)}}});t=new Swiper(`#js_story_slider_${r}`,{slidesPerView:3.5,initialSlide:u,spaceBetween:30,allowTouchMove:!1,centeredSlides:!0,on:{slideChange:v,afterInit:function(n){setTimeout(()=>{if(v(n),n.activeIndex==0){let t=n.slides[0].getElementsByClassName("js_story_slider_nested")[0].swiper;t.slides.length==1&&s(t.wrapperEl.closest(".js_main_slide").dataset.blockId)}},500)},activeIndexChange:function(n){setTimeout(()=>{let t=n.slides[n.activeIndex].getElementsByClassName("js_story_slider_nested")[0].swiper;t.slides.length==1&&s(t.wrapperEl.closest(".js_main_slide").dataset.blockId)},500)}},breakpoints:{1378:{slidesPerView:5.5}}})}function a(n){let t=n.slides.length;i=l;for(let r=0;r<t;r++){let t=n.slides[r].querySelector("video");if(t!=null){let u=n.slides[r].closest(".js_story_slider_nested").querySelector(".nested__pagination-bullet-active").firstChild;if(r==n.activeIndex)t.currentTime=0,t.play(),i=t.duration*1e3-500,u.style.animationDuration=t.duration+"s";else{t.muted=!0;t.pause();let n=t.nextElementSibling;n.nodeName=="BUTTON"&&n.classList.add("muted")}}}}function w(t){n!=""&&n.pause();let i=t.target;o=i.closest(".js_story_slider_nested").querySelector(".nested__pagination-bullet-active").firstChild;o.style.animationPlayState="paused";i.nodeName=="VIDEO"?(u=i,u.pause()):u=""}function b(){n!=""&&n.resume();o.style.animationPlayState="running";u!=""&&u.play()}function s(n){let t=getCookie("_stsSeen");t.includes(n+",")||(setCookie("_stsSeen",t+=n+",",10),document.querySelector('.js_story_preview[data-block-id="'+n+'"]').classList.add("seen"))}function h(n){n.stopPropagation();t.isEnd?f():t.slideNext(200)}function c(r){if(r.stopPropagation(),t.isBeginning){n!=""&&n.cancel();let u=r.currentTarget.swiper,t=u.slides[0].closest(".js_story_slider_nested").querySelector(".nested__pagination-bullet-active");t.classList.remove("nested__pagination-bullet-active");void t.offsetWidth;t.classList.add("nested__pagination-bullet-active");n=new customPauseResumeTimer(function(){u.slideNext(200)},i)}else t.slidePrev(200)}function v(r){if(r.slides.length>0){n!=""&&n.cancel();let s=r.activeIndex,o=r.previousIndex,u=r.slides[s].getElementsByClassName("js_story_slider_nested")[0].swiper,e=o!=undefined?r.slides[o].getElementsByClassName("js_story_slider_nested")[0].swiper:"";if(e!=""){prevSwSlidesLength=e.slides.length;for(let n=0;n<prevSwSlidesLength;n++){let t=e.slides[n].querySelector("video");if(t!=null){let n=t.nextElementSibling;n.nodeName=="BUTTON"&&n.classList.add("muted");t.muted=!0;t.pause()}}}a(u);n=t.isEnd?u.isEnd?new customPauseResumeTimer(f,i):new customPauseResumeTimer(function(){u.slideNext(200)},i):u.slides.length>1?u.isEnd?new customPauseResumeTimer(function(){t.slideNext(200)},i):new customPauseResumeTimer(function(){u.slideNext(200)},i):new customPauseResumeTimer(function(){t.slideNext(200)},i)}}function y(n){n.keyCode==27&&f()}function f(){e.classList.add("hidden");document.body.classList.remove("ofh");n!=""&&n.cancel();document.querySelectorAll(".js_nested_slider_next").forEach(n=>{n.removeEventListener("click",h,!1)});document.querySelectorAll(".js_nested_slider_prev").forEach(n=>{n.removeEventListener("click",c,!1)});document.querySelectorAll(".js_story_video").forEach(n=>{n.muted=!0,n.pause(),n.currentTime=0,n.nextElementSibling.classList.add("muted")});document.querySelector(".js_nested_nav_prev_first").classList.add("hidden");document.querySelector(".js_nested_nav_next_last").classList.add("hidden");for(let n=0;n<t.slides.length;n++)t.slides[n].getElementsByClassName("js_story_slider_nested")[0].swiper.destroy();t.destroy()}const l=4500;let e="",r="",t="",i=l,n="",o="",u="";return document.querySelectorAll(".js_main_slide").forEach(n=>{n.addEventListener("click",function(){let n=this.dataset.index;t.slideTo(n,500)})}),document.querySelectorAll(".js_nested_items").forEach(n=>{initPresslHoldEvent(n,w,b)}),document.querySelectorAll(".js_story_preview").forEach(n=>{n.addEventListener("click",function(){p(this.dataset.index);e.classList.remove("hidden");document.body.classList.add("ofh")})}),document.querySelectorAll(".js_story_video_mute_btn").forEach(n=>{n.addEventListener("click",function(){let t=this,n=t.previousElementSibling;n&&n.nodeName=="VIDEO"&&(n.muted?(n.muted=!1,t.classList.remove("muted")):(t.classList.add("muted"),n.muted=!0))})}),document.removeEventListener("keyup",y,!1),document.addEventListener("keyup",y,!1),{init:function(n){r=n.bannerGroupId;e=document.getElementById(`js_story_cont_${r}`);new Swiper(`#js_story_preview_slider_${r}`,{slidesPerView:"auto",allowTouchMove:!0,centeredSlides:!1,spaceBetween:12,navigation:{nextEl:`#js_prw_slider_next_${r}`,prevEl:`#js_prw_slider_prev_${r}`}});document.getElementById(`js_story_close_${r}`).addEventListener("click",function(){f()})},destorySlider:f}}()