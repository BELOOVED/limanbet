(function(n){typeof module=="object"&&typeof module.exports=="object"?module.exports=function(t){n(t,window,document)}:n(jQuery,window,document)})(function(n,t,i){function f(n,t){t=t||{};n._options.elementContainer=t.elementContainer||"div";var i=t.classNames||{};n._options.classNameSeconds=i.seconds||"jst-seconds";n._options.classNameMinutes=i.minutes||"jst-minutes";n._options.classNameHours=i.hours||"jst-hours";n._options.classNameClearDiv=i.clearDiv||"jst-clearDiv";n._options.classNameTimeout=i.timeout||"jst-timeout"}Number.isFinite=Number.isFinite||function(n){return typeof n=="number"&&isFinite(n)};var u,r=function(n){return this._options={},this.targetElement=n,this};r.start=function(n,t){return u=new r(t),f(u,n),u.start(n)};r.prototype.start=function(t){var r=this,f=function(n){var e=i.createElement(r._options.elementContainer),t,u,f;return e.className=r._options.classNameSeconds,t=i.createElement(r._options.elementContainer),t.className=r._options.classNameMinutes,u=i.createElement(r._options.elementContainer),u.className=r._options.classNameHours,f=i.createElement(r._options.elementContainer),f.className=r._options.classNameClearDiv,n.append(u).append(t).append(e).append(f)};this.targetElement.each(function(i,r){var o=this,e=n(r),s=e.attr("class");e.on("complete",function(){clearInterval(e.intervalId)});e.on("complete",function(){e.onComplete(e)});e.on("tick",function(){e.onTick(e)});e.on("complete",function(){e.addClass(o._options.classNameTimeout)});e.on("complete",function(){t&&t.loop===!0&&u.resetTimer(e,t,s)});e.on("pause",function(){clearInterval(e.intervalId);e.paused=!0});e.on("resume",function(){e.paused=!1;o.startCountdown(e,{secondsLeft:e.data("timeLeft")})});return f(e),this.startCountdown(e,t)}.bind(this))};r.prototype.resetTimer=function(n,t,i){var r=0;t.loopInterval&&(r=parseInt(t.loopInterval,10)*1e3);setTimeout(function(){n.trigger("reset");n.attr("class",i+" loop");u.startCountdown(n,t)},r)};r.prototype.fetchSecondsLeft=function(n){var t=n.data("seconds-left"),i=n.data("minutes-left");if(Number.isFinite(t))return parseInt(t,10);if(Number.isFinite(i))return parseFloat(i)*60;throw"Missing time data";};r.prototype.startCountdown=function(n,t){var r,u;if(t=t||{},r=null,u=function(){return clearInterval(r),this.clearTimer(n)}.bind(this),n.onTick=t.onTick||null,n.onComplete=t.onComplete||u,n.allowPause=t.allowPause||!1,n.allowPause)n.on("click",function(){n.paused?n.trigger("resume"):n.trigger("pause")});var e=t.secondsLeft||this.fetchSecondsLeft(n),o=t.refreshRate||1e3,f=e+this.currentTime(),i=f-this.currentTime();this.setFinalValue(this.formatTimeLeft(i),n);r=setInterval(function(){i=f-this.currentTime();i<0&&(i=0);n.data("timeLeft",i);this.setFinalValue(this.formatTimeLeft(i),n)}.bind(this),o);n.intervalId=r};r.prototype.clearTimer=function(n){n.text("00:00")};r.prototype.currentTime=function(){return Math.round((new Date).getTime()/1e3)};r.prototype.formatTimeLeft=function(n){var i=function(n,t){return t=t||2,n=n+"",n.length>=t?n:Array(t-n.length+1).join(0)+n},r=Math.floor(n/3600),t,u;return n-=r*3600,t=Math.floor(n/60),n-=t*60,u=parseInt(n%60,10),+r==0&&+t==0&&+u==0?[]:[i(r),i(t),i(u)]};r.prototype.setFinalValue=function(n,t){if(n.length===0)return this.clearTimer(t),t.trigger("complete"),!1;if(n.length==3){var i=n[0]*1;i>0?t.text(n[0]+":"+n[1]+":"+n[2]):t.text(n[1]+":"+n[2]);t.attr("hours",n[0]);t.attr("minutes",n[1]);t.attr("seconds",n[2])}else t.text(n[1]+":"+n[2]);t.onTick!=null&&t.trigger("tick")};n.fn.startTimer=function(n){return this.TimerObject=r,r.start(n,this),this}});